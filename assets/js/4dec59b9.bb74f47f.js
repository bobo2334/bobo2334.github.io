"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[109],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return c}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),o=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=o(e.components);return a.createElement(p.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),m=o(t),c=r,k=m["".concat(p,".").concat(c)]||m[c]||d[c]||l;return t?a.createElement(k,i(i({ref:n},u),{},{components:t})):a.createElement(k,i({ref:n},u))}));function c(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=m;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var o=2;o<l;o++)i[o]=t[o];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},99489:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return s},metadata:function(){return o},toc:function(){return d}});var a=t(83117),r=t(80102),l=(t(67294),t(3905)),i=["components"],s={},p="Mybaitis",o={unversionedId:"notes/java/mybatis",id:"notes/java/mybatis",title:"Mybaitis",description:"\u53c2\u8003\u8d44\u6599",source:"@site/docs/notes/java/mybatis.md",sourceDirName:"notes/java",slug:"/notes/java/mybatis",permalink:"/docs/notes/java/mybatis",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"JDBC",permalink:"/docs/notes/java/jdbc"},next:{title:"Spring",permalink:"/docs/notes/java/spring"}},u={},d=[{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2},{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u5f00\u53d1\u6b65\u9aa4",id:"\u5f00\u53d1\u6b65\u9aa4",level:2},{value:"\u4f20\u7edf CRUD \u6848\u4f8b",id:"\u4f20\u7edf-crud-\u6848\u4f8b",level:2},{value:"select",id:"select",level:3},{value:"insert",id:"insert",level:3},{value:"update",id:"update",level:3},{value:"delete",id:"delete",level:3},{value:"\u4ee3\u7406 DAO \u6848\u4f8b",id:"\u4ee3\u7406-dao-\u6848\u4f8b",level:2},{value:"Java API",id:"java-api",level:2},{value:"Resources",id:"resources",level:3},{value:"SqlSession",id:"sqlsession",level:3},{value:"\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6.xml",id:"\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6xml",level:2},{value:"properties",id:"properties",level:3},{value:"settings",id:"settings",level:3},{value:"mapUnderscoreToCamelCase",id:"mapunderscoretocamelcase",level:4},{value:"typeAliases",id:"typealiases",level:3},{value:"typeHandlers",id:"typehandlers",level:3},{value:"plugins",id:"plugins",level:3},{value:"PageHelper",id:"pagehelper",level:4},{value:"environments",id:"environments",level:3},{value:"mappers",id:"mappers",level:3},{value:"\u6620\u5c04\u6587\u4ef6.xml",id:"\u6620\u5c04\u6587\u4ef6xml",level:2},{value:"\u53c2\u6570",id:"\u53c2\u6570",level:3},{value:"\u83b7\u53d6\u81ea\u52a8\u751f\u6210\u7684\u4e3b\u952e",id:"\u83b7\u53d6\u81ea\u52a8\u751f\u6210\u7684\u4e3b\u952e",level:3},{value:"parameterType",id:"parametertype",level:3},{value:"resultType",id:"resulttype",level:3},{value:"resultMap",id:"resultmap",level:3},{value:"sql",id:"sql",level:3},{value:"\u63a5\u53e3\u7f16\u5199",id:"\u63a5\u53e3\u7f16\u5199",level:2},{value:"\u65b9\u6cd5\u8fd4\u56de\u503c",id:"\u65b9\u6cd5\u8fd4\u56de\u503c",level:3},{value:"\u6a21\u7cca\u67e5\u8be2",id:"\u6a21\u7cca\u67e5\u8be2",level:3},{value:"\u5b57\u6bb5\u548c\u5c5e\u6027\u6620\u5c04",id:"\u5b57\u6bb5\u548c\u5c5e\u6027\u6620\u5c04",level:3},{value:"\u5ef6\u8fdf\u52a0\u8f7d",id:"\u5ef6\u8fdf\u52a0\u8f7d",level:3},{value:"\u52a8\u6001 SQL",id:"\u52a8\u6001-sql",level:2},{value:"if",id:"if",level:3},{value:"where",id:"where",level:3},{value:"set",id:"set",level:3},{value:"trim",id:"trim",level:3},{value:"choose",id:"choose",level:3},{value:"foreach",id:"foreach",level:3},{value:"\u591a\u8868\u64cd\u4f5c",id:"\u591a\u8868\u64cd\u4f5c",level:2},{value:"\u4e00\u5bf9\u4e00 XML \u67e5\u8be2",id:"\u4e00\u5bf9\u4e00-xml-\u67e5\u8be2",level:3},{value:"\u4e00\u5bf9\u591a XML \u67e5\u8be2",id:"\u4e00\u5bf9\u591a-xml-\u67e5\u8be2",level:3},{value:"\u5206\u6b65\u67e5\u8be2",id:"\u5206\u6b65\u67e5\u8be2",level:3},{value:"\u7f13\u5b58",id:"\u7f13\u5b58",level:2},{value:"\u4e00\u7ea7\u7f13\u5b58",id:"\u4e00\u7ea7\u7f13\u5b58",level:3},{value:"\u4e8c\u7ea7\u7f13\u5b58",id:"\u4e8c\u7ea7\u7f13\u5b58",level:3},{value:"\u7f13\u5b58\u67e5\u8be2\u987a\u5e8f",id:"\u7f13\u5b58\u67e5\u8be2\u987a\u5e8f",level:3},{value:"\u81ea\u5b9a\u4e49\u7f13\u5b58\u5b9e\u73b0",id:"\u81ea\u5b9a\u4e49\u7f13\u5b58\u5b9e\u73b0",level:3},{value:"\u6ce8\u89e3\u5f00\u53d1",id:"\u6ce8\u89e3\u5f00\u53d1",level:2},{value:"\u57fa\u672c\u67e5\u8be2",id:"\u57fa\u672c\u67e5\u8be2",level:3},{value:"\u590d\u6742\u67e5\u8be2",id:"\u590d\u6742\u67e5\u8be2",level:3},{value:"\u4e00\u5bf9\u4e00\u6ce8\u89e3\u67e5\u8be2",id:"\u4e00\u5bf9\u4e00\u6ce8\u89e3\u67e5\u8be2",level:4},{value:"\u4e00\u5bf9\u591a\u6ce8\u89e3\u67e5\u8be2",id:"\u4e00\u5bf9\u591a\u6ce8\u89e3\u67e5\u8be2",level:4},{value:"MyBatis Generator",id:"mybatis-generator",level:2},{value:"MyBatis3Simple",id:"mybatis3simple",level:3},{value:"MyBatis3",id:"mybatis3",level:3}],m={toc:d};function c(e){var n=e.components,t=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"mybaitis"},"Mybaitis"),(0,l.kt)("h2",{id:"\u53c2\u8003\u8d44\u6599"},"\u53c2\u8003\u8d44\u6599"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.bilibili.com/video/BV1Ya411S7aT"},"\u3010\u5c1a\u7845\u8c37\u3011SSM \u6846\u67b6\u5168\u5957\u6559\u7a0b\uff0cMyBatis+Spring+SpringMVC+SSM \u6574\u5408\u4e00\u5957\u901a\u5173","_","\u54d4\u54e9\u54d4\u54e9","_","bilibili")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://mybatis.org/mybatis-3/zh/index.html"},"mybatis \u2013 MyBatis 3 | \u7b80\u4ecb")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://javadoc.io/doc/org.mybatis/mybatis/latest/index.html"},"mybatis 3.5.5 javadoc (org.mybatis)")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://mybatis.org/generator/index.html"},"MyBatis Generator Core \u2013 Introduction to MyBatis Generator"))),(0,l.kt)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),(0,l.kt)("p",null,"Mybaitis \u662f\u4e00\u4e2a\u6301\u4e45\u5c42\u6846\u67b6\uff0c\u7528\u4e8e\u7b80\u5316 JDBC \u64cd\u4f5c\u3002"),(0,l.kt)("h2",{id:"\u5f00\u53d1\u6b65\u9aa4"},"\u5f00\u53d1\u6b65\u9aa4"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5bfc\u5165 Mybatis \u4f9d\u8d56\uff1b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --\x3e\n<dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>8.0.20</version>\n</dependency>\n\n\x3c!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --\x3e\n<dependency>\n    <groupId>org.mybatis</groupId>\n    <artifactId>mybatis</artifactId>\n    <version>3.5.5</version>\n</dependency>\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u521b\u5efa\u6570\u636e\u5e93\u548c\u8868\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u7f16\u5199\u5b9e\u4f53\u7c7b\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u7f16\u5199 XML \u6620\u5c04\u6587\u4ef6 UserMapper.xml\uff1b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE mapper\n        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"\n        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">\n<mapper namespace="userMapper">\n\n    <select id="findAll" resultType="me.iuok.domain.User">\n        select * from user\n    </select>\n\n</mapper>\n')),(0,l.kt)("ol",{start:5},(0,l.kt)("li",{parentName:"ol"},"\u7f16\u5199 XML \u914d\u7f6e\u6587\u4ef6 SqlMapConfig.xml\uff1b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE configuration\n        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"\n        "http://mybatis.org/dtd/mybatis-3-config.dtd">\n<configuration>\n    <environments default="development">\n        <environment id="development">\n            <transactionManager type="JDBC"/>\n            <dataSource type="POOLED">\n                <property name="driver" value="com.mysql.cj.jdbc.Driver"/>\n                <property name="url" value="jdbc:mysql:///blog"/>\n                <property name="username" value="root"/>\n                <property name="password" value="root"/>\n            </dataSource>\n        </environment>\n    </environments>\n\n    <mappers>\n        <mapper resource="me/iuok/mapper/UserMapper.xml"/>\n    </mappers>\n</configuration>\n')),(0,l.kt)("ol",{start:6},(0,l.kt)("li",{parentName:"ol"},"\u6d4b\u8bd5\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void quickStart() throws IOException {\n    InputStream resource = Resources.getResourceAsStream("mybatis-config.xml");\n    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(resource);\n    SqlSession sqlSession = sqlSessionFactory.openSession();\n    List<User> list = sqlSession.selectList("userMapper.findAll");\n\n    for (User user : list) {\n        log.info(user.toString());\n    }\n\n    sqlSession.close();\n}\n')),(0,l.kt)("h2",{id:"\u4f20\u7edf-crud-\u6848\u4f8b"},"\u4f20\u7edf CRUD \u6848\u4f8b"),(0,l.kt)("p",null,"\u6bcf\u4e2a\u4e1a\u52a1\u4e2d\u7684\u4f7f\u7528\u7684 SqlSession \u90fd\u5e94\u8be5\u662f\u65b0\u83b7\u53d6\u7684\uff0c\u56e0\u4e3a\u6bcf\u4e2a SqlSession \u91cc\u9762\u90fd\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u4e8b\u52a1\u3002"),(0,l.kt)("h3",{id:"select"},"select"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<select id="findAll" resultType="me.iuok.domain.User">\n    select * from user\n</select>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void selectList() {\n    List<User> list = sqlSession.selectList("userMapper.findAll");\n\n    Assert.assertNotEquals(0, list.size());\n\n    for (User user : list) {\n        log.info(user.toString());\n    }\n}\n')),(0,l.kt)("h3",{id:"insert"},"insert"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<insert id="save" parameterType="me.iuok.domain.User">\n    insert into user (username, password) values (#{username}, #{password})\n</insert>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void insert() {\n    User user = new User();\n    user.setUsername("Mybaitis insert test");\n    user.setPassword("no password");\n    int result = sqlSession.insert("userMapper.save", user);\n    sqlSession.commit();\n    log.info(String.valueOf(result));\n    Assert.assertEquals(1, result);\n}\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5728\u6620\u5c04\u6587\u4ef6\u4e2d\u8981\u6307\u5b9a\u53c2\u6570\u7c7b\u578b ",(0,l.kt)("inlineCode",{parentName:"li"},"parameterType"),"\uff1b"),(0,l.kt)("li",{parentName:"ol"},"SQL \u8bed\u53e5\u4e2d\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"#{\u5c5e\u6027\u540d}")," \u6765\u5f15\u7528\u5b9e\u4f53\u4e2d\u7684\u5c5e\u6027\u503c\uff1b"),(0,l.kt)("li",{parentName:"ol"},"sqlSession.insert \u7684\u8fd4\u56de\u503c\u662f\u53d7\u5f71\u54cd\u7684\u884c\u6570\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u6d89\u53ca\u6570\u636e\u6539\u52a8\uff0c\u8981\u624b\u52a8\u63d0\u4ea4\u4e8b\u52a1 ",(0,l.kt)("inlineCode",{parentName:"li"},"sqlSession.commit()"),"\u3002")),(0,l.kt)("h3",{id:"update"},"update"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<update id="update" parameterType="me.iuok.domain.User">\n    update user set username = #{username}, password = #{password} where id = #{id}\n</update>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void update() {\n    User user = new User(6, "mybatis update", "new password");\n    int rows = sqlSession.update("userMapper.update", user);\n    sqlSession.commit();\n    log.info(String.valueOf(rows));\n    Assert.assertEquals(1, rows);\n}\n')),(0,l.kt)("h3",{id:"delete"},"delete"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<delete id="deleteById" parameterType="java.lang.Integer">\n    delete from user where id = #{id}\n</delete>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void delete() {\n    int rows = sqlSession.delete("userMapper.deleteById", 7);\n    sqlSession.commit();\n    log.info(String.valueOf(rows));\n}\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"parameterType")," \u5c06\u4f1a\u4f20\u5165\u8fd9\u6761\u8bed\u53e5\u7684\u53c2\u6570\u7684\u7c7b\u5168\u9650\u5b9a\u540d\u6216\u522b\u540d\u3002\u8fd9\u4e2a\u5c5e\u6027\u662f\u53ef\u9009\u7684\uff0c\u56e0\u4e3a MyBatis \u53ef\u4ee5\u901a\u8fc7\u7c7b\u578b\u5904\u7406\u5668\uff08TypeHandler\uff09\u63a8\u65ad\u51fa\u5177\u4f53\u4f20\u5165\u8bed\u53e5\u7684\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a\u672a\u8bbe\u7f6e\uff08unset\uff09\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u53ea\u6709\u4e00\u4e2a\u53c2\u6570\u5e76\u4e14\u662f\u57fa\u672c\u6570\u636e\u7c7b\u578b\u65f6\uff0c\u5360\u4f4d\u7b26\u91cc\u9762\u7684\u5c5e\u6027\u540d\u53ef\u4ee5\u968f\u4fbf\u5199\u3002")),(0,l.kt)("h2",{id:"\u4ee3\u7406-dao-\u6848\u4f8b"},"\u4ee3\u7406 DAO \u6848\u4f8b"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"XML \u6620\u5c04\u6587\u4ef6\u4e2d\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"namespace")," \u5e94\u8be5\u548c\u63a5\u53e3\u7684\u5168\u9650\u5b9a\u7c7b\u540d\u76f8\u540c\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u63a5\u53e3\u4e2d\u7684\u65b9\u6cd5\u540d\u5e94\u8be5\u548c\u6620\u5c04\u6587\u4ef6\u4e2d\u6bcf\u4e00\u4e2a SQL \u8bed\u53e5\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"id")," \u76f8\u540c\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u63a5\u53e3\u4e2d\u65b9\u6cd5\u7684\u53c2\u6570\u5e94\u8be5\u4e0e ",(0,l.kt)("inlineCode",{parentName:"li"},"parameterType")," \u76f8\u540c\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u63a5\u53e3\u4e2d\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u5e94\u8be5\u4e0e ",(0,l.kt)("inlineCode",{parentName:"li"},"resultType")," \u76f8\u540c\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE mapper\n        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"\n        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">\n<mapper namespace="me.iuok.mapper.UserMapper">\n\n    <select id="findAll" resultType="user">\n        select * from user\n    </select>\n\n    <select id="findById" parameterType="int" resultType="user">\n        select * from user where id = #{id}\n    </select>\n\n    <insert id="save" parameterType="user">\n        insert into user (username, password) values (#{username}, #{password})\n    </insert>\n\n    <update id="update" parameterType="user">\n        update user set username = #{username}, password = #{password} where id = #{id}\n    </update>\n\n    <delete id="deleteById" parameterType="int">\n        delete from user where id = #{id}\n    </delete>\n\n</mapper>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public interface UserMapper {\n\n    List<User> findAll();\n\n    User findById(int id);\n\n    int save(User user);\n\n    int update(User user);\n\n    int deleteById(int id);\n\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public class UserMapperTest {\n\n    private static InputStream resource;\n\n    private static SqlSessionFactory sqlSessionFactory;\n\n    private static SqlSession sqlSession;\n\n    private static UserMapper userMapper;\n\n    @BeforeClass\n    public static void beforeClass() throws Exception {\n        resource = Resources.getResourceAsStream("mybatis-config.xml");\n        sqlSessionFactory = new SqlSessionFactoryBuilder().build(resource);\n    }\n\n    @AfterClass\n    public static void afterClass() throws Exception {\n        resource.close();\n    }\n\n    @Before\n    public void setUp() throws Exception {\n        sqlSession = sqlSessionFactory.openSession();\n        userMapper = sqlSession.getMapper(UserMapper.class);\n    }\n\n    @After\n    public void tearDown() throws Exception {\n        sqlSession.close();\n    }\n\n    @Test\n    public void findAll() {\n        List<User> users = userMapper.findAll();\n        Assert.assertNotEquals(0, users.size());\n\n        for (User user : users) {\n            log.info(user.toString());\n        }\n    }\n\n    @Test\n    public void findById() {\n        User user = userMapper.findById(2);\n        Assert.assertNotNull(user);\n        log.info(user.toString());\n    }\n}\n')),(0,l.kt)("h2",{id:"java-api"},"Java API"),(0,l.kt)("h3",{id:"resources"},"Resources"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"URL getResourceURL(String resource)\nURL getResourceURL(ClassLoader loader, String resource)\nInputStream getResourceAsStream(String resource)\nInputStream getResourceAsStream(ClassLoader loader, String resource)\nProperties getResourceAsProperties(String resource)\nProperties getResourceAsProperties(ClassLoader loader, String resource)\nReader getResourceAsReader(String resource)\nReader getResourceAsReader(ClassLoader loader, String resource)\nFile getResourceAsFile(String resource)\nFile getResourceAsFile(ClassLoader loader, String resource)\nInputStream getUrlAsStream(String urlString)\nReader getUrlAsReader(String urlString)\nProperties getUrlAsProperties(String urlString)\nClass classForName(String className)\n")),(0,l.kt)("h3",{id:"sqlsession"},"SqlSession"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"<T> T selectOne(String statement, Object parameter)\n<E> List<E> selectList(String statement, Object parameter)\n<T> Cursor<T> selectCursor(String statement, Object parameter)\n<K,V> Map<K,V> selectMap(String statement, Object parameter, String mapKey)\nint insert(String statement, Object parameter)\nint update(String statement, Object parameter)\nint delete(String statement, Object parameter)\n")),(0,l.kt)("h2",{id:"\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6xml"},"\u6838\u5fc3\u914d\u7f6e\u6587\u4ef6.xml"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"configuration",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"properties"),(0,l.kt)("li",{parentName:"ul"},"settings"),(0,l.kt)("li",{parentName:"ul"},"typeAliases"),(0,l.kt)("li",{parentName:"ul"},"typeHandlers"),(0,l.kt)("li",{parentName:"ul"},"objectFactory"),(0,l.kt)("li",{parentName:"ul"},"plugins"),(0,l.kt)("li",{parentName:"ul"},"environments",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"environment",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"transactionManager"),(0,l.kt)("li",{parentName:"ul"},"dataSource"))))),(0,l.kt)("li",{parentName:"ul"},"databaseProvider"),(0,l.kt)("li",{parentName:"ul"},"mappers")))),(0,l.kt)("h3",{id:"properties"},"properties"),(0,l.kt)("p",null,"\u5f15\u5165\u5916\u90e8",(0,l.kt)("inlineCode",{parentName:"p"},"properties"),"\u6587\u4ef6\u4e2d\u7684\u5c5e\u6027\uff0c\u6216\u8005\u81ea\u5df1\u5728\u6b64\u533a\u57df\u4e2d\u5b9a\u4e49\u5c5e\u6027\uff0c\u53ef\u4ee5\u5728\u540e\u6587\u4e2d\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"${name}"),"\u5f15\u7528\u8fd9\u4e9b\u5c5e\u6027\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<properties resource="jdbc.properties">\n    <property name="a" value="b"/>\n</properties>\n')),(0,l.kt)("h3",{id:"settings"},"settings"),(0,l.kt)("h4",{id:"mapunderscoretocamelcase"},"mapUnderscoreToCamelCase"),(0,l.kt)("p",null,"\u6620\u5c04\u5b57\u6bb5",(0,l.kt)("inlineCode",{parentName:"p"},"column_name"),"\u4e3a\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"p"},"columnName"),"\u3002"),(0,l.kt)("h3",{id:"typealiases"},"typeAliases"),(0,l.kt)("p",null,"\u5b9a\u4e49\u7c7b\u578b\u522b\u540d\uff0c\u4e3a\u67d0\u4e2a\u7c7b\u578b\u8bbe\u7f6e\u7b80\u77ed\u7684\u540d\u5b57\uff0c\u4e0d\u9700\u8981\u5199\u5168\u7c7b\u540d\u4e86\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"alias"),"\u53ef\u4ee5\u7701\u7565\uff0c\u9ed8\u8ba4\u522b\u540d\u5c31\u662f\u7c7b\u540d\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002"),(0,l.kt)("p",null,"\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u626b\u63cf\u67d0\u4e2a\u5305\u8def\u5f84\uff0c\u5176\u4e0b\u7684\u6240\u6709\u7c7b\u90fd\u8bbe\u7f6e\u522b\u540d\uff0c\u522b\u540d\u5c31\u662f\u7c7b\u540d\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<typeAliases>\n    <typeAlias type="o.e.entity.TUser" alias="User"/>\n    <package name="o.e.entity"/>\n</typeAliases>\n')),(0,l.kt)("p",null,"Mybatis \u9ed8\u8ba4\u5b9a\u4e49\u4e86\u4e00\u4e9b\u5e38\u7528\u7684\u7c7b\u578b\u522b\u540d\uff0c\u5982",(0,l.kt)("inlineCode",{parentName:"p"},"_int"),"\u5bf9\u5e94",(0,l.kt)("inlineCode",{parentName:"p"},"int"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"int"),"\u5bf9\u5e94",(0,l.kt)("inlineCode",{parentName:"p"},"Integer"),"\u3002\u5b8c\u6574\u7684\u9ed8\u8ba4\u522b\u540d\u5217\u8868\u53ef\u4ee5\u53c2\u8003 ",(0,l.kt)("em",{parentName:"p"},(0,l.kt)("a",{parentName:"em",href:"https://mybatis.org/mybatis-3/configuration.html#typealiases"},"mybatis \u2013 MyBatis 3 | Configuration")),"\u3002"),(0,l.kt)("h3",{id:"typehandlers"},"typeHandlers"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u65b0\u7c7b\uff0c\u7ee7\u627f ",(0,l.kt)("inlineCode",{parentName:"li"},"BaseTypeHandler<>"),"\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u5b9e\u73b0\u65b9\u6cd5\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6ce8\u518c\u3002")),(0,l.kt)("h3",{id:"plugins"},"plugins"),(0,l.kt)("h4",{id:"pagehelper"},"PageHelper"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5bfc\u5165\u4f9d\u8d56\uff1b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"\x3c!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --\x3e\n<dependency>\n    <groupId>com.github.pagehelper</groupId>\n    <artifactId>pagehelper</artifactId>\n    <version>5.1.10</version>\n</dependency>\n")),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\uff1b")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<plugins>\n    <plugin interceptor="com.github.pagehelper.PageInterceptor"/>\n</plugins>\n')),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u5728\u4f60\u9700\u8981\u8fdb\u884c\u5206\u9875\u7684 MyBatis \u67e5\u8be2\u65b9\u6cd5\u524d\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"PageHelper.startPage")," \u9759\u6001\u65b9\u6cd5\u5373\u53ef\uff0c\u7d27\u8ddf\u5728\u8fd9\u4e2a\u65b9\u6cd5\u540e\u7684\u7b2c\u4e00\u4e2a MyBatis \u67e5\u8be2\u65b9\u6cd5\u4f1a\u88ab\u8fdb\u884c\u5206\u9875\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@Test\npublic void pageHelper() {\n    PageHelper.startPage(1, 2);\n\n    List<User> users = userMapper.findAll();\n    Assert.assertNotEquals(0, users.size());\n\n    for (User user : users) {\n        log.info(user.toString());\n    }\n}\n")),(0,l.kt)("ol",{start:4},(0,l.kt)("li",{parentName:"ol"},"\u83b7\u53d6\u5206\u9875\u76f8\u5173\u53c2\u6570\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u5bfc\u822a\u7684\u9875\u6570\uff0c\u5c31\u662f\u524d\u7aef\u663e\u793a\u7684\u65f6\u5019\u4e0a\u4e00\u9875\u548c\u4e0b\u4e00\u9875\u6309\u94ae\u4e2d\u7684\u9875\u7684\u6570\u91cf\uff0c\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"li"},"getNavigatepageNums()"),"\u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u9875\u7801\u6570\u7ec4\uff1b\u8fd9\u4e2a\u53c2\u6570\u662f\u53ef\u9009\u7684\uff0c\u9ed8\u8ba4\u503c\u662f 8\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"PageInfo<User> pageInfo = new PageInfo<>(users, 5);\n")),(0,l.kt)("h3",{id:"environments"},"environments"),(0,l.kt)("p",null,"\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a\u73af\u5883\uff0c\u521d\u59cb\u5316\u65f6\u53ef\u4ee5\u9009\u62e9\u67d0\u4e2a\u73af\u5883\u8fdb\u884c\u521d\u59cb\u5316\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"transactionManager.type"),"\uff0c\u8bbe\u7f6e\u4e8b\u52a1\u7ba1\u7406\u5668",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"JDBC"),"\uff0c\u539f\u751f\u4e8b\u52a1\u7ba1\u7406\u65b9\u5f0f\uff0c\u81ea\u5df1\u624b\u52a8\u63d0\u4ea4"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"MANAGEd"),"\uff0c\u88ab\u7ba1\u7406\u7684\uff0c\u4f8b\u5982 Spring"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"dataSource.type"),"\uff0c\u8bbe\u7f6e\u6570\u636e\u6e90",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"POOLED"),"\uff0c\u4f7f\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"UNPOOLED"),"\uff0c\u4e0d\u9002\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"JNDI"),"\uff0c\u4f7f\u7528\u4e0a\u4e0b\u6587\u7684\u6570\u636e\u6e90")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<environments default="development">\n    <environment id="development">\n        <transactionManager type="JDBC"/>\n        <dataSource type="POOLED">\n            <property name="driver" value="com.mysql.cj.jdbc.Driver"/>\n            <property name="url" value="jdbc:mysql:///ssm"/>\n            <property name="username" value="root"/>\n            <property name="password" value="root"/>\n        </dataSource>\n    </environment>\n</environments>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'Reader config = Resources.getResourceAsReader("mybatis-config.xml");\nSqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();\nsqlSessionFactory = builder.build(config, "development");\n')),(0,l.kt)("h3",{id:"mappers"},"mappers"),(0,l.kt)("p",null,"\u5f15\u5165 Mybatsi \u6620\u5c04\u6587\u4ef6\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u76f8\u5bf9\u4e8e\u7c7b\u8def\u5f84\u7684\u8d44\u6e90\u5f15\u7528")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<mapper resource="org/mybatis/builder/AuthorMapper.xml"/>\n')),(0,l.kt)("ol",{start:2},(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528\u5b8c\u5168\u9650\u5b9a\u8d44\u6e90\u5b9a\u4f4d\u7b26\uff08URL\uff09")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<mapper url="file:///var/mappers/AuthorMapper.xml"/>\n')),(0,l.kt)("ol",{start:3},(0,l.kt)("li",{parentName:"ol"},"\u5c06\u5305\u5185\u7684\u6620\u5c04\u5668\u63a5\u53e3\u5b9e\u73b0\u5168\u90e8\u6ce8\u518c\u4e3a\u6620\u5c04\u5668\uff1b\u8981\u6c42 XML \u6587\u4ef6\u548c\u63a5\u53e3\u90fd\u5728\u540c\u4e00\u4e2a\u5305\u4e0b\uff0c\u5e76\u4e14\u6587\u4ef6\u540d\u4e5f\u76f8\u540c\u3002")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<package name="org.mybatis.builder"/>\n')),(0,l.kt)("h2",{id:"\u6620\u5c04\u6587\u4ef6xml"},"\u6620\u5c04\u6587\u4ef6.xml"),(0,l.kt)("h3",{id:"\u53c2\u6570"},"\u53c2\u6570"),(0,l.kt)("p",null,"\u539f\u59cb\u7c7b\u578b\u6216\u7b80\u5355\u6570\u636e\u7c7b\u578b\uff08\u6bd4\u5982 ",(0,l.kt)("inlineCode",{parentName:"p"},"Integer")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"String"),"\uff09\u56e0\u4e3a\u6ca1\u6709\u5176\u5b83\u5c5e\u6027\uff0c\u4f1a\u7528\u5b83\u4eec\u7684\u503c\u6765\u4f5c\u4e3a\u53c2\u6570\u3002\u8fd9\u4e2a\u53c2\u6570\u53ef\u4ee5\u968f\u610f\u547d\u540d\u3002"),(0,l.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"#{}")," \u53c2\u6570\u8bed\u6cd5\u65f6\uff0cMyBatis \u4f1a\u521b\u5efa ",(0,l.kt)("inlineCode",{parentName:"p"},"PreparedStatement")," \u53c2\u6570\u5360\u4f4d\u7b26\uff0c\u5e76\u901a\u8fc7\u5360\u4f4d\u7b26\u5b89\u5168\u5730\u8bbe\u7f6e\u53c2\u6570\uff08\u5c31\u50cf\u4f7f\u7528 ? \u4e00\u6837\uff09\u3002"),(0,l.kt)("p",null,"\u5728\u6709\u76f4\u63a5\u66ff\u6362\u5b57\u7b26\u4e32\u9700\u6c42\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"${}"),"\uff0c\u8be5\u503c\u4e0d\u4f1a\u88ab\u9884\u7f16\u8bd1\u3002",(0,l.kt)("del",null,"\u4f7f\u7528\u8be5\u65b9\u6cd5\u83b7\u53d6\u539f\u59cb\u7c7b\u578b\u6216\u7b80\u5355\u6570\u636e\u7c7b\u578b\u53c2\u6570\u65f6\u9700\u8981\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"value"),"\u6216",(0,l.kt)("inlineCode",{parentName:"p"},"_parameter"),"\u4f5c\u4e3a\u53c2\u6570\u540d\uff0c\u4e0d\u80fd\u968f\u610f\u547d\u540d\u3002\u4e0d\u7136\u4f1a\u5f53\u505a\u901a\u7528\u5bf9\u8c61\u5904\u7406\uff0c\u901a\u8fc7\u5bf9\u5e94\u7684 getter \u65b9\u6cd5\u83b7\u53d6\u5c5e\u6027\u503c\u3002"),"Mybatis 3.5 \u7248\u672c\u4e4b\u540e\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"${}"),"\u83b7\u53d6\u5b57\u9762\u91cf\u53d8\u91cf\u7684\u65f6\u5019\u53ef\u4ee5\u968f\u610f\u547d\u540d\u3002"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5f53\u4f20\u5165\u53c2\u6570\u4e3a\u5355\u4e2a\u539f\u59cb\u7c7b\u578b\u6216\u7b80\u5355\u6570\u636e\u7c7b\u578b\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"#{}"),"\u53ef\u4ee5\u968f\u610f\u547d\u540d\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u5f53\u4f20\u5165\u5355\u4e2a JavaBean \u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"#{}"),"\u548c",(0,l.kt)("inlineCode",{parentName:"li"},"${}"),"\u90fd\u53ef\u4ee5\u901a\u8fc7\u5c5e\u6027\u540d\u83b7\u53d6\u5c5e\u6027\uff0c\u4f7f\u7528\u7684\u662f getter \u65b9\u6cd5\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u5f53\u4f20\u5165\u591a\u4e2a\u53c2\u6570\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"#{}"),"\u53ef\u4ee5\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"arg0"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"arg1"),"\u6216",(0,l.kt)("inlineCode",{parentName:"li"},"param1"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"param2"),"\u8fd9\u6837\u7684\u547d\u540d\uff1b",(0,l.kt)("inlineCode",{parentName:"li"},"${}"),"\u53ea\u80fd\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"param1"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"param2"),"\u8fd9\u6837\u7684\u547d\u540d\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u624b\u52a8\u4f20\u5165",(0,l.kt)("inlineCode",{parentName:"li"},"Map<String, Object>"),"\uff0c\u7136\u540e\u76f4\u63a5\u901a\u8fc7\u952e\u540d\u6765\u83b7\u53d6\u53c2\u6570\u503c\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u53ef\u4ee5\u5728\u53c2\u6570\u4e0a\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"@Param"),"\u6ce8\u89e3\uff0c\u624b\u52a8\u6307\u5b9a\u8be5\u53c2\u6570\u7684\u540d\u5b57\uff0c\u7136\u540e\u901a\u8fc7\u6b64\u540d\u5b57\u83b7\u53d6\u5bf9\u5e94\u503c\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u5f53\u4f20\u5165\u7684\u53c2\u6570\u7c7b\u578b\u4e3a List \u65f6\uff0c\u5219\u5b83\u5bf9\u5e94\u7684\u952e\u503c\u5c31\u53eb",(0,l.kt)("inlineCode",{parentName:"li"},"list"),"\uff0cArray \u5bf9\u5e94",(0,l.kt)("inlineCode",{parentName:"li"},"array"),"\u3002")),(0,l.kt)("h3",{id:"\u83b7\u53d6\u81ea\u52a8\u751f\u6210\u7684\u4e3b\u952e"},"\u83b7\u53d6\u81ea\u52a8\u751f\u6210\u7684\u4e3b\u952e"),(0,l.kt)("p",null,"\u8bbe\u7f6e\u4e0b\u9762\u4e24\u4e2a\u5c5e\u6027\u6765\u83b7\u53d6\u81ea\u52a8\u751f\u6210\u7684\u4e3b\u952e\uff0c\u5728\u63d2\u5165\u5b8c\u6210\u4e4b\u540e\u4e3b\u952e\u503c\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u5230\u5b9e\u4f53\u7c7b\u7684\u5bf9\u5e94\u5c5e\u6027\u4e0a\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"useGeneratedKeys")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"keyProperty"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<insert id="insert" useGeneratedKeys="true" keyProperty="id">\n    insert\n    ignore into t_user (username, passcode, age, gender, email)\n    values (\n    #{username},\n    #{passcode},\n    #{age},\n    #{gender},\n    #{email}\n    );\n</insert>\n')),(0,l.kt)("h3",{id:"parametertype"},"parameterType"),(0,l.kt)("p",null,"\u53ef\u4ee5\u4e0d\u7528\u5199\uff0cMybatis \u4f1a\u81ea\u52a8\u8fdb\u884c\u7c7b\u578b\u63a8\u65ad\u3002"),(0,l.kt)("h3",{id:"resulttype"},"resultType"),(0,l.kt)("p",null,"\u671f\u671b\u4ece\u8fd9\u6761\u8bed\u53e5\u4e2d\u8fd4\u56de\u7ed3\u679c\u7684\u7c7b\u5168\u9650\u5b9a\u540d\u6216\u522b\u540d\u3002\u5982\u679c\u8fd4\u56de\u7684\u662f\u96c6\u5408\uff0c\u90a3\u5e94\u8be5\u8bbe\u7f6e\u4e3a\u96c6\u5408\u5305\u542b\u7684\u7c7b\u578b\uff0c\u800c\u4e0d\u662f\u96c6\u5408\u672c\u8eab\u7684\u7c7b\u578b\u3002"),(0,l.kt)("h3",{id:"resultmap"},"resultMap"),(0,l.kt)("p",null,"\u5904\u7406\u5b9e\u4f53\u7c7b\u5c5e\u6027\u548c\u6570\u636e\u5e93\u5b57\u6bb5\u7684\u6620\u5c04\u5173\u7cfb\u3002"),(0,l.kt)("h3",{id:"sql"},"sql"),(0,l.kt)("p",null,"\u53ef\u91cd\u7528 SQL \u8bed\u53e5\u6bb5\uff0c\u5b9a\u4e49\u540e\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"include")," \u6807\u7b7e\u5f15\u5165\u3002"),(0,l.kt)("h2",{id:"\u63a5\u53e3\u7f16\u5199"},"\u63a5\u53e3\u7f16\u5199"),(0,l.kt)("h3",{id:"\u65b9\u6cd5\u8fd4\u56de\u503c"},"\u65b9\u6cd5\u8fd4\u56de\u503c"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5b57\u9762\u91cf\u7c7b\u578b"),(0,l.kt)("li",{parentName:"ol"},"Java Bean"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"List"),"\u3001",(0,l.kt)("inlineCode",{parentName:"li"},"Map"))),(0,l.kt)("p",null,"\u5f53\u67e5\u8be2\u591a\u6761\u7ed3\u679c\u653e\u5165 Map \u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"List<Map<String, Object>>")," \u58f0\u660e\u8fd4\u56de\u503c\u7c7b\u578b\uff1b\u6216\u8005\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"Map<String, Object>"),"\u5e76\u914d\u5408",(0,l.kt)("inlineCode",{parentName:"p"},'@MapKey("id")'),"\u6ce8\u89e3\u3002\u524d\u8005\u662f List \u4e2d\u653e Map\uff0c\u540e\u8005\u662f Map \u4e2d\u653e Map\u3002"),(0,l.kt)("h3",{id:"\u6a21\u7cca\u67e5\u8be2"},"\u6a21\u7cca\u67e5\u8be2"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"LIKE '%${param1}%'"),"\uff0c\u6709 SQL \u6ce8\u5165\u98ce\u9669\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"LIKE CONCAT('%', '${param1}', '%')"),"\uff0c\u7d22\u5f15\u5931\u6548\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"LIKE #{param1}"),"\uff0c\u5728\u4f20\u9012\u53c2\u6570\u7684\u65f6\u5019\u81ea\u5df1\u624b\u52a8\u62fc\u63a5\u901a\u914d\u7b26\u3002")),(0,l.kt)("h3",{id:"\u5b57\u6bb5\u548c\u5c5e\u6027\u6620\u5c04"},"\u5b57\u6bb5\u548c\u5c5e\u6027\u6620\u5c04"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5728 SQL \u8bed\u53e5\u4e2d\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"as"),"\u6765\u7ed9\u5b57\u6bb5\u8d77\u522b\u540d\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u914d\u7f6e",(0,l.kt)("inlineCode",{parentName:"li"},"mapUnderscoreToCamelCase"),"\u4e3a",(0,l.kt)("inlineCode",{parentName:"li"},"true"),"\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"resultMap"),"\u624b\u52a8\u58f0\u660e\u6620\u5c04\u5173\u7cfb\u3002")),(0,l.kt)("h3",{id:"\u5ef6\u8fdf\u52a0\u8f7d"},"\u5ef6\u8fdf\u52a0\u8f7d"),(0,l.kt)("p",null,"\u5728\u5904\u7406\u4e00\u5bf9\u4e00\u3001\u4e00\u5bf9\u591a\u5173\u7cfb\u6620\u5c04\u65f6\uff0c\u53ef\u4ee5\u5ef6\u8fdf\u52a0\u8f7d\u6570\u636e\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"lazyLoadingEnabled"),"\uff0c\u662f\u5426\u5f00\u542f\u5ef6\u8fdf\u52a0\u8f7d\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"aggressiveLazyLoading"),"\uff0c\u662f\u5426\u5f00\u542f\u4fb5\u7565\u6027\u7684\u5ef6\u8fdf\u52a0\u8f7d\uff0c\u5982\u679c",(0,l.kt)("inlineCode",{parentName:"li"},"true"),"\u5219\u4efb\u610f\u65b9\u6cd5\u7684\u8c03\u7528\u90fd\u4f1a\u89e6\u53d1\u5ef6\u8fdf\u52a0\u8f7d\uff1b\u5982\u679c",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"\u5219\u53c2\u8003",(0,l.kt)("inlineCode",{parentName:"li"},"lazyLoadTriggerMethods"),"\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"lazyLoadTriggerMethods"),"\uff0c\u53ef\u4ee5\u63a7\u5236\u54ea\u4e9b\u65b9\u6cd5\u88ab\u8c03\u7528\u53ef\u4ee5\u89e6\u53d1\u5ef6\u8fdf\u52a0\u8f7d\uff0c\u9ed8\u8ba4\u6709",(0,l.kt)("inlineCode",{parentName:"li"},"equals,clone,hashCode,toString"),"\u3002")),(0,l.kt)("p",null,"\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e\u5373\u53ef\u5168\u5c40\u5f00\u673a\u5ef6\u8fdf\u52a0\u8f7d\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<settings>\n    <setting name="lazyLoadingEnabled" value="true"/>\n    <setting name="aggressiveLazyLoading" value="false"/>\n</settings>\n')),(0,l.kt)("p",null,"\u5728\u6620\u5c04\u6587\u4ef6\u4e2d\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"fetchType"),"\u5c5e\u6027\u5355\u72ec\u914d\u7f6e\u67d0\u6761 SQL \u8bed\u53e5\u662f\u5426\u5f00\u542f\u5ef6\u8fdf\u52a0\u8f7d\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"lazy"),"\uff0c\u5ef6\u8fdf\u52a0\u8f7d"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"eager"),"\uff0c\u7acb\u5373\u52a0\u8f7d")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<resultMap id="" type="">\n    <association property="" select="" fetchType="eager">\n\n    </association>\n</resultMap>\n')),(0,l.kt)("h2",{id:"\u52a8\u6001-sql"},"\u52a8\u6001 SQL"),(0,l.kt)("h3",{id:"if"},"if"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<select id="findByCondition" resultType="user">\n    select * from user\n    <where>\n        <if test="id!=null">\n            and id = #{id}\n        </if>\n        <if test="username!=null">\n            and username = #{username}\n        </if>\n        <if test="password!=null">\n            and password = #{password}\n        </if>\n    </where>\n</select>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'@Test\npublic void findByCondition() {\n    User condition = new User();\n    condition.setUsername("Roddy");\n    condition.setPassword("Whoever");\n\n    List<User> users = userMapper.findByCondition(condition);\n    Assert.assertNotEquals(0, users.size());\n\n    for (User user : users) {\n        log.info(user.toString());\n    }\n}\n')),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u5c5e\u6027\u503c\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"null"),"\uff0cif \u5206\u652f\u4e0d\u751f\u6548\uff1b"),(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u4f20\u5165\u7684 User \u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"null"),"\uff0c\u6240\u6709\u5206\u652f\u90fd\u4e0d\u751f\u6548\uff0c\u5c31\u4f1a\u67e5\u8be2\u6240\u6709\u3002")),(0,l.kt)("h3",{id:"where"},"where"),(0,l.kt)("p",null,"\u6839\u636e\u6761\u4ef6\u5224\u65ad\u662f\u5426\u52a0",(0,l.kt)("inlineCode",{parentName:"p"},"where"),"\uff0c\u5e76\u4e14\u53bb\u6389\u591a\u4f59\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"and"),"\u6216\u8005",(0,l.kt)("inlineCode",{parentName:"p"},"or"),"\u3002"),(0,l.kt)("h3",{id:"set"},"set"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<update id="updateAuthorIfNecessary">\n  update Author\n    <set>\n      <if test="username != null">username=#{username},</if>\n      <if test="password != null">password=#{password},</if>\n      <if test="email != null">email=#{email},</if>\n      <if test="bio != null">bio=#{bio}</if>\n    </set>\n  where id=#{id}\n</update>\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"set"),"\u5143\u7d20\u4f1a\u52a8\u6001\u5730\u5728\u884c\u9996\u63d2\u5165 SET \u5173\u952e\u5b57\uff0c\u5e76\u4f1a\u5220\u6389\u989d\u5916\u7684\u9017\u53f7\uff08\u8fd9\u4e9b\u9017\u53f7\u662f\u5728\u4f7f\u7528\u6761\u4ef6\u8bed\u53e5\u7ed9\u5217\u8d4b\u503c\u65f6\u5f15\u5165\u7684\uff09\u3002"),(0,l.kt)("h3",{id:"trim"},"trim"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<trim prefix="WHERE" prefixOverrides="AND |OR ">\n  ...\n</trim>\n<trim prefix="SET" suffixOverrides=",">\n  ...\n</trim>\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"prefixOverrides"),"\u5c5e\u6027\u4f1a\u5ffd\u7565\u901a\u8fc7\u7ba1\u9053\u7b26\u5206\u9694\u7684\u6587\u672c\u5e8f\u5217\uff08\u6ce8\u610f\u6b64\u4f8b\u4e2d\u7684\u7a7a\u683c\u662f\u5fc5\u8981\u7684\uff09\u3002\u4e0a\u8ff0\u4f8b\u5b50\u4f1a\u79fb\u9664\u6240\u6709",(0,l.kt)("inlineCode",{parentName:"p"},"prefixOverrides"),"\u5c5e\u6027\u4e2d\u6307\u5b9a\u7684\u5185\u5bb9\uff0c\u5e76\u4e14\u63d2\u5165 ",(0,l.kt)("em",{parentName:"p"},"prefix")," \u5c5e\u6027\u4e2d\u6307\u5b9a\u7684\u5185\u5bb9\u3002"),(0,l.kt)("h3",{id:"choose"},"choose"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<select id="findActiveBlogLike"\n     resultType="Blog">\n  SELECT * FROM BLOG WHERE state = \u2018ACTIVE\u2019\n  <choose>\n    <when test="title != null">\n      AND title like #{title}\n    </when>\n    <when test="author != null and author.name != null">\n      AND author_name like #{author.name}\n    </when>\n    <otherwise>\n      AND featured = 1\n    </otherwise>\n  </choose>\n</select>\n')),(0,l.kt)("h3",{id:"foreach"},"foreach"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<select id="findByIds" parameterType="list" resultType="user">\n    select * from user\n    <where>\n        <foreach collection="list" item="id" open="id in (" close=")" separator=", ">\n            #{id}\n        </foreach>\n    </where>\n</select>\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"@Test\npublic void findByIds() {\n    List<User> users = userMapper.findByIds(Arrays.asList(2, 3));\n    Assert.assertNotEquals(0, users.size());\n\n    for (User user : users) {\n        log.info(user.toString());\n    }\n}\n")),(0,l.kt)("h2",{id:"\u591a\u8868\u64cd\u4f5c"},"\u591a\u8868\u64cd\u4f5c"),(0,l.kt)("h3",{id:"\u4e00\u5bf9\u4e00-xml-\u67e5\u8be2"},"\u4e00\u5bf9\u4e00 XML \u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public class Article {\n\n    private Integer id;\n\n    private String content;\n\n    private Date createdAt;\n\n    private Date updatedAt;\n\n    private User user;\n\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<sql id="selectArticle">\n    select *, a.id as aid, u.id as uid\n    from article as a\n    join user as u on a.user_id = u.id\n</sql>\n\n<resultMap id="articleMap" type="article">\n    <id column="aid" property="id"/>\n    <result column="content" property="content"/>\n    <result column="created_at" property="createdAt"/>\n    <result column="updated_at" property="updatedAt"/>\n    \x3c!--        <result column="uid" property="user.id"/>--\x3e\n    \x3c!--        <result column="username" property="user.username"/>--\x3e\n    \x3c!--        <result column="password" property="user.password"/>--\x3e\n    <association property="user" javaType="user">\n        <id column="uid" property="id"/>\n        <result column="username" property="username"/>\n        <result column="password" property="password"/>\n    </association>\n</resultMap>\n\n<select id="findAll" resultMap="articleMap">\n    <include refid="selectArticle"/>\n</select>\n')),(0,l.kt)("h3",{id:"\u4e00\u5bf9\u591a-xml-\u67e5\u8be2"},"\u4e00\u5bf9\u591a XML \u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},"public class User {\n\n    private Integer id;\n\n    private String username;\n\n    private String password;\n\n    private List<Article> articles;\n\n}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<sql id="selectUser">\n    select *, u.id uid, a.id aid\n    from user u\n    left join article a on u.id = a.user_id\n</sql>\n\n<resultMap id="userMap" type="user">\n    <id column="uid" property="id"/>\n    <result column="username" property="username"/>\n    <result column="password" property="password"/>\n    <collection property="articles" ofType="article">\n        <id column="aid" property="id"/>\n        <result column="content" property="content"/>\n        <result column="created_at" property="createdAt"/>\n        <result column="updated_at" property="updatedAt"/>\n    </collection>\n</resultMap>\n\n<select id="findAll" resultMap="userMap">\n    <include refid="selectUser"/>\n</select>\n')),(0,l.kt)("h3",{id:"\u5206\u6b65\u67e5\u8be2"},"\u5206\u6b65\u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<resultMap id="articleMap" type="article">\n    <id column="aid" property="id"/>\n    <result column="content" property="content"/>\n    <result column="created_at" property="createdAt"/>\n    <result column="updated_at" property="updatedAt"/>\n    <association property="user" select="me.iuok.UserMapper.selectUserById" column="user_id"/>\n</resultMap>\n')),(0,l.kt)("p",null,"\u5982\u679c\u5728\u5168\u5c40\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"lazyLoadingEnabled"),"\u5c31\u53ef\u4ee5\u5f00\u542f\u5173\u8054\u5bf9\u8c61\u7684\u61d2\u52a0\u8f7d\u3002"),(0,l.kt)("h2",{id:"\u7f13\u5b58"},"\u7f13\u5b58"),(0,l.kt)("h3",{id:"\u4e00\u7ea7\u7f13\u5b58"},"\u4e00\u7ea7\u7f13\u5b58"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e00\u7ea7\u7f13\u5b58\u9ed8\u8ba4\u5f00\u542f"),(0,l.kt)("li",{parentName:"ul"},"\u4e0d\u540c\u7684",(0,l.kt)("inlineCode",{parentName:"li"},"SqlSession"),"\u6709\u4e0d\u540c\u7f13\u5b58"),(0,l.kt)("li",{parentName:"ul"},"\u540c\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"li"},"SqlSession"),"\u67e5\u8be2\u6761\u4ef6\u4e0d\u540c"),(0,l.kt)("li",{parentName:"ul"},"\u540c\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"li"},"SqlSession"),"\u4e24\u6b21\u67e5\u8be2\u671f\u95f4\u6267\u884c\u4e86\u589e\u5220\u6539\u64cd\u4f5c"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"sqlSession.clearCache()"),"\u624b\u52a8\u6e05\u7a7a\u7f13\u5b58")),(0,l.kt)("h3",{id:"\u4e8c\u7ea7\u7f13\u5b58"},"\u4e8c\u7ea7\u7f13\u5b58"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4e8c\u7ea7\u7f13\u5b58\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"SqlSessionFactory"),"\u7ea7\u522b\u7684"),(0,l.kt)("li",{parentName:"ul"},"\u8981\u6c42 POJO \u5b9e\u73b0",(0,l.kt)("inlineCode",{parentName:"li"},"Serializable"),"\u63a5\u53e3"),(0,l.kt)("li",{parentName:"ul"},"\u4e8c\u7ea7\u7f13\u5b58\u5728",(0,l.kt)("inlineCode",{parentName:"li"},"SqlSession"),"\u5173\u95ed\u6216\u63d0\u4ea4\u540e\u624d\u4f1a\u751f\u6548"),(0,l.kt)("li",{parentName:"ul"},"\u5728\u6620\u5c04\u6587\u4ef6\u4e2d\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"li"},"<cache />"),"\u914d\u7f6e"),(0,l.kt)("li",{parentName:"ul"},"\u6620\u5c04\u6587\u4ef6\u4e2d\u7684\u6240\u6709 select \u8bed\u53e5\u7684\u7ed3\u679c\u5c06\u4f1a\u88ab\u7f13\u5b58"),(0,l.kt)("li",{parentName:"ul"},"\u6620\u5c04\u6587\u4ef6\u4e2d\u7684\u6240\u6709 insert\u3001update \u548c delete \u8bed\u53e5\u4f1a\u5237\u65b0\u6240\u6709\u7f13\u5b58\uff0c\u5305\u62ec\u4e00\u7ea7\u7f13\u5b58\u548c\u4e8c\u7ea7\u7f13\u5b58")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"<cache />\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<cache\n  eviction="FIFO"\n  flushInterval="60000"\n  size="512"\n  readOnly="true"/>\n')),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"eviction"),"\uff0c\u6dd8\u6c70\u7b56\u7565\uff0c\u9ed8\u8ba4\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"LRU"),"\uff1b"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"flushInterval"),"\uff0c\u5237\u65b0\u95f4\u9694\uff0c\u5355\u4f4d\u662f\u6beb\u79d2\uff0c\u9ed8\u8ba4\u4e0d\u81ea\u52a8\u5237\u65b0\uff0c\u53ea\u5728\u6267\u884c\u589e\u5220\u6539\u8bed\u53e5\u7684\u65f6\u5019\u5237\u65b0\uff1b"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"size"),"\uff0c\u7f13\u5b58\u5f15\u7528\u6570\u76ee\uff0c\u9ed8\u8ba4\u662f 1024\uff1b"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"readOnly"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"true"),"\u5219\u5728\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u5bf9\u8c61\u7684\u65f6\u5019\u8fd4\u56de\u540c\u4e00\u4e2a\u5bf9\u8c61\u7684\u5f15\u7528\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"\u5219\u6bcf\u6b21\u90fd\u8fd4\u56de\u4e00\u4e2a\u7f13\u5b58\u5bf9\u8c61\u7684\u6df1\u62f7\u8d1d\u3002\u9ed8\u8ba4\u503c\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"false"),"\u3002")),(0,l.kt)("h3",{id:"\u7f13\u5b58\u67e5\u8be2\u987a\u5e8f"},"\u7f13\u5b58\u67e5\u8be2\u987a\u5e8f"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"\u5148\u67e5\u8be2\u4e8c\u7ea7\u7f13\u5b58"),(0,l.kt)("li",{parentName:"ol"},"\u5982\u679c\u4e8c\u7ea7\u7f13\u5b58\u4e2d\u6ca1\u6709\uff0c\u5219\u67e5\u8be2\u4e00\u7ea7\u7f13\u5b58")),(0,l.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u7f13\u5b58\u5b9e\u73b0"},"\u81ea\u5b9a\u4e49\u7f13\u5b58\u5b9e\u73b0"),(0,l.kt)("p",null,"\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0",(0,l.kt)("inlineCode",{parentName:"p"},"org.apache.ibatis.cache.Cache"),"\u63a5\u53e3\u6765\u81ea\u5b9a\u4e49\u4e8c\u7ea7\u7f13\u5b58\u5b9e\u73b0\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<cache type="org.mybatis.caches.ehcache.EhcacheCache"/>\n')),(0,l.kt)("h2",{id:"\u6ce8\u89e3\u5f00\u53d1"},"\u6ce8\u89e3\u5f00\u53d1"),(0,l.kt)("h3",{id:"\u57fa\u672c\u67e5\u8be2"},"\u57fa\u672c\u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public interface UserMapper {\n\n    @Select("select * from user")\n    List<User> findAll();\n\n    @Select("select * from user where id = #{id}")\n    User findById(int id);\n\n    @Insert("insert into user (username, password) values (#{username}, #{password})")\n    int save(User user);\n\n    @Update("update user set username = #{username}, password = #{password} where id = #{id}")\n    int update(User user);\n\n    @Delete("delete from user where id = #{id}")\n    int deleteById(int id);\n\n}\n')),(0,l.kt)("h3",{id:"\u590d\u6742\u67e5\u8be2"},"\u590d\u6742\u67e5\u8be2"),(0,l.kt)("h4",{id:"\u4e00\u5bf9\u4e00\u6ce8\u89e3\u67e5\u8be2"},"\u4e00\u5bf9\u4e00\u6ce8\u89e3\u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public interface ArticleMapper {\n\n    @Select("select *, a.id as aid, u.id as uid from article as a join user as u on a.user_id = u.id")\n    @Results({\n            @Result(column = "aid", property = "id"),\n            @Result(column = "content", property = "content"),\n            @Result(column = "created_at", property = "createdAt"),\n            @Result(column = "updated_at", property = "updatedAt"),\n            @Result(column = "uid", property = "user.id"),\n            @Result(column = "username", property = "user.username"),\n            @Result(column = "password", property = "user.password")\n    })\n    List<Article> findAll();\n\n    @Select("select * from article")\n    @Results({\n            @Result(column = "aid", property = "id"),\n            @Result(column = "content", property = "content"),\n            @Result(column = "created_at", property = "createdAt"),\n            @Result(column = "updated_at", property = "updatedAt"),\n            @Result(column = "user_id",\n                    property = "user",\n                    javaType = User.class,\n                    one = @One(select = "me.iuok.mapper.UserMapper.findById"))\n    })\n    List<Article> findAll2();\n}\n')),(0,l.kt)("h4",{id:"\u4e00\u5bf9\u591a\u6ce8\u89e3\u67e5\u8be2"},"\u4e00\u5bf9\u591a\u6ce8\u89e3\u67e5\u8be2"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public interface ArticleMapper {\n    @Select("select * from article where user_id = #{id}")\n    List<Article> findByUserId(int id);\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-java"},'public interface UserMapper {\n    @Select("select * from user")\n    @Results({\n            @Result(column = "id", property = "id", id = true),\n            @Result(column = "username", property = "username"),\n            @Result(column = "password", property = "password"),\n            @Result(column = "id",\n                    property = "articles",\n                    javaType = List.class,\n                    many = @Many(select = "me.iuok.mapper.ArticleMapper.findByUserId")\n            )\n    })\n    List<User> findAll();\n}\n')),(0,l.kt)("h2",{id:"mybatis-generator"},"MyBatis Generator"),(0,l.kt)("p",null,"\u6839\u636e\u6570\u636e\u8868\u7ed3\u6784\u81ea\u52a8\u751f\u6210\u5b9e\u4f53\u7c7b\u3001\u63a5\u53e3\u548c Mapper \u6587\u4ef6\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"pom.xml"),"\u6587\u4ef6\u4e2d\u52a0\u5165",(0,l.kt)("inlineCode",{parentName:"p"},"mybatis-generator-maven-plugin"),"\u63d2\u4ef6\u3002"),(0,l.kt)("p",null,"\u914d\u7f6e\u6587\u4ef6\u547d\u540d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"generatorConfig.xml"),"\uff0c\u653e\u5165\u8d44\u6e90\u6587\u4ef6\u5939\u3002\u4e4b\u540e\u6267\u884c Maven \u63d2\u4ef6\u7684\u547d\u4ee4\u5373\u53ef\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},"    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.mybatis.generator</groupId>\n                <artifactId>mybatis-generator-maven-plugin</artifactId>\n                <version>1.4.1</version>\n                <dependencies>\n                    \x3c!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --\x3e\n                    <dependency>\n                        <groupId>mysql</groupId>\n                        <artifactId>mysql-connector-java</artifactId>\n                        <version>8.0.29</version>\n                    </dependency>\n                </dependencies>\n            </plugin>\n        </plugins>\n    </build>\n")),(0,l.kt)("h3",{id:"mybatis3simple"},"MyBatis3Simple"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u65b9\u6848\u751f\u6210\u7684 Mapper \u4e2d\u53ea\u6709\u7b80\u5355\u7684\u589e\u5220\u6539\u67e5\u529f\u80fd\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<!DOCTYPE generatorConfiguration PUBLIC\n        "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"\n        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">\n<generatorConfiguration>\n    <context id="simple" targetRuntime="MyBatis3Simple">\n        <jdbcConnection driverClass="com.mysql.cj.jdbc.Driver"\n                        connectionURL="jdbc:mysql:///ssm"\n                        userId="root"\n                        password="root"/>\n\n        <javaModelGenerator targetPackage="o.e.model" targetProject="src/main/java"/>\n\n        <sqlMapGenerator targetPackage="o.e.mapper"\n                         targetProject="src/main/resources">\n        </sqlMapGenerator>\n\n        <javaClientGenerator type="XMLMAPPER" targetPackage="o.e.mapper" targetProject="src/main/java"/>\n\n        <table tableName="t_user"/>\n    </context>\n</generatorConfiguration>\n')),(0,l.kt)("h3",{id:"mybatis3"},"MyBatis3"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u65b9\u6848\u751f\u6210\u7684 Mapper \u66f4\u590d\u6742\uff0c\u9664\u4e86\u5b9e\u4f53\u7c7b\u4e4b\u5916\uff0c\u8fd8\u4f1a\u751f\u6210 Example \u7c7b\uff0c\u53ef\u4ee5\u5b8c\u6210\u51e0\u4e4e\u6240\u6709\u7684\u5355\u8868\u64cd\u4f5c\u3002"),(0,l.kt)("p",null,"\u914d\u7f6e\u5185\u5bb9\u9664\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"targetRuntime"),"\u4e0d\u4e00\u6837\u4e4b\u5916\uff0c\u5176\u5b83\u5185\u5bb9\u6ca1\u53d8\u5316\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-xml"},'<!DOCTYPE generatorConfiguration PUBLIC\n        "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"\n        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd">\n<generatorConfiguration>\n    <context id="simple" targetRuntime="MyBatis3">\n        <jdbcConnection driverClass="com.mysql.cj.jdbc.Driver"\n                        connectionURL="jdbc:mysql:///ssm"\n                        userId="root"\n                        password="root"/>\n</generatorConfiguration>\n')))}c.isMDXComponent=!0}}]);