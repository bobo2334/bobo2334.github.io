"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1477],{10:function(n){n.exports=JSON.parse('{"blogPosts":[{"id":"/install-synology-dsm-in-proxmox-ve","metadata":{"permalink":"/blog/install-synology-dsm-in-proxmox-ve","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/install-synology-dsm-in-proxmox-ve.md","source":"@site/blog/install-synology-dsm-in-proxmox-ve.md","title":"\u5728 Proxmox VE \u4e2d\u5b89\u88c5\u7fa4\u6656 DSM","description":"\u524d\u8a00","date":"2022-06-18T00:00:00.000Z","formattedDate":"2022\u5e746\u670818\u65e5","tags":[{"label":"proxmox ve","permalink":"/blog/tags/proxmox-ve"},{"label":"synology","permalink":"/blog/tags/synology"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-06-18T00:00:00.000Z","tags":["proxmox ve","synology"]},"nextItem":{"title":"\u4f7f\u7528 s3fs \u6302\u8f7d\u817e\u8baf\u4e91 COS \u4e2d\u7684\u5185\u5bb9","permalink":"/blog/mount-tencent-cos-using-s3fs"}},"content":"## \u524d\u8a00\\n\\n\u611f\u89c9\u6bd4\u5728 ESXi \u4e2d\u5b89\u88c5\u8981\u7b80\u5355\u4e0d\u5c11\u3002\u672c\u6587\u4e2d\u4f7f\u7528 DS918+ \u578b\u53f7\u5f15\u5bfc\u548c\u7cfb\u7edf\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u6587\u4e2d\u4ece\u4e92\u8054\u7f51\u4e0a\u4e0b\u8f7d\u7684\u6587\u4ef6\u5907\u4efd\\n\\n\u6587\u4e2d\u6709\u4e00\u4e9b\u6587\u4ef6\u662f\u4ece\u4e92\u8054\u7f51\u4e0a\u4e0b\u8f7d\u7684\uff0c\u4e3a\u4e86\u9632\u6b62\u5176\u4e2d\u7684\u67d0\u4e9b\u8d44\u6e90\u5728\u67d0\u4e9b\u65f6\u523b\u65f6\u6548\uff0c\u8fd9\u91cc\u505a\u4e00\u4e2a[\u5907\u4efd](https://zfile.iuok.me/1/main/articles/install-synology-dsm-in-proxmox-ve)\u3002\\n\\n## \u4e0b\u8f7d\u5f15\u5bfc\\n\\n\u5728 *XPEnology Community[^1]* \u4e0b\u8f7d DS918+ v1.04b \u5f15\u5bfc\u6587\u4ef6\uff0c\u5f97\u5230`synoboot.img`\u3002\\n\\n![image-20220618113024071](install-synology-dsm-in-proxmox-ve.assets/image-20220618113024071.png)\\n\\n## \u4e0b\u8f7d\u7cfb\u7edf\\n\\nv1.04b \u652f\u6301 DSM 6.2 \u6216 6.2.1 \u7cfb\u7edf\uff0c\u53bb *\u7fa4\u6656\u7f51\u7ad9 [^2]* \u4e0b\u8f7d\u7cfb\u7edf\uff1b\u9996\u5148\u9009\u62e9\u7cfb\u7edf\u7248\u672c\uff0c\u8fd9\u91cc\u9009\u62e9 6.2.1 \u7684\u7b2c\u4e00\u4e2a\u7248\u672c `6.2.1-23824`\uff0c\u5f97\u5230`DSM_DS918+_23739.pat`\u3002\\n\\n![image-20220618201311930](install-synology-dsm-in-proxmox-ve.assets/image-20220618201311930.png)\\n\\n![image-20220618201409606](install-synology-dsm-in-proxmox-ve.assets/image-20220618201409606.png)\\n\\n## \u521b\u5efa\u865a\u62df\u673a\\n\\n\u5728 PVE \u7684 Web \u63a7\u5236\u53f0\u4e2d\u521b\u5efa\u865a\u62df\u673a\u3002\\n\\n1. \u5e38\u89c4\u3002\u9700\u8981\u6ce8\u610f\u4e00\u4e0b VM ID\uff0c\u540e\u9762\u5bfc\u5165\u5f15\u5bfc\u78c1\u76d8\u7684\u65f6\u5019\u7528\u7684\u5230\uff1b\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-11_45_57](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-11_45_57.png)\\n\\n2. \u64cd\u4f5c\u7cfb\u7edf\u3002\u4e0d\u4f7f\u7528\u4efb\u4f55\u4ecb\u8d28\uff1b\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-11_46_38](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-11_46_38.png)\\n\\n3. \u7cfb\u7edf\u3002\u6ca1\u4ec0\u4e48\u9700\u8981\u66f4\u6539\u7684\uff0c\u4fdd\u6301\u9ed8\u8ba4\u8bbe\u7f6e\u5373\u53ef\uff1b\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-11_47_25](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-11_47_25.png)\\n\\n4. \u78c1\u76d8\u3002\u5220\u9664\u9ed8\u8ba4\u7684\u78c1\u76d8\uff1b\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-11_47_47](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-11_47_47.png)\\n\\n5. CPU\u3002\u6839\u636e\u9700\u8981\u8bbe\u7f6e\uff1b\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-11_48_11](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-11_48_11.png)\\n\\n6. \u5185\u5b58\u3002\u6839\u636e\u9700\u8981\u8bbe\u7f6e\uff1b\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-11_48_22](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-11_48_22.png)\\n\\n7. \u7f51\u7edc\u3002\u7f51\u5361\u6a21\u578b\u9009\u62e9 E1000\uff0c\u53d6\u6d88\u52fe\u9009\u9632\u706b\u5899\uff1b\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-11_48_37](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-11_48_37.png)\\n\\n8. \u786e\u8ba4\uff1b\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-11_48_56](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-11_48_56.png)\\n\\n9. \u5220\u9664 CD/DVD \u9a71\u52a8\u5668\uff1b\\n\\n![image-20220618182642048](install-synology-dsm-in-proxmox-ve.assets/image-20220618182642048.png)\\n\\n10. \u6dfb\u52a0\u4e00\u4e2a\u4e32\u884c\u7aef\u53e3\uff0c\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u4e0a\u770b\u5230\u5f15\u5bfc\u65e5\u5fd7\uff0c\u5bf9\u4e8e\u6392\u67e5\u9519\u8bef\u5f88\u6709\u5e2e\u52a9\u3002\\n\\n![image-20220618194623034](install-synology-dsm-in-proxmox-ve.assets/image-20220618194623034.png)\\n\\n## \u5bfc\u5165\u5f15\u5bfc\u78c1\u76d8\\n\\n`img`\u683c\u5f0f\u7684\u955c\u50cf\u662f\u4e0d\u80fd\u76f4\u63a5\u4f5c\u4e3a\u78c1\u76d8\u4f7f\u7528\u7684\uff0c\u9700\u8981\u4f60\u624b\u52a8\u628a\u5b83\u8f6c\u6362\u4e3a`qcow2`\u683c\u5f0f\u5e76\u5bfc\u5165\u5230\u865a\u62df\u673a\u4e2d\u3002\\n\\n\u9996\u5148\u9700\u8981\u4e0a\u4f20`synoboot.img`\u5230 PVE \u4e3b\u673a\u5185\uff0c\u53ef\u4ee5\u901a\u8fc7 SFTP \u4e0a\u4f20\uff0c\u5b58\u653e\u4f4d\u7f6e\u6ca1\u6709\u8981\u6c42\uff0c\u4e34\u65f6\u7528\u7528\uff0c\u7528\u5b8c\u53ef\u4ee5\u5728 PVE \u4e0a\u5220\u9664\u3002\\n\\n\u4f7f\u7528 SSH \u8fde\u63a5\u4e0a PVE \u4e3b\u673a\uff0c\u6267\u884c\u547d\u4ee4\u3002\\n\\n\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u8f6c\u6362\u78c1\u76d8\u683c\u5f0f\u3002\\n\\n```bash\\nqemu-img convert -f raw -O qcow2 synoboot.img synoboot.qcow2\\n```\\n\\n\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u5bfc\u5165\u78c1\u76d8\u3002\u5176\u4e2d`104`\u662f\u865a\u62df\u673a ID\uff0c`local-lvm`\u662f\u5b58\u50a8\u4f4d\u7f6e\u7684\u540d\u79f0\uff1b\u4f60\u53ef\u80fd\u8981\u6839\u636e\u4f60\u7684\u60c5\u51b5\u5bf9\u547d\u4ee4\u8fdb\u884c\u4e00\u4e9b\u4fee\u6539\u3002\\n\\n```bash\\nqm importdisk 104 synoboot.qcow2 local-lvm\\n```\\n\\n\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u53ef\u4ee5\u5728 PVE Web \u63a7\u5236\u53f0\u4e2d\u67e5\u770b\u5230\u4e00\u4e2a\u672a\u4f7f\u7528\u7684\u78c1\u76d8\u3002\\n\\n![image-20220618121759934](install-synology-dsm-in-proxmox-ve.assets/image-20220618121759934.png)\\n\\n\u53cc\u51fb\u8be5\u78c1\u76d8\u6216\u70b9\u51fb\u300c\u7f16\u8f91\u300d\u5373\u53ef\u6dfb\u52a0\u8fd9\u4e2a\u78c1\u76d8\u5230\u865a\u62df\u673a\u3002\u603b\u7ebf\u9009\u62e9 SATA\u3002\\n\\n![screenshot-192.168.10.200_8006-2022.06.18-12_19_03](install-synology-dsm-in-proxmox-ve.assets/screenshot-192.168.10.200_8006-2022.06.18-12_19_03.png)\\n\\n## \u786c\u76d8\u76f4\u901a\\n\\n\u8fd9\u91cc\u76f4\u63a5\u76f4\u901a SATA/SAS \u63a7\u5236\u5668\uff0c\u8981\u786e\u4fdd\u4f60\u7684 PVE \u64cd\u4f5c\u7cfb\u7edf\u6ca1\u6709\u5b89\u88c5\u5728\u8be5\u63a7\u5236\u5668\u4e0a\u7684\u786c\u76d8\u5185\uff0c\u4e0d\u7136\u4f1a\u5bfc\u81f4 PVE \u65e0\u6cd5\u6b63\u5e38\u542f\u52a8\u3002\\n\\n\u5982\u679c\u4f60\u6ca1\u6709\u5176\u4ed6\u786c\u76d8\u63a7\u5236\u5668\uff08\u5982 NVME\uff09\u7528\u6765\u5b89\u88c5 PVE \u7684\u8bdd\u5c31\u4e0d\u8981\u9009\u62e9\u76f4\u901a\u786c\u76d8\u63a7\u5236\u5668\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u5176\u4ed6\u65b9\u6cd5\u6765\u76f4\u901a\u786c\u76d8\u3002\\n\\n\u76f4\u901a\u786c\u76d8\u63a7\u5236\u5668\u7684\u4f18\u70b9\u662f DSM \u53ef\u4ee5\u8bfb\u53d6\u5230\u786c\u76d8\u7684 *S.M.A.R.T.[^3]* \u4fe1\u606f\u3002\\n\\n\u4f7f\u7528 SSH \u8fde\u63a5\u4e0a PVE \u4e3b\u673a\uff0c\u6267\u884c\u547d\u4ee4\u3002\\n\\n\u7f16\u8f91`/etc/default/grub`\u6587\u4ef6\u3002\\n\\n```bash\\nnano /etc/default/grub\\n```\\n\\n```ini\\n# \u5728\u91cc\u9762\u627e\u5230\\n# GRUB_CMDLINE_LINUX_DEFAULT=\\"quiet\\"\\n# \u5982\u679c\u662f intel cpu \u8bf7\u6539\u4e3a\\nGRUB_CMDLINE_LINUX_DEFAULT=\\"quiet intel_iommu=on iommu=pt\\"\\n# \u5982\u679c\u662f amd cpu \u8bf7\u6539\u4e3a\\nGRUB_CMDLINE_LINUX_DEFAULT=\\"quiet amd_iommu=on iommu=pt\\"\\n```\\n\\n\u66f4\u65b0 grub\u3002\\n\\n```bash\\nupdate-grub\\n```\\n\\n\u91cd\u542f\u4e3b\u673a\u3002\\n\\n```bash\\nreboot\\n```\\n\\n\u5728 Web \u63a7\u5236\u53f0\u4e2d\u5411\u865a\u62df\u673a\u6dfb\u52a0 PCI \u8bbe\u5907\u3002\\n\\n![image-20220618123347893](install-synology-dsm-in-proxmox-ve.assets/image-20220618123347893.png)\\n\\n## \u8bbe\u7f6e\u5f15\u5bfc\u987a\u5e8f\\n\\n\u5728\u300c\u9009\u9879\u300d->\u300c\u5f15\u5bfc\u987a\u5e8f\u300d\u4e2d\u8bbe\u7f6e\u5f15\u5bfc\u987a\u5e8f\u3002\u52fe\u9009\u4ece`sata0`\u542f\u52a8\uff0c\u628a\u5176\u4ed6\u542f\u52a8\u9879\u90fd\u53bb\u6389\u3002\\n\\n![image-20220618172735749](install-synology-dsm-in-proxmox-ve.assets/image-20220618172735749.png)\\n\\n## \u542f\u52a8\u548c\u5b89\u88c5\u7cfb\u7edf\\n\\n\u5728 Web \u63a7\u5236\u53f0\u4e2d\u542f\u52a8\u865a\u62df\u673a\u3002\\n\\n\u901a\u8fc7\u4e32\u53e3\u63a7\u5236\u53f0\u67e5\u770b IP\u3002\u5728\u542f\u52a8\u865a\u62df\u673a\u540e\u9700\u8981\u5feb\u901f\u6253\u5f00\u4e32\u53e3\u63a7\u5236\u53f0\uff0c\u8981\u4e0d\u7136\u53ef\u80fd\u4f1a\u9519\u8fc7\u4e00\u4e9b\u65e5\u5fd7\u4fe1\u606f\u3002\\n\\n![image-20220618194830834](install-synology-dsm-in-proxmox-ve.assets/image-20220618194830834.png)\\n\\n![image-20220618194814526](install-synology-dsm-in-proxmox-ve.assets/image-20220618194814526.png)\\n\\n\u6216\u662f\u901a\u8fc7\u8def\u7531\u5668\u7684\u7ba1\u7406\u9875\u9762\u67e5\u770b DSM \u7684 IP \u5730\u5740\uff1b\\n\\n![image-20220618172958405](install-synology-dsm-in-proxmox-ve.assets/image-20220618172958405.png)\\n\\n\u518d\u6216\u8005\u4f7f\u7528 *Synology Assistant[^4]* \u5bfb\u627e DSM \u7684 IP \u5730\u5740\uff1b\\n\\n![image-20220618183659193](install-synology-dsm-in-proxmox-ve.assets/image-20220618183659193.png)\\n\\n\u8bbf\u95ee\u8be5 IP \u5730\u5740\u5373\u53ef\u770b\u89c1 DSM \u5b89\u88c5\u5411\u5bfc\u3002\u70b9\u51fb\u300c\u8bbe\u7f6e\u300d\u5f00\u59cb\u5b89\u88c5\u5411\u5bfc\uff1b\\n\\n![image-20220618180330535](install-synology-dsm-in-proxmox-ve.assets/image-20220618180330535.png)\\n\\n\u70b9\u51fb\u300c\u624b\u52a8\u5b89\u88c5\u300d\uff0c\u4e0d\u8981\u70b9\u300c\u7acb\u5373\u5b89\u88c5\u300d\uff0c\u4e0d\u7136\u4f1a\u5b89\u88c5\u6700\u65b0\u7684\u7cfb\u7edf\u5bfc\u81f4\u65e0\u6cd5\u542f\u52a8\uff1b\\n\\n![image-20220618180434695](install-synology-dsm-in-proxmox-ve.assets/image-20220618180434695.png)\\n\\n\u70b9\u51fb\u300c\u6d4f\u89c8\u300d\uff0c\u4e0a\u4f20\u81ea\u5df1\u4e0b\u8f7d\u7684\u7cfb\u7edf\u6587\u4ef6`DSM_DS918+_23824.pat`\uff0c\u4e4b\u540e\u518d\u70b9\u51fb\u300c\u7acb\u5373\u5b89\u88c5\u300d\uff1b\\n\\n![image-20220618180552646](install-synology-dsm-in-proxmox-ve.assets/image-20220618180552646.png)\\n\\n![image-20220618180651460](install-synology-dsm-in-proxmox-ve.assets/image-20220618180651460.png)\\n\\n\u7cfb\u7edf\u5b89\u88c5\u5b8c\u6bd5\u3002\\n\\n![image-20220618195821760](install-synology-dsm-in-proxmox-ve.assets/image-20220618195821760.png)\\n\\n\u53ef\u4ee5\u53bb\u4e32\u53e3\u63a7\u5236\u53f0\u770b\u65e5\u5fd7\uff0c\u65e5\u5fd7\u6253\u5370\u5b8c\u6bd5\u5c31\u4ee3\u8868\u542f\u52a8\u6210\u529f\u4e86\uff1b\u5e76\u4e14\u5728\u4e32\u53e3\u63a7\u5236\u53f0\u5185\u8fd8\u53ef\u4ee5\u770b\u5230 IP \u5730\u5740\u3002\u5982\u679c\u7f51\u9875\u6ca1\u6709\u81ea\u52a8\u5237\u65b0\u7684\u8bdd\u4f60\u53ef\u4ee5\u624b\u52a8\u5237\u65b0\u4e00\u4e0b\u7f51\u9875\u3002\\n\\n![image-20220618200154164](install-synology-dsm-in-proxmox-ve.assets/image-20220618200154164.png)\\n\\n## DSM \u8bbe\u7f6e\\n\\n\u8bbe\u7f6e\u7528\u6237\u540d\u548c\u5bc6\u7801\u3002\\n\\n![image-20220618200229776](install-synology-dsm-in-proxmox-ve.assets/image-20220618200229776.png)\\n\\n\u5173\u95ed\u81ea\u52a8\u66f4\u65b0\u3002\\n\\n![image-20220618200321484](install-synology-dsm-in-proxmox-ve.assets/image-20220618200321484.png)\\n\\n\u4e0d\u8981\u4f7f\u7528 QuickConnect\uff0c\u6b63\u7248\u7fa4\u6656\u53ef\u4ee5\u4f7f\u7528\uff0c\u9ed1\u7fa4\u6656\u5c31\u4e0d\u8981\u7528\u4e86\u3002\\n\\n![image-20220618200348349](install-synology-dsm-in-proxmox-ve.assets/image-20220618200348349.png)\\n\\n\u641e\u5b9a\u3002\\n\\n![image-20220618200436543](install-synology-dsm-in-proxmox-ve.assets/image-20220618200436543.png)\\n\\n## \u521b\u5efa\u5b58\u50a8\u7a7a\u95f4\\n\\n\u5728\u300c\u5b58\u50a8\u7a7a\u95f4\u7ba1\u7406\u5458\u300d\u5957\u4ef6\u4e2d\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4\u3002\u6ce8\u610f\u5728\u521b\u5efa\u5b58\u50a8\u7a7a\u95f4\u7684\u65f6\u5019\u4e0d\u8981\u52fe\u9009\u4f7f\u7528\u5f15\u5bfc\u76d8\u3002\\n\\n![image-20220618200732971](install-synology-dsm-in-proxmox-ve.assets/image-20220618200732971.png)\\n\\n\u7cfb\u7edf\u5de5\u4f5c\u6b63\u5e38\u3002\\n\\n![image-20220618201922750](install-synology-dsm-in-proxmox-ve.assets/image-20220618201922750.png)\\n\\n![image-20220618201713478](install-synology-dsm-in-proxmox-ve.assets/image-20220618201713478.png)\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n\u4ee5\u4e0b\u662f\u5728\u7f16\u5199\u672c\u6587\u65f6\u4f7f\u7528\u5230\u7684\u3001\u4f46\u672a\u5728\u6587\u4e2d\u660e\u786e\u5f15\u7528\u7684\u53c2\u8003\u8d44\u6599\uff0c\u5e0c\u671b\u5bf9\u4f60\u6709\u5e2e\u52a9\u3002\\n\\n- [\u7b14\u8bb0\u672c\u4e0a PVE \u865a\u62df\u673a\u5b89\u88c5\u9ed1\u7fa4\u6656\u5e76\u8bbe\u7f6e\u786c\u76d8\u76f4\u901a_\u54d4\u54e9\u54d4\u54e9_bilibili](https://www.bilibili.com/video/BV1Ut411A7wQ)\\n- [PVE7.\u5b89\u88c5\u9ed1\u7fa4\u6656\uff08\u8bb0\u5f55\uff09_\u54d4\u54e9\u54d4\u54e9_bilibili](https://www.bilibili.com/video/BV1c5411D7tP)\\n- [Proxmox VE(PVE) \u7cfb\u7edf\u5f00\u542f IOMMU \u529f\u80fd\u5b9e\u73b0\u786c\u4ef6\u76f4\u901a - NAS \u9601](https://www.nasge.com/archives/137.html)\\n- [\u4f5b\u897f\u535a\u5ba2 - Proxmox VE pve \u786c\u76d8\u76f4\u901a](https://foxi.buduanwang.vip/virtualization/1754.html/)\\n\\n[^1]: [DSM 6.2 Loader - Loaders - XPEnology Community](https://xpenology.com/forum/topic/12952-dsm-62-loader/)\\n[^2]: [Synology Archive Download Site - Index of /download/Os/DSM](https://archive.synology.com/download/Os/DSM)\\n[^3]: [S.M.A.R.T. - \u7ef4\u57fa\u767e\u79d1\uff0c\u81ea\u7531\u7684\u767e\u79d1\u5168\u4e66](https://zh.wikipedia.org/wiki/S.M.A.R.T.)\\n[^4]: [\u4e0b\u8f7d\u4e2d\u5fc3 - DS918+ | Synology \u7fa4\u6656\u79d1\u6280](https://www.synology.cn/zh-cn/support/download/DS918+?version=7.0#utilities)"},{"id":"/mount-tencent-cos-using-s3fs","metadata":{"permalink":"/blog/mount-tencent-cos-using-s3fs","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/mount-tencent-cos-using-s3fs.md","source":"@site/blog/mount-tencent-cos-using-s3fs.md","title":"\u4f7f\u7528 s3fs \u6302\u8f7d\u817e\u8baf\u4e91 COS \u4e2d\u7684\u5185\u5bb9","description":"\u524d\u8a00","date":"2022-06-18T00:00:00.000Z","formattedDate":"2022\u5e746\u670818\u65e5","tags":[{"label":"tencent cos","permalink":"/blog/tags/tencent-cos"},{"label":"docker","permalink":"/blog/tags/docker"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-06-18T00:00:00.000Z","tags":["tencent cos","docker"]},"prevItem":{"title":"\u5728 Proxmox VE \u4e2d\u5b89\u88c5\u7fa4\u6656 DSM","permalink":"/blog/install-synology-dsm-in-proxmox-ve"},"nextItem":{"title":"Proxmox VE \u5b89\u88c5\u540e\u914d\u7f6e","permalink":"/blog/proxmox-ve-post-installation"}},"content":"## \u524d\u8a00\\n\\n\u4e4b\u524d\u5199\u8fc7\u4e00\u7bc7\u6587\u7ae0\u5173\u4e8e\u6302\u8f7d\u817e\u8baf\u4e91 COS \u5185\u5bb9\u5230\u672c\u5730\uff0c\u5176\u4e2d\u4f7f\u7528\u5230\u4e86\u4e00\u6b3e\u540d\u4e3a cosfs \u7684\u8f6f\u4ef6\uff0c\u540e\u6765\u6211\u53d1\u73b0\u8be5\u8f6f\u4ef6\u662f s3fs \u7684\u4e00\u4e2a\u5206\u652f\u3002\u5e76\u4e14\u817e\u8baf\u4e91 COS \u517c\u5bb9 S3 \u7684 API\uff0c\u6240\u4ee5\u7d22\u6027\u76f4\u63a5\u7528 s3fs \u7b97\u4e86\u3002\\n\\n\u4e4b\u524d\u90a3\u7bc7\u6587\u7ae0\u4e2d\u4e5f\u7f3a\u5931\u4e86\u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u7684\u90e8\u5206\uff0c\u6211\u6700\u8fd1\u53d1\u73b0\u4e86\u4e00\u4e2a\u5185\u542b s3fs \u7684 Docker \u955c\u50cf\uff0c\u53ef\u4ee5\u901a\u8fc7 Docker \u5bb9\u5668\u81ea\u52a8\u542f\u52a8\u6765\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u9879\u76ee\u4ecb\u7ecd\\n\\n*docker-s3fs-client[^1]* \u63d0\u4f9b\u4e86\u5185\u5d4c s3fs \u7684 Docker \u955c\u50cf\uff0c\u8be5\u955c\u50cf\u53ef\u4ee5\u628a\u8fdc\u7a0b\u7684 Amazon S3 \u4ed3\u5e93\u7684\u5185\u5bb9\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d\u3002\\n\\n\u817e\u8baf\u4e91 COS \u517c\u5bb9 Amazon S3 \u7684 API\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528 s3fs \u6302\u8f7d\u817e\u8baf\u4e91 COS \u4e2d\u7684\u5185\u5bb9\u3002\\n\\n## \u4f7f\u7528\u793a\u4f8b\\n\\n\u63a5\u4e0b\u6765\u4f7f\u7528 Docker Compose \u6765\u914d\u7f6e\u5e76\u90e8\u7f72 docker-s3fs-client \u5bb9\u5668\u3002\\n\\n```yaml title=\\"s3fs/docker-compose.yml\\"\\nversion: \'3.8\'\\nservices:\\n  s3fs:\\n    image: efrecon/s3fs\\n    restart: unless-stopped\\n    cap_add:\\n      - SYS_ADMIN\\n    security_opt:\\n      - \'apparmor:unconfined\'\\n    devices:\\n      - /dev/fuse\\n    volumes:\\n      - /mnt/s3fs:/opt/s3fs/bucket:rshared\\n    environment:\\n      AWS_S3_BUCKET: xxxx-xxxxxx\\n      AWS_S3_ACCESS_KEY_ID: xxxxxxxxxxxxxxxxxx\\n      AWS_S3_SECRET_ACCESS_KEY: xxxxxxxxxxxxxxxxxx\\n      AWS_S3_URL: https://cos.ap-shanghai.myqcloud.com\\n```\\n\\n\u5728`docker-compose.yml`\u7684`volumes`\u90e8\u5206\u4e2d\uff0c`/mnt/s3fs:/opt/s3fs/bucket:rshared`\u610f\u5473\u628a\u5bbf\u4e3b\u673a`mnt/s3fs`\u6587\u4ef6\u5939\u6302\u8f7d\u5230\u5bb9\u5668\u91cc\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u63d0\u524d\u624b\u52a8\u521b\u5efa\u8be5\u6587\u4ef6\u5939\uff1b`/opt/s3fs/bucket`\u662f\u56fa\u5b9a\u7684\uff0c\u5e76\u4e14`rshared`\u4e5f\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002\\n\\n`docker-compose.yml`\u4e2d\u914d\u7f6e\u7684\u73af\u5883\u53d8\u91cf\u770b\u540d\u79f0\u4e00\u822c\u90fd\u77e5\u9053\u4ec0\u4e48\u610f\u601d\uff0c\u5728\u6302\u8f7d\u817e\u8baf\u4e91 COS \u7684\u65f6\u5019\u53ef\u4ee5\u53c2\u8003\u5176 *\u76f8\u5173\u6587\u6863 [^2]*\u3002\\n\\n\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u542f\u52a8\u5bb9\u5668\uff0c\u6ce8\u610f\u5728\u5305\u542b`docker-compose.yml`\u7684`s3fs`\u6587\u4ef6\u5939\u4e2d\u6267\u884c\u3002\\n\\n```bash\\ndocker-compose up -d\\n```\\n\\n\u5982\u679c\u914d\u7f6e\u6b63\u786e\u7684\u8bdd\uff0c\u5bb9\u5668\u6b63\u5e38\u542f\u52a8\u540e\u5c31\u80fd\u5728\u5bbf\u4e3b\u673a\u4e2d\u6b63\u5e38\u8bbf\u95ee\u817e\u8baf\u4e91 COS \u7684\u5185\u5bb9\u4e86\u3002\\n\\n\u6839\u636e\u4e0a\u9762\u7684\u914d\u7f6e\uff0c\u53ef\u4ee5\u5728\u5bbf\u4e3b\u673a\u7684`mnt/s3fs`\u76ee\u5f55\u4e2d\u8bbf\u95ee\u88ab\u6302\u8f7d\u7684\u817e\u8baf\u4e91 COS \u7684\u5185\u5bb9\u3002\u5982\u679c\u4e0d\u80fd\u6b63\u786e\u8bbf\u95ee\u8bf7\u67e5\u770b\u5bb9\u5668\u65e5\u5fd7\u6392\u67e5\u9519\u8bef\u3002\\n\\n[^1]: [efrecon/docker-s3fs-client: Alpine-based s3fs client: mount from container, make available to other containers](https://github.com/efrecon/docker-s3fs-client)\\n[^2]: [\u5bf9\u8c61\u5b58\u50a8 \u5728\u517c\u5bb9 S3 \u7684\u7b2c\u4e09\u65b9\u5e94\u7528\u4e2d\u4f7f\u7528 COS \u7684\u901a\u7528\u914d\u7f6e - \u6700\u4f73\u5b9e\u8df5 - \u6587\u6863\u4e2d\u5fc3 - \u817e\u8baf\u4e91](https://cloud.tencent.com/document/product/436/41284)"},{"id":"/proxmox-ve-post-installation","metadata":{"permalink":"/blog/proxmox-ve-post-installation","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/proxmox-ve-post-installation.md","source":"@site/blog/proxmox-ve-post-installation.md","title":"Proxmox VE \u5b89\u88c5\u540e\u914d\u7f6e","description":"\u524d\u8a00","date":"2022-06-18T00:00:00.000Z","formattedDate":"2022\u5e746\u670818\u65e5","tags":[{"label":"proxmox ve","permalink":"/blog/tags/proxmox-ve"},{"label":"debian","permalink":"/blog/tags/debian"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-06-18T00:00:00.000Z","tags":["proxmox ve","debian"]},"prevItem":{"title":"\u4f7f\u7528 s3fs \u6302\u8f7d\u817e\u8baf\u4e91 COS \u4e2d\u7684\u5185\u5bb9","permalink":"/blog/mount-tencent-cos-using-s3fs"},"nextItem":{"title":"\u4f7f\u7528 restic \u5b9a\u65f6\u5907\u4efd\u6587\u4ef6","permalink":"/blog/restic-scheduled-backup"}},"content":"## \u524d\u8a00\\n\\nProxmox VE \u57fa\u4e8e Debian\uff0c\u6240\u4ee5\u548c Debian \u7684\u64cd\u4f5c\u8fd8\u662f\u6709\u5f88\u591a\u4e00\u6837\u7684\u5730\u65b9\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u7cfb\u7edf\u8f6f\u4ef6\u6e90\u955c\u50cf\\n\\n\\n\u6267\u884c\u547d\u4ee4\u3002\\n\\n```bash\\napt edit-sources\\n```\\n\\n\u66ff\u6362\u5185\u5bb9\uff0c\u8fd9\u91cc\u4f7f\u7528\u4e86 *\u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 [^1]*\u3002\\n\\n```\\n# \u9ed8\u8ba4\u6ce8\u91ca\u4e86\u6e90\u7801\u955c\u50cf\u4ee5\u63d0\u9ad8 apt update \u901f\u5ea6\uff0c\u5982\u6709\u9700\u8981\u53ef\u81ea\u884c\u53d6\u6d88\u6ce8\u91ca\\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free\\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free\\n\\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free\\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free\\n\\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free\\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free\\n\\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free\\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free\\n```\\n\\n\u6216\u8005\u4f7f\u7528 *\u963f\u91cc\u5df4\u5df4\u5f00\u6e90\u955c\u50cf\u7ad9\u70b9 [^2]*\\n\\n```\\ndeb http://mirrors.aliyun.com/debian/ bullseye main non-free contrib\\n# deb-src http://mirrors.aliyun.com/debian/ bullseye main non-free contrib\\ndeb http://mirrors.aliyun.com/debian-security/ bullseye-security main\\n# deb-src http://mirrors.aliyun.com/debian-security/ bullseye-security main\\ndeb http://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib\\n# deb-src http://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib\\ndeb http://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib\\n# deb-src http://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib\\n```\\n\\n## Proxmox VE \u8f6f\u4ef6\u6e90\u955c\u50cf\\n\\n\u8fd9\u91cc\u4f7f\u7528\u4e86 *\u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 [^3]*\\n\\n```bash\\necho \\"deb https://mirrors.tuna.tsinghua.edu.cn/proxmox/debian bullseye pve-no-subscription\\" > /etc/apt/sources.list.d/pve-no-subscription.list\\n```\\n\\n\u5220\u9664 pve-enterprise \u6e90\u3002\\n\\n```bash\\n# rm /etc/apt/sources.list.d/pve-enterprise.list\\ntrash-put /etc/apt/sources.list.d/pve-enterprise.list\\n```\\n\\n## \u66f4\u65b0\\n\\n```bash\\napt update\\napt upgrade\\n```\\n\\n## \u5b89\u88c5\u4e00\u4e9b\u5c0f\u5de5\u5177\\n\\n```bash\\napt install curl wget tmux bat htop btop exa neofetch trash-cli\\n```\\n\\n## \u914d\u7f6e\u522b\u540d\\n\\n\u6267\u884c\u547d\u4ee4\u3002\\n\\n```\\nnano .profile\\n```\\n\\n\u52a0\u5165\u5185\u5bb9\u3002\\n\\n```bash\\nalias bat=\'batcat\'\\nalias ll=\'exa -lha --modified --created --time-style long-iso --group-directories-first\'\\n```\\n\\n## CT \u6a21\u677f\u955c\u50cf\\n\\n\u76f4\u63a5\u4ece *\u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 [^4]* \u590d\u5236\u4e0b\u8f7d\u94fe\u63a5\u5230 Web \u63a7\u5236\u53f0\u4e0b\u8f7d\u3002\\n\\n## Windows VirtIO \u9a71\u52a8\\n\\n\u4ece *Proxmox VE wiki[^5]* \u4e2d\u53ef\u4ee5\u627e\u5230\u4e0b\u8f7d\u5730\u5740\u3002\\n\\n## \u6302\u8f7d\u70b9\\n\\n// TODO \u8865\u5145`local-lvm`\u7684\u4f4d\u7f6e\\n\\n- local\uff1a`/var/lib/vz/`\\n- local-lvm\uff1a``\\n- \u5176\u5b83\u786c\u76d8\uff1a`/mnt/pve/*`\\n- \u865a\u62df\u673a\u914d\u7f6e\u6587\u4ef6\uff1a`/etc/pve/nodes/pve`\\n\\n[^1]: [debian | \u955c\u50cf\u7ad9\u4f7f\u7528\u5e2e\u52a9 | \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 | Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/help/debian/)\\n[^2]: [debian \u955c\u50cf-debian \u4e0b\u8f7d\u5730\u5740-debian \u5b89\u88c5\u6559\u7a0b - \u963f\u91cc\u5df4\u5df4\u5f00\u6e90\u955c\u50cf\u7ad9](https://developer.aliyun.com/mirror/debian)\\n[^3]: [proxmox | \u955c\u50cf\u7ad9\u4f7f\u7528\u5e2e\u52a9 | \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 | Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/help/proxmox/)\\n[^4]: [Index of /proxmox/images/system/ | \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 | Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/proxmox/images/system/)\\n[^5]: [Windows VirtIO Drivers - Proxmox VE](https://pve.proxmox.com/wiki/Windows_VirtIO_Drivers)"},{"id":"/restic-scheduled-backup","metadata":{"permalink":"/blog/restic-scheduled-backup","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/restic-scheduled-backup.md","source":"@site/blog/restic-scheduled-backup.md","title":"\u4f7f\u7528 restic \u5b9a\u65f6\u5907\u4efd\u6587\u4ef6","description":"\u524d\u8a00","date":"2022-06-18T00:00:00.000Z","formattedDate":"2022\u5e746\u670818\u65e5","tags":[{"label":"restic","permalink":"/blog/tags/restic"},{"label":"docker","permalink":"/blog/tags/docker"},{"label":"tencent cos","permalink":"/blog/tags/tencent-cos"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-06-18T00:00:00.000Z","tags":["restic","docker","tencent cos"]},"prevItem":{"title":"Proxmox VE \u5b89\u88c5\u540e\u914d\u7f6e","permalink":"/blog/proxmox-ve-post-installation"},"nextItem":{"title":"restic\uff1a\u8f7b\u91cf\u3001\u8de8\u5e73\u53f0\u7684\u589e\u91cf\u5907\u4efd\u5de5\u5177","permalink":"/blog/restic-backup-tool"}},"content":"## \u524d\u8a00\\n\\nrestic \u4e0d\u4f1a\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u6ca1\u6709\u5b9a\u65f6\u5907\u4efd\u7684\u529f\u80fd\u3002\u5982\u679c\u4f60\u6709\u5b9a\u65f6\u5907\u4efd\u6587\u4ef6\u7684\u9700\u6c42\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 lobaro/restic-backup-docker \u9879\u76ee\uff0c\u8fd9\u4e2a\u9879\u76ee\u63d0\u4f9b\u4e86\u4e00\u4e2a Docker \u955c\u50cf\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u4f7f\u7528 restic \u5b9a\u65f6\u8fdb\u884c\u6587\u4ef6\u5907\u4efd\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u9879\u76ee\u4ecb\u7ecd\\n\\n*lobaro/restic-backup-docker[^1]* \u662f\u4e00\u4e2a Docker \u955c\u50cf\uff0c\u955c\u50cf\u4e2d\u5305\u542b *restic[^2]* \u548c cron\uff0c\u53ef\u4ee5\u901a\u8fc7 cron \u6765\u5b9a\u65f6\u6267\u884c restic \u7684\u5907\u4efd\u4efb\u52a1\u3002\u5bb9\u5668\u7684\u914d\u7f6e\u90fd\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u6765\u5b8c\u6210\u3002\u4f60\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u914d\u7f6e\uff0c\u6b63\u786e\u914d\u7f6e\u540e\u5c31\u53ef\u4ee5\u5b9a\u671f\u6267\u884c restic \u7684\u5907\u4efd\u4efb\u52a1\u4e86\u3002\\n\\n1. \u628a\u8981\u5907\u4efd\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u4e2d`/data`\u76ee\u5f55\u4e0b\uff1b\\n2. \u914d\u7f6e\u597d restic \u76f8\u5173\u7684\u73af\u5883\u53d8\u91cf\uff1b\\n3. \u914d\u7f6e cron \u8868\u8fbe\u5f0f\u3002\\n\\n## \u4f7f\u7528\u793a\u4f8b\\n\\n\u4e0b\u9762\u6f14\u793a\u4f7f\u7528 Docker Compose \u914d\u7f6e\u8fd0\u884c restic-backup-docker \u5bb9\u5668\uff0c\u5b9a\u65f6\u5907\u4efd\u6587\u4ef6\u5230\u817e\u8baf\u4e91 COS \u4e2d\u3002\\n\\n```yaml title=\\"restic-backup-docker/docker-compose.yml\\" showLineNumbers\\nversion: \'3\'\\nservices:\\n  restic:\\n    image: lobaro/restic-backup-docker\\n    hostname: a-computer.local\\n    restart: unless-stopped\\n    volumes:\\n      - ./excludes.txt:/var/excludes.txt:ro\\n      - caddy_data:/data/caddy_data:ro\\n      - mysql_data:/data/mysql_data:ro\\n    environment:\\n      TZ: Asia/Shanghai\\n      BACKUP_CRON: 0 */6 * * *\\n      RESTIC_REPOSITORY: s3:https://cos.ap-shanghai.myqcloud.com/xxxxx-xxxxxxxxxx\\n      AWS_ACCESS_KEY_ID: xxxxxxxxxx\\n      AWS_SECRET_ACCESS_KEY: xxxxxxxxxx\\n      RESTIC_PASSWORD: xxxxxxxxxx\\n      RESTIC_JOB_ARGS: --limit-upload 5000 --exclude-file /var/excludes.txt\\n      RESTIC_FORGET_ARGS: --prune --keep-last 12 --keep-hourly 24 --keep-daily 7 --keep-weekly 4 --keep-monthly 12\\nvolumes:\\n  caddy_data:\\n    external: true\\n  mysql_data:\\n    external: true\\n```\\n\\n\u521b\u5efa`excludes.txt`\u6587\u672c\u6587\u4ef6\uff0c\u4f5c\u4e3a restic \u7684`--exclude-file`\u53c2\u6570\u5185\u5bb9\u3002restic \u5728\u5907\u4efd\u8fc7\u7a0b\u4e2d\u4f1a\u5ffd\u7565\u6389\u5339\u914d\u8fd9\u4e9b\u89c4\u5219\u7684\u6587\u4ef6\u3002\\n\\n\u6ce8\u610f\u4ee5`#`\u5f00\u5934\u7684\u884c\u4f1a\u88ab\u89c6\u4e3a\u6ce8\u91ca\uff0c\u5982\u679c\u4f60\u60f3\u6392\u9664\u67d0\u4e2a\u4ee5`#`\u5f00\u5934\u7684\u6587\u4ef6\u6216\u6587\u4ef6\u5939\uff0c\u8bf7\u4f7f\u7528`\\\\#`\u6765\u8f6c\u4e49\u3002\\n\\n```txt title=\\"restic-backup-docker/excludes.txt\\"\\n*log*\\n*cache*\\ntmp\\n\\\\#recycle\\n```\\n\\n`docker-compose.yml`\u6587\u4ef6\u4e2d\u7684`hostname`\u8bbe\u7f6e\u5bb9\u5668\u7684\u4e3b\u673a\u540d\uff0crestic \u5728\u8fdb\u884c\u5907\u4efd\u7684\u65f6\u5019\u4f1a\u7528\u4e0a\u4e3b\u673a\u540d\uff0c\u8868\u540d\u6b64\u6b21\u5907\u4efd\u662f\u4ece\u54ea\u53f0\u4e3b\u673a\u4e0a\u521b\u5efa\u7684\u3002\\n\\n\u63a5\u4e0b\u6765\u5bf9`docker-compose.yml`\u6587\u4ef6\u4e2d\u7684`environment`\u90e8\u5206\u8fdb\u884c\u8bf4\u660e\uff1a\\n\\n1. `TZ`\uff0c\u8bbe\u7f6e\u5bb9\u5668\u5185\u7684\u65f6\u533a\uff0c\u683c\u5f0f\u4e3a *IANA time zone[^3]*\uff1b\\n2. `BACKUP_CRON`\uff0c\u6267\u884c\u5907\u4efd\u4efb\u52a1\u7684 cron \u8868\u8fbe\u5f0f\uff0c`0 */6 * * *`\u8868\u793a\u6bcf 6 \u5c0f\u65f6\u6267\u884c\u4e00\u6b21\u3002\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b *\u5728\u7ebf\u5de5\u5177 [^4]* \u6765\u9a8c\u8bc1 cron \u8868\u8fbe\u5f0f\uff1b\\n3. `RESTIC_REPOSITORY`\uff0crestic \u5907\u4efd\u76ee\u7684\u5730\uff0c\u8fd9\u91cc\u5907\u4efd\u5230\u817e\u8baf\u4e91\u7684 COS \u4e2d\uff0c\u817e\u8baf\u4e91 COS \u517c\u5bb9 Amazon S3 \u534f\u8bae\u3002\u5177\u4f53\u53ef\u4ee5\u53c2\u8003 *\u817e\u8baf\u4e91 COS \u6587\u6863 [^5]* \u548c *restic \u6587\u6863 [^6]*\u3002\u5bb9\u5668\u5728\u542f\u52a8\u65f6\u5019\u4f1a\u68c0\u6d4b\u8be5\u4ed3\u5e93\u662f\u5426\u7528 restic \u521d\u59cb\u5316\u8fc7\uff0c\u5982\u679c\u6ca1\u6709\u7684\u8bdd\u5219\u4f1a\u81ea\u52a8\u521d\u59cb\u5316\u4ed3\u5e93\uff1b\\n4. `AWS_ACCESS_KEY_ID`\uff0c\u817e\u8baf\u4e91 COS \u76f8\u5173\u914d\u7f6e\uff1b\\n5. `AWS_SECRET_ACCESS_KEY`\uff0c\u817e\u8baf\u4e91 COS \u76f8\u5173\u914d\u7f6e\uff1b\\n6. `RESTIC_PASSWORD`\uff0crestic \u4ed3\u5e93\u7684\u5bc6\u7801\uff1b\\n7. `RESTIC_JOB_ARGS`\uff0c\u6267\u884c`restic backup`\u547d\u4ee4\u65f6\u9644\u52a0\u7684\u989d\u5916\u53c2\u6570\uff0c\u8be6\u60c5\u53ef\u53c2\u8003 *restic \u6587\u6863 [^7]*\uff1b\\n8. `RESTIC_FORGET_ARGS`\uff0c\u6267\u884c`restic forget`\u547d\u4ee4\u65f6\u9644\u52a0\u7684\u989d\u5916\u53c2\u6570\uff0c\u8be6\u60c5\u53ef\u53c2\u8003 *restic \u6587\u6863 [^8]*\u3002\\n\\n\u63a5\u4e0b\u6765\u5bf9`docker-compose.yml`\u6587\u4ef6\u4e2d\u7684`volumes`\u90e8\u5206\u8fdb\u884c\u8bf4\u660e\uff1a\\n\\n1. `./excludes.txt:/var/excludes.txt:ro`\uff0c\u6302\u8f7d`excludes.txt`\uff1b\\n2. `caddy_data:/data/caddy_data:ro`\uff0c\u6302\u8f7d`caddy_data`\u5377\u5230\u5bb9\u5668\u5185`/data`\u76ee\u5f55\u4e0b\uff1b\\n3. `mysql_data:/data/mysql_data:ro`\uff0c\u6302\u8f7d`mysql_data`\u5377\u5230\u5bb9\u5668\u5185`/data`\u76ee\u5f55\u4e0b\uff1b\\n4. `/root:/data/root:ro`\uff0c\u6302\u8f7d`/root`\u76ee\u5f55\u5230\u5bb9\u5668\u5185`/data`\u76ee\u5f55\u4e0b\u3002\\n\\n## \u542f\u52a8\u5bb9\u5668\\n\\n\u5728`restic-backup-docker`\u76ee\u5f55\u4e0b\u6267\u884c\u547d\u4ee4\u3002\\n\\n```bash\\n# \u9a8c\u8bc1 docker-compose.yml \u6587\u4ef6\u7684\u683c\u5f0f\u662f\u5426\u6b63\u786e\\ndocker-compose config\\n\\n# \u542f\u52a8\u5bb9\u5668\\ndocker-compose up -d\\n```\\n\\n## \u6d4b\u8bd5\u914d\u7f6e\\n\\n```bash\\n# \u624b\u52a8\u6267\u884c\u4e00\u6b21\u5907\u4efd\u4efb\u52a1\\ndocker-compose exec restic backup\\n\\n# \u67e5\u770b restic \u7684\u5907\u4efd\u5386\u53f2\\ndocker-compose exec restic restic snapshots\\n\\n# \u67e5\u770b\u4e0a\u4e00\u6b21`restic backup`\u547d\u4ee4\u7684\u7ed3\u679c\\ndocker-compose exec restic cat /var/log/backup-last.log\\n\\n# \u67e5\u770b\u6700\u8fd1\u4e00\u6b21\u5931\u8d25\u7684`restic backup`\u547d\u4ee4\u7684\u7ed3\u679c\\ndocker-compose exec restic cat /var/log/backup-error-last.log\\n\\n# \u67e5\u770b cron \u65e5\u5fd7\\ndocker-compose logs -f\\ndocker-compose exec restic cat /var/log/cron.log\\n\\n# \u5728\u5bb9\u5668\u5185\u542f\u52a8\u4e00\u4e2a Shell\uff0c\u65b9\u9762\u6267\u884c\u5176\u4ed6\u547d\u4ee4\\ndocker-compose exec restic sh\\n```\\n\\n## \u66f4\u591a\u7528\u6cd5\\n\\nlobaro/restic-backup-docker \u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u7528\u6cd5\uff0c\u4f8b\u5982\uff1a\\n\\n1. \u5728\u5bb9\u5668\u5185\u81ea\u52a8\u6302\u8f7d NFS \u76ee\u5f55\uff1b\\n2. \u5728\u5bb9\u5668\u5185\u4f7f\u7528`restic mount`\u547d\u4ee4\uff1b\\n3. \u5728\u5907\u4efd\u524d\u540e\u6267\u884c\u81ea\u5b9a\u4e49\u811a\u672c\u3002\\n\\n\u672c\u6587\u4e2d\u5e76\u6ca1\u6709\u6db5\u76d6\u6240\u6709\u7684\u7528\u6cd5\u8bf4\u660e\uff0c\u5173\u4e8e\u66f4\u591a\u7528\u6cd5\u8bf7\u53c2\u8003 *lobaro/restic-backup-docker[^9]*\u3002\\n\\n[^1]: [lobaro/restic-backup-docker - Docker Image | Docker Hub](https://hub.docker.com/r/lobaro/restic-backup-docker)\\n[^2]: [restic\uff1a\u8f7b\u91cf\u3001\u8de8\u5e73\u53f0\u7684\u589e\u91cf\u5907\u4efd\u5de5\u5177](./restic-backup-tool.md)\\n[^3]: [Noda Time | Time zones](https://nodatime.org/TimeZones)\\n[^4]: [Crontab.guru - The cron schedule expression editor](https://crontab.guru)\\n[^5]: [\u5bf9\u8c61\u5b58\u50a8 \u5728\u517c\u5bb9 S3 \u7684\u7b2c\u4e09\u65b9\u5e94\u7528\u4e2d\u4f7f\u7528 COS \u7684\u901a\u7528\u914d\u7f6e - \u6700\u4f73\u5b9e\u8df5 - \u6587\u6863\u4e2d\u5fc3 - \u817e\u8baf\u4e91](https://cloud.tencent.com/document/product/436/41284)\\n[^6]: [Preparing a new repository \u2014 restic 0.13.1 documentation](https://restic.readthedocs.io/en/stable/030_preparing_a_new_repo.html)\\n[^7]: [Backing up \u2014 restic 0.13.1 documentation](https://restic.readthedocs.io/en/stable/040_backup.html)\\n[^8]: [Removing backup snapshots \u2014 restic 0.13.1 documentation](https://restic.readthedocs.io/en/stable/060_forget.html)\\n[^9]: [lobaro/restic-backup-docker: A docker container to automate backups with restic](https://github.com/lobaro/restic-backup-docker)"},{"id":"/restic-backup-tool","metadata":{"permalink":"/blog/restic-backup-tool","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/restic-backup-tool.md","source":"@site/blog/restic-backup-tool.md","title":"restic\uff1a\u8f7b\u91cf\u3001\u8de8\u5e73\u53f0\u7684\u589e\u91cf\u5907\u4efd\u5de5\u5177","description":"\u524d\u8a00","date":"2022-05-22T00:00:00.000Z","formattedDate":"2022\u5e745\u670822\u65e5","tags":[{"label":"restic","permalink":"/blog/tags/restic"},{"label":"tencent cos","permalink":"/blog/tags/tencent-cos"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-05-22T00:00:00.000Z","tags":["restic","tencent cos"]},"prevItem":{"title":"\u4f7f\u7528 restic \u5b9a\u65f6\u5907\u4efd\u6587\u4ef6","permalink":"/blog/restic-scheduled-backup"},"nextItem":{"title":"Gitea\uff1a\u8f7b\u91cf\u7ea7\u81ea\u5efa Git \u670d\u52a1","permalink":"/blog/self-hosted-git-service-gitea"}},"content":"## \u524d\u8a00\\n\\nrestic \u662f\u4e00\u6b3e\u7528 Go \u8bed\u8a00\u5b9e\u73b0\u7684\u5907\u4efd\u5de5\u5177\uff0c\u5177\u6709\u8de8\u5e73\u53f0\u8fd0\u884c\u3001\u589e\u91cf\u5907\u4efd\u548c\u5386\u53f2\u7248\u672c\u5907\u4efd\u7684\u7279\u6027\u3002\\n\\nrestic \u53ef\u4ee5\u4f7f\u7528\u672c\u5730\u4f4d\u7f6e\u6216\u7f51\u7edc\u4f4d\u7f6e\u4f5c\u4e3a\u5b58\u50a8\u5e93\u3002\\n\\n\u6709\u5f88\u591a\u60c5\u51b5\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\uff0c\u6bd4\u5982 VPS \u63d0\u4f9b\u5546\u8dd1\u8def\u3001\u673a\u623f\u5931\u706b\u3001\u8bbe\u5907\u4e22\u5931\u4ee5\u53ca\u4eba\u5458\u8bef\u64cd\u4f5c\u7b49\uff0c\u6240\u4ee5\u6570\u636e\u5907\u4efd\u662f\u4e00\u9879\u5f88\u91cd\u8981\u7684\u5de5\u4f5c\u3002\u91cd\u8981\u6570\u636e\u5fc5\u987b\u8981\u5907\u4efd\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u6982\u5ff5\u4ecb\u7ecd\\n\\nrestic \u4e0d\u76f4\u63a5\u5907\u4efd\u6587\u4ef6\uff0c\u5b83\u4f1a\u628a\u6587\u4ef6\u5206\u4e3a\u56fa\u5b9a\u5927\u5c0f\u7684\u5757\uff0c\u628a\u8fd9\u4e9b\u6587\u4ef6\u5757\u5b58\u5165\u5b58\u50a8\u5e93\u3002\\n\\nrestic \u7684\u6bcf\u6b21\u5907\u4efd\u90fd\u79f0\u4e3a\u4e00\u4e2a\u5feb\u7167\uff0c\u5feb\u7167\u91cc\u4fdd\u5b58\u4e86\u5bf9\u4e00\u4e2a\u6216\u591a\u4e2a\u6587\u4ef6\u5757\u7684\u5f15\u7528\u3002\u5f53\u591a\u6b21\u5907\u4efd\u76f8\u540c\u6587\u4ef6\u7684\u65f6\u5019\u53ef\u4ee5\u5f15\u7528\u76f8\u540c\u7684\u6587\u4ef6\u5757\uff0c\u4e0d\u4f1a\u5360\u7528\u5f88\u591a\u7a7a\u95f4\uff1b\u5f53\u6587\u4ef6\u53d8\u5316\u4e0d\u5927\u7684\u65f6\u5019\uff0c\u4e5f\u4e0d\u9700\u8981\u5bf9\u53d8\u5316\u540e\u7684\u6587\u4ef6\u518d\u5b8c\u6574\u5907\u4efd\u4e00\u6b21\uff0c\u53ea\u9700\u8981\u5728\u5b58\u50a8\u5e93\u4e2d\u52a0\u5165\u53d8\u5316\u7684\u6587\u4ef6\u5757\u5373\u53ef\u3002\\n\\n\u6240\u4ee5 restic \u53ef\u4ee5\u505a\u5230\u589e\u91cf\u5907\u4efd\u548c\u591a\u7248\u672c\u5907\u4efd\uff0c\u5e76\u4e14\u7a7a\u95f4\u5360\u7528\u4e5f\u4e0d\u591a\u3002\\n\\nrestic \u5728 Github[^1] \u5f00\u6e90\u3002\\n\\n## \u5b89\u88c5 restic\\n\\nrestic \u662f\u4e00\u4e2a\u5355\u6587\u4ef6\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\uff0c\u6ca1\u6709\u5176\u5b83\u4f9d\u8d56\u3002\u4f60\u53ef\u4ee5\u624b\u52a8\u4ece\u5176 Github Releases[^2] \u9875\u4e0b\u8f7d\u53ef\u6267\u884c\u7a0b\u5e8f\uff1b\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5305\u7ba1\u7406\u5668\u5b89\u88c5 restic\uff1brestic \u4e5f\u53ef\u4ee5\u901a\u8fc7 Docker \u8fd0\u884c\u3002\u5b89\u88c5\u7ec6\u8282\u53ef\u4ee5\u53c2\u8003\u5176\u5b98\u65b9\u6587\u6863\u4e2d\u7684 Installation[^3] \u90e8\u5206\u3002\\n\\n\u5728 restic \u6b63\u786e\u5b89\u88c5\u540e\uff0c\u4f60\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a`restic`\u547d\u4ee4\u3002\\n\\n```\\n\u279c ~ restic\\n\\nrestic is a backup program which allows saving multiple revisions of files and\\ndirectories in an encrypted repository stored on different backends.\\n\\nUsage:\\n  restic [command]\\n\\nAvailable Commands:\\n  backup        Create a new backup of files and/or directories\\n  cache         Operate on local cache directories\\n  cat           Print internal objects to stdout\\n  check         Check the repository for errors\\n  copy          Copy snapshots from one repository to another\\n  diff          Show differences between two snapshots\\n  dump          Print a backed-up file to stdout\\n  find          Find a file, a directory or restic IDs\\n  forget        Remove snapshots from the repository\\n  generate      Generate manual pages and auto-completion files (bash, fish, zsh)\\n  help          Help about any command\\n  init          Initialize a new repository\\n  key           Manage keys (passwords)\\n  list          List objects in the repository\\n  ls            List files in a snapshot\\n  migrate       Apply migrations\\n  mount         Mount the repository\\n  prune         Remove unneeded data from the repository\\n  rebuild-index Build a new index\\n  recover       Recover data from the repository not referenced by snapshots\\n  restore       Extract the data from a snapshot\\n  self-update   Update the restic binary\\n  snapshots     List all snapshots\\n  stats         Scan the repository and show basic statistics\\n  tag           Modify tags on snapshots\\n  unlock        Remove locks other processes created\\n  version       Print version information\\n\\nFlags:\\n      --cacert file                file to load root certificates from (default: use system certificates)\\n      --cache-dir directory        set the cache directory. (default: use system default cache directory)\\n      --cleanup-cache              auto remove old cache directories\\n  -h, --help                       help for restic\\n      --insecure-tls               skip TLS certificate verification when connecting to the repo (insecure)\\n      --json                       set output mode to JSON for commands that support it\\n      --key-hint key               key ID of key to try decrypting first (default: $RESTIC_KEY_HINT)\\n      --limit-download int         limits downloads to a maximum rate in KiB/s. (default: unlimited)\\n      --limit-upload int           limits uploads to a maximum rate in KiB/s. (default: unlimited)\\n      --no-cache                   do not use a local cache\\n      --no-lock                    do not lock the repository, this allows some operations on read-only repositories\\n  -o, --option key=value           set extended option (key=value, can be specified multiple times)\\n      --password-command command   shell command to obtain the repository password from (default: $RESTIC_PASSWORD_COMMAND)\\n  -p, --password-file file         file to read the repository password from (default: $RESTIC_PASSWORD_FILE)\\n  -q, --quiet                      do not output comprehensive progress report\\n  -r, --repo repository            repository to backup to or restore from (default: $RESTIC_REPOSITORY)\\n      --repository-file file       file to read the repository location from (default: $RESTIC_REPOSITORY_FILE)\\n      --tls-client-cert file       path to a file containing PEM encoded TLS client certificate and private key\\n  -v, --verbose n                  be verbose (specify multiple times or a level using --verbose=n, max level/times is 3)\\n\\nUse \\"restic [command] --help\\" for more information about a command.\\n```\\n\\n## \u67e5\u770b\u547d\u4ee4\u5e2e\u52a9\\n\\n\u5728\u4f7f\u7528`restic`\u53ca\u5176\u5b50\u547d\u4ee4\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528`--help`\u53c2\u6570\u6765\u83b7\u53d6\u4e00\u4e9b\u5e2e\u52a9\u6587\u6863\u3002\\n\\n```bash\\nrestic --help\\nrestic backup --help\\nrestic ls --help\\nrestic snapshots --help\\n```\\n\\n\u5728\u5b66\u4e60\u548c\u4f7f\u7528 restic \u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f60\u4e5f\u53ef\u4ee5\u67e5\u770b\u5176\u7ebf\u4e0a\u6587\u6863 [^4] \u6765\u83b7\u53d6\u5e2e\u52a9\u3002\\n\\n## \u521d\u59cb\u5316\u5b58\u50a8\u5e93\\n\\nresitc \u4e0d\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\uff0c\u5b83\u4f1a\u4ece\u73af\u5883\u53d8\u91cf\u4e2d\u83b7\u53d6\u914d\u7f6e\u9879\u3002\u6240\u4ee5\u4f60\u53ef\u4ee5\u901a\u8fc7`export`\u547d\u4ee4\u628a\u914d\u7f6e\u9879\u653e\u5165\u5f53\u524d Shell \u4f1a\u8bdd\u7684\u73af\u5883\u53d8\u91cf\u4e2d\u3002\\n\\n\u5728\u4f7f\u7528 restic \u8fdb\u884c\u6570\u636e\u5907\u4efd\u4e4b\u524d\u4f60\u9700\u8981\u5148\u786e\u5b9a\u4e00\u4e2a\u76ee\u5f55\u4f5c\u4e3a\u5b58\u50a8\u5e93\uff0c\u5e76\u7528 restic \u521d\u59cb\u5316\u8fd9\u4e2a\u76ee\u5f55\u3002\\n\\n\u8fd9\u91cc\u9700\u8981\u4f7f\u7528\u4e24\u4e2a\u914d\u7f6e\u9879\u3002\\n\\n- `RESTIC_REPOSITORY`\uff1a\u5b58\u50a8\u5e93\u4f4d\u7f6e\u3002\u53ef\u4ee5\u662f\u672c\u5730\u4f4d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u662f\u7f51\u7edc\u4f4d\u7f6e\uff1b\\n- `RESTIC_PASSWORD`\uff1a\u5b58\u50a8\u5e93\u5bc6\u7801\u3002\\n\\n\u4e0b\u9762\u662f\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u5e93\u7684\u4f8b\u5b50\u3002\\n\\n```bash\\nexport RESTIC_REPOSITORY=\\"/Volumes/extra/restic\\"\\nexport RESTIC_PASSWORD=\\"pass\\"\\n```\\n\\n\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4f7f\u7528`export`\u66b4\u9732\u7684\u73af\u5883\u53d8\u91cf\u53ea\u5728\u5f53\u524d Shell \u4f1a\u8bdd\u751f\u6548\uff0c\u5f53\u4f60\u91cd\u542f Shell \u540e\u8fd9\u4e9b\u73af\u5883\u53d8\u91cf\u5c31\u4e0d\u5b58\u5728\u4e86\u3002\\n\\n```bash\\n# \u521d\u59cb\u5316\u5b58\u50a8\u5e93\\nrestic init\\n```\\n\\n\u5b58\u50a8\u5e93\u53ea\u9700\u521d\u59cb\u5316\u4e00\u6b21\uff0c\u5e76\u4e14 restic \u5bf9\u5b58\u50a8\u5e93\u76f8\u5173\u7684\u64cd\u4f5c\u90fd\u9700\u8981\u5b58\u50a8\u5e93\u7684\u5bc6\u7801\uff0c\u4f60\u8981\u4fdd\u7ba1\u597d\u5b58\u50a8\u5e93\u5bc6\u7801\u3002\\n\\n## \u5907\u4efd\u6570\u636e\\n\\n\u4f7f\u7528`restic backup`\u547d\u4ee4\u6765\u5907\u4efd\u6570\u636e\u3002\\n\\n```bash\\nrestic backup [flags] FILE/DIR [FILE/DIR] ...\\n```\\n\\n```bash\\n# \u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u628a /data \u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u505a\u5907\u4efd\u3002\u6bcf\u6b21\u5907\u4efd\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u5feb\u7167\u3002\\nrestic backup ~/data\\n```\\n\\n## \u67e5\u8be2\u5feb\u7167\u8bb0\u5f55\\n\\n\u4f7f\u7528`restic snapshots`\u547d\u4ee4\u6765\u67e5\u770b\u5feb\u7167\u8bb0\u5f55\uff0c\u6bcf\u4e2a\u5feb\u7167\u90fd\u6709\u4e00\u4e2a ID\u3002\\n\\n```bash\\nrestic snapshots [flags] [snapshotID ...]\\n```\\n\\n## \u67e5\u770b\u5feb\u7167\u5185\u5bb9\\n\\n\u4f7f\u7528`restic ls`\u547d\u4ee4\u6765\u67e5\u770b\u5feb\u7167\u4e2d\u7684\u5185\u5bb9\u3002\\n\\n```bash\\nrestic ls [flags] snapshotID [dir...]\\n```\\n\\n```bash\\n# \u5217\u51fa\u5feb\u7167\u4e2d\u7684\u6240\u6709\u76ee\u5f55\u548c\u6587\u4ef6\uff0c\u4f1a\u9012\u5f52\u5217\u51fa\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\\nrestic ls 9e73578b\\n\\n# \u53ef\u4ee5\u7528`latest`\u4ee3\u66ff\u6700\u65b0\u7684\u5feb\u7167 ID\uff0c\u5217\u51fa\u6700\u8fd1\u7684\u4e00\u6b21\u5feb\u7167\u4e2d\u7684\u5185\u5bb9\\nrestic ls latest\\n\\n# \u5217\u51fa\u5feb\u7167\u4e2d`/`\u76ee\u5f55\u4e0b\u7684\u5185\u5bb9\uff0c\u4e0d\u4f1a\u9012\u5f52\u5b50\u6587\u4ef6\u5939\\nrestic ls 9e73578b /\\n\\n# \u5217\u51fa\u5feb\u7167\u4e2d`/data`\u76ee\u5f55\u4e0b\u7684\u5185\u5bb9\uff0c\u4e0d\u4f1a\u9012\u5f52\u5b50\u6587\u4ef6\u5939\\nrestic ls 9e73578b /data\\n```\\n\\n## \u6062\u590d\u6570\u636e\\n\\n\u4f7f\u7528`restic restore`\u547d\u4ee4\u6765\u4ece\u5feb\u7167\u6062\u590d\u6570\u636e\u3002\\n\\n```bash\\nrestic restore [flags] snapshotID\\n```\\n\\n```bash\\n# \u6062\u590d\u5feb\u7167\u91cc\u7684\u5185\u5bb9\u81f3 ~/restore-target \u76ee\u5f55\\nrestic restore -t ~/restore-target 9e73578b\\n\\n# \u6062\u590d\u5feb\u7167\u91cc\u7684\u5185\u5bb9\u81f3 ~/restore-target \u76ee\u5f55\uff0c\u53ea\u6062\u590d\u5feb\u7167\u4e2d\u7684 /data/file1 \u5185\u5bb9\\nrestic restore -t ~/restore-target -i /data/file1 9e73578b\\n```\\n\\n## \u5220\u9664\u5feb\u7167\\n\\n\u4f7f\u7528`restic forget`\u547d\u4ee4\u6765\u5220\u9664\u5feb\u7167\u3002\\n\\n```bash\\nrestic forget [flags] [snapshot ID] [...]\\n```\\n\\n```bash\\n# \u5220\u9664 ID \u4e3a 9e73578b \u7684\u5feb\u7167\\nrestic forget 9e73578b\\n```\\n\\n\u53ef\u4ee5\u8bbe\u7f6e\u6dd8\u6c70\u7b56\u7565\u6765\u6279\u91cf\u5220\u9664\u5386\u53f2\u5feb\u7167\u3002\\n\\n```bash\\n# \u4f7f\u7528\u6dd8\u6c70\u7b56\u7565\u6279\u91cf\u5220\u9664\u5feb\u7167\\nrestic forget --keep-last 12 --keep-hourly 24 --keep-daily 7 --keep-weekly 4 --keep-monthly 12\\n```\\n\\n\u4e0a\u9762\u7684\u547d\u4ee4\u5b9a\u4e49\u4e86\u4e00\u4e9b\u6dd8\u6c70\u7b56\u7565\uff0c\u4e0d\u6ee1\u8db3\u6b64\u7b56\u7565\u7684\u5feb\u7167\u4f1a\u88ab\u5220\u9664\u3002\\n\\n- \u6c38\u8fdc\u4fdd\u7559\u6700\u65b0\u7684 12 \u4e2a\u5feb\u7167\uff1b\\n- \u5bf9\u4e8e\u8fc7\u53bb 24 \u5c0f\u65f6\u7684\u5feb\u7167\uff0c\u6bcf\u4e2a\u5c0f\u65f6\u90fd\u4fdd\u7559\u4e00\u4e2a\u6700\u65b0\u7684\u5feb\u7167\uff1b\\n- \u5bf9\u4e8e\u8fc7\u53bb\u7684 7 \u5929\uff0c\u6bcf\u5929\u90fd\u4fdd\u7559\u4e00\u4e2a\u6700\u65b0\u7684\u5feb\u7167\uff1b\\n- \u5bf9\u4e8e\u8fc7\u53bb\u7684 4 \u5468\uff0c\u6bcf\u5468\u90fd\u4fdd\u7559\u4e00\u4e2a\u6700\u65b0\u7684\u5feb\u7167\uff1b\\n- \u5bf9\u4e8e\u8fc7\u53bb\u7684 12 \u4e2a\u6708\uff0c\u6bcf\u4e2a\u6708\u90fd\u4fdd\u7559\u4e00\u4e2a\u6700\u65b0\u7684\u5feb\u7167\u3002\\n\\n\u5220\u9664\u5feb\u7167\u5e76\u4e0d\u4f1a\u91ca\u653e\u5b58\u50a8\u5e93\u7684\u5b58\u50a8\u7a7a\u95f4\uff0c\u56e0\u4e3a\u5220\u9664\u5feb\u7167\u53ea\u662f\u5220\u9664\u4e86\u5bf9\u6587\u4ef6\u5757\u7684\u5f15\u7528\uff0c\u6587\u4ef6\u5757\u662f\u4e0d\u4f1a\u88ab\u5220\u9664\u7684\u3002\\n\\n\u4f7f\u7528`restic prune`\u547d\u4ee4\u6765\u68c0\u67e5\u6240\u6709\u7684\u6587\u4ef6\u5757\u5e76\u5220\u9664\u6ca1\u6709\u88ab\u4efb\u4f55\u5feb\u7167\u5f15\u7528\u7684\u6587\u4ef6\u5757\uff0c\u4ece\u800c\u91ca\u653e\u5b58\u50a8\u5e93\u7684\u7a7a\u95f4\u3002\u4e5f\u53ef\u4ee5\u5728\u4f7f\u7528`restic forget`\u547d\u4ee4\u65f6\u52a0\u4e0a`--prune`\u53c2\u6570\uff0crestic \u5728\u5220\u9664\u5feb\u7167\u4e4b\u540e\u4f1a\u7d27\u8ddf\u7740\u6267\u884c`prune`\u547d\u4ee4\u3002\\n\\n```bash\\n# \u626b\u63cf\u6240\u6709\u6587\u4ef6\u5757\uff0c\u5220\u9664\u6ca1\u6709\u88ab\u4efb\u4f55\u4e00\u4e2a\u5feb\u7167\u5f15\u7528\u7684\u6587\u4ef6\u5757\\nrestic prune\\n\\n# \u5728 forget \u4e4b\u540e\u81ea\u52a8\u6267\u884c prune \u547d\u4ee4\u6765\u91ca\u653e\u7a7a\u95f4\\nrestic forget --prune --keep-last 12 --keep-hourly 24 --keep-daily 7 --keep-weekly 4 --keep-monthly 12\\n```\\n\\n## \u591a\u673a\u5668\u5171\u7528\u5b58\u50a8\u5e93\\n\\n\u5982\u679c\u4f60\u6709\u591a\u4e2a\u673a\u5668\u9700\u8981\u5907\u4efd\u6570\u636e\uff0c\u53ef\u4ee5\u5171\u7528\u4e00\u4e2a\u5b58\u50a8\u5e93\u3002\\n\\n\u6bcf\u4e2a\u5feb\u7167\u90fd\u6709\u4e00\u4e2a Host \u5c5e\u6027\uff0c\u5bf9\u5e94\u7740\u5b9e\u65bd\u5907\u4efd\u64cd\u4f5c\u7684\u4e3b\u673a\u540d\uff08Hostname\uff09\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b restic \u76f4\u63a5\u8bfb\u53d6\u7cfb\u7edf\u4e2d\u7684 Hostname\uff0c\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7`--host`\u6216`-H`\u53c2\u6570\u624b\u52a8\u6307\u5b9a\u4e3b\u673a\u540d\u3002\u8be5\u53c2\u6570\u53ef\u7528\u4e8e\u8bb8\u591a\u547d\u4ee4\uff0c\u5982`backup`\u3001`snapshots`\u6216`forget`\u7b49\u547d\u4ee4\u4e2d\u3002\\n\\n\u5feb\u7167\u548c\u5feb\u7167\u4e4b\u95f4\u662f\u6ca1\u6709\u7ee7\u627f\u5173\u7cfb\u7684\uff0c\u4f60\u5220\u9664\u4e4b\u524d\u7684\u5feb\u7167\u4e0d\u4f1a\u5f71\u54cd\u5230\u4e4b\u540e\u7684\u5feb\u7167\u3002\\n\\n\u5728\u4f7f\u7528`restic forget`\u547d\u4ee4\u4f7f\u7528\u6dd8\u6c70\u7b56\u7565\u5220\u9664\u5feb\u7167\u65f6\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u4e3b\u673a\u540d\u4f1a\u5bf9\u5206\u522b\u5bf9\u6240\u6709\u4e3b\u673a\u4e0b\u7684\u5feb\u7167\u5206\u522b\u6267\u884c\u6dd8\u6c70\u7b56\u7565\uff1b\u5982\u679c\u6307\u5b9a\u4e86\u4e3b\u673a\u540d\u5219\u53ea\u4f1a\u5bf9\u5bf9\u5e94\u4e3b\u673a\u540d\u7684\u5feb\u7167\u6267\u884c\u6dd8\u6c70\u7b56\u7565\u3002\\n\\n## \u540e\u8bb0\\n\\n\u505a\u4e86\u5907\u4efd\u4e5f\u4e0d\u662f\u4e00\u52b3\u6c38\u9038\u7684\u3002\u4f60\u53ef\u80fd\u8fd8\u9700\u8981\u5f02\u5730\u591a\u5907\u4efd\uff0c\u4ec5\u4ec5\u5907\u4efd\u5728\u672c\u5730\u662f\u4e0d\u65b9\u4fbf\u4e5f\u662f\u4e0d\u5b89\u5168\u7684\u3002\\n\\n\u4f7f\u7528\u5bf9\u8c61\u5b58\u50a8\u670d\u4f5c\u4e3a\u5b58\u50a8\u5e93\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\uff0c\u57fa\u672c\u4e0a\u6240\u6709\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u5668\u90fd\u517c\u5bb9 Amazon S3 \u7684 API\uff0c\u90fd\u53ef\u4ee5\u4f5c\u4e3a restic \u7684\u5b58\u50a8\u5e93\u4f7f\u7528\u3002\\n\\n\u5bf9\u8c61\u5b58\u50a8\u7684\u6536\u8d39\u9879\u76ee\u6709\u4e0b\u8f7d\u6d41\u91cf\u8d39\u7528\u3001API \u8c03\u7528\u8d39\u7528\u548c\u5b58\u50a8\u7a7a\u95f4\u8d39\u7528\u3002\u4e0a\u4f20\u6d41\u91cf\u4e00\u822c\u662f\u4e0d\u6536\u8d39\u7684\uff0c\u540c\u65f6 API \u8c03\u7528\u8d39\u7528\u548c\u5b58\u50a8\u7a7a\u95f4\u8d39\u7528\u90fd\u4e0d\u9ad8\u3002\u4e0b\u8f7d\u6d41\u91cf\u8d39\u7528\u6536\u8d39\u8f83\u9ad8\uff0c\u4f46\u662f\u5728\u8fdb\u884c\u5907\u4efd\u7684\u65f6\u5019\u6ca1\u6709\u591a\u5c11\u4e0b\u8f7d\u6d41\u91cf\uff0c\u5728\u7d27\u6025\u60c5\u51b5\u4e0b\u6062\u590d\u6587\u4ef6\u7684\u65f6\u5019\u53ef\u4ee5\u4e70\u9650\u65f6\u6d41\u91cf\u5305\u5305\u6765\u964d\u4f4e\u4e0b\u8f7d\u6d41\u91cf\u7684\u8d39\u7528\u3002\u82b1\u70b9\u94b1\u8d4e\u56de\u81ea\u5df1\u7684\u6570\u636e\u603b\u6bd4\u6570\u636e\u90fd\u6d88\u5931\u4e86\u8981\u597d\u3002\\n\\n\u6709\u4e9b\u5bf9\u8c61\u5b58\u50a8\u5728\u5185\u7f51\u7684\u4e0b\u8f7d\u6d41\u91cf\u4e5f\u4e0d\u6536\u8d39\uff0c\u6bd4\u5982\u817e\u8baf\u4e91\u7684\u5bf9\u8c61\u5b58\u50a8\u5728\u817e\u8baf\u4e91\u670d\u52a1\u5668\u4e2d\u4f7f\u7528\u7684\u8bdd\uff0c\u4e0b\u8f7d\u6d41\u91cf\u5c31\u4e0d\u8ba1\u8d39\uff0c\u53ea\u6536 API \u8c03\u7528\u7684\u8d39\u7528\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u817e\u8baf\u4e91\u7684\u670d\u52a1\u5668\u6765\u4e2d\u8f6c\u5bf9\u8c61\u5b58\u50a8\u4e2d\u7684\u5185\u5bb9\u3002\u5173\u4e8e\u6b64\u5185\u5bb9\u53ef\u4ee5\u53c2\u8003\u300c\u6302\u8f7d\u817e\u8baf\u4e91 COS \u5230\u672c\u5730\u6587\u4ef6\u5939\u300d[^5]\u3002\\n\\n\u5728\u6570\u636e\u5907\u4efd\u5230\u5bf9\u8c61\u5b58\u50a8\u4e4b\u540e\uff0c\u53ef\u4ee5\u5b9a\u671f\u4ece\u5bf9\u8c61\u5b58\u50a8\u4e2d\u4e0b\u8f7d\u6570\u636e\u5230\u672c\u5730\u7684\u79fb\u52a8\u786c\u76d8\u4e2d\uff0c\u8fbe\u6210\u5f02\u5730\u5907\u4efd\u3002\u5b58\u50a8\u5e93\u8fc1\u79fb\u53ef\u4ee5\u4f7f\u7528`rclone`\u5de5\u5177\uff0c\u628a\u5bf9\u8c61\u5b58\u50a8\u4e2d\u7684\u6240\u6709\u5185\u5bb9\u590d\u5236\u5230\u672c\u5730\u5373\u53ef\u5b8c\u6210\u8fc1\u79fb\uff0c`rclone`\u53ef\u4ee5\u53ea\u590d\u5236\u6709\u53d8\u5316\u7684\u5185\u5bb9\u5e76\u4e14\u5220\u9664\u591a\u4f59\u7684\u5185\u5bb9\u3002\\n\\n\u8981\u5b9a\u671f\u505a\u6570\u636e\u6062\u590d\u6d4b\u8bd5\uff0c\u68c0\u67e5\u5907\u4efd\u662f\u5426\u6b63\u5e38\uff0c\u662f\u5426\u80fd\u6309\u671f\u671b\u6062\u590d\u6570\u636e\u3002\u5907\u4efd\u4e0d\u6d4b\u8bd5\uff0c\u7b49\u4e8e\u6ca1\u5907\u4efd\u3002\\n\\n[^1]: [restic/restic: Fast, secure, efficient backup program](https://github.com/restic/restic)\\n[^2]: [Releases \xb7 restic/restic](https://github.com/restic/restic/releases)\\n[^3]: [Installation \u2014 restic 0.13.1 documentation](https://restic.readthedocs.io/en/stable/020_installation.html)\\n[^4]: [Restic Documentation \u2014 restic 0.13.1 documentation](https://restic.readthedocs.io/en/stable/index.html)\\n[^5]: [\u6302\u8f7d\u817e\u8baf\u4e91 COS \u5230\u672c\u5730\u6587\u4ef6\u5939](./mount-tencent-cos-on-local-file-system.md)"},{"id":"/self-hosted-git-service-gitea","metadata":{"permalink":"/blog/self-hosted-git-service-gitea","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/self-hosted-git-service-gitea.md","source":"@site/blog/self-hosted-git-service-gitea.md","title":"Gitea\uff1a\u8f7b\u91cf\u7ea7\u81ea\u5efa Git \u670d\u52a1","description":"\u524d\u8a00","date":"2022-05-21T00:00:00.000Z","formattedDate":"2022\u5e745\u670821\u65e5","tags":[{"label":"git","permalink":"/blog/tags/git"},{"label":"docker","permalink":"/blog/tags/docker"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-05-21T00:00:00.000Z","tags":["git","docker"]},"prevItem":{"title":"restic\uff1a\u8f7b\u91cf\u3001\u8de8\u5e73\u53f0\u7684\u589e\u91cf\u5907\u4efd\u5de5\u5177","permalink":"/blog/restic-backup-tool"},"nextItem":{"title":"Scoop\uff1a\u7528 aria2 \u52a0\u901f\u4e0b\u8f7d","permalink":"/blog/scoop-with-aria2-for-multi-thread-download"}},"content":"## \u524d\u8a00\\n\\n\u6700\u8fd1\u53d1\u751f\u4e86\u4e00\u4e9b\u4e8b\u4ef6\uff1aGithub \u5c01\u7981\u67d0\u4e9b\u56fd\u5bb6\u7528\u6237\u7684\u8d26\u53f7\uff1bGitee \u516c\u5f00\u4ed3\u5e93\u53d8\u79c1\u6709\uff0c\u516c\u5f00\u9700\u901a\u8fc7\u5ba1\u6838\u3002\\n\\n\u8fd9\u4e9b\u5927\u5e73\u53f0\u63d0\u4f9b\u7684\u670d\u52a1\u770b\u8d77\u6765\u4e5f\u4e0d\u662f\u90a3\u4e48\u53ef\u9760\u3002\u8fd9\u65f6\u5019\u4f60\u53ef\u4ee5\u81ea\u5efa\u4e00\u4e2a Git \u670d\u52a1\u5e73\u53f0\u81ea\u7528\uff0c\u81ea\u5df1\u4fdd\u7ba1\u6570\u636e\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u4e3a\u4ec0\u4e48\u9009\u62e9 Gitea\\n\\n\u4e0b\u9762\u5217\u51fa\u4e86 Gitea[^1] \u7684\u4f18\u70b9\u3002\\n\\n1. Gitea \u5360\u7528\u8d44\u6e90\u4f4e\uff0c300MB \u5185\u5b58\u8db3\u4ee5\u6ee1\u8db3\u4e2a\u4eba\u4f7f\u7528\uff0c\u5176\u5728\u5b98\u65b9\u7f51\u9875\u4e0a\u7684\u4ecb\u7ecd\u8bf4\u660e\u5728\u6811\u8393\u6d3e\u4e0a\u8db3\u4ee5\u8fd0\u884c\uff1b\\n2. \u7528 Go \u8bed\u8a00\u5b9e\u73b0\uff0c\u53ef\u4ee5\u90e8\u7f72\u5728\u5f88\u591a\u5e73\u53f0\u4e0a\uff0c\u5e76\u4e14\u4e0d\u4f1a\u6709\u4f9d\u8d56\u95ee\u9898\uff1b\\n3. \u5b89\u88c5\u65b9\u4fbf\uff0c\u4f7f\u7528 Docker \u53ef\u4ee5\u76f4\u63a5\u90e8\u7f72\uff1b\\n4. \u5916\u90e8\u4f9d\u8d56\u5c11\uff0c\u53ef\u4ee5\u4f7f\u7528 SQLite \u4f5c\u4e3a\u6570\u636e\u5e93\uff0c\u4e2a\u4eba\u4f7f\u7528\u5b8c\u5168\u8db3\u591f\uff0c\u6570\u636e\u8fc1\u79fb\u4e5f\u65b9\u4fbf\uff1b\\n5. \u5f00\u6e90\uff1b\\n6. \u529f\u80fd\u4e30\u5bcc\uff0c\u4ed3\u5e93\u6709 Issues\u3001Pull Requests\u3001Projects\u3001Releases\u3001Wiki \u4ee5\u53ca Activity \u7b49\u677f\u5757\uff1b\u5e76\u4e14\u53ef\u4ee5\u8bbe\u7f6e Webhooks\u3001Push Mirrow\u3001\u955c\u50cf\u4ed3\u5e93\u7b49\u3002\\n7. \u7528\u6237\u754c\u9762\u6a21\u4eff Github\uff0c\u5b66\u4e60\u6210\u672c\u4f4e\uff0c\u4f7f\u7528\u4f53\u9a8c\u826f\u597d\uff1b\\n8. \u6709\u5b8c\u6574\u7684\u7528\u6237\u548c\u7ec4\u7ec7\u7cfb\u7edf\u3002\\n\\nGitea \u6ca1\u6709\u96c6\u6210 CI/CD \u5de5\u5177\uff0c\u56e0\u4e3a CI/CD \u5de5\u5177\u6bd4\u8f83\u8017\u8d44\u6e90\u3002\\n\\n## \u5b89\u88c5\\n\\n\u53ef\u4ee5\u4f7f\u7528 Docker Compose \u5feb\u901f\u90e8\u7f72 Gitea \u5b9e\u4f8b\u3002\\n\\n\u4ee5\u4e0b\u662f`docker-compose.yml`\u7684\u5185\u5bb9\u793a\u4f8b\u3002\\n\\n```yml\\nversion: \\"3\\"\\nservices:\\n  server:\\n    image: gitea/gitea\\n    restart: unless-stopped\\n    ports:\\n      - 127.0.0.1:13000:3000\\n      - 127.0.0.1:2222:22\\n    volumes:\\n      - data:/data\\nvolumes:\\n  data:\\n```\\n\\n\u4ee5\u4e0b\u662f\u5bf9`docker-compose.yml`\u6587\u4ef6\u7684\u7b80\u77ed\u8bf4\u660e\u3002\\n\\n- `ports`\uff1a\u5bb9\u5668\u7684 3000 \u7aef\u53e3\u4e3a Web UI \u7684\u76d1\u542c\u7aef\u53e3\uff1b\u5bb9\u5668\u7684 22 \u7aef\u53e3\u4e3a SSH \u7aef\u53e3\uff0c\u7528\u4e8e SSH \u65b9\u5f0f\u8bbf\u95ee Git \u4ed3\u5e93\uff1b\\n- `volumes`\uff1aGitea \u7684\u6570\u636e\u90fd\u4fdd\u5b58\u5728\u5bb9\u5668\u5185\u7684`/data`\u76ee\u5f55\u4e2d\uff0c\u5305\u62ec\u6240\u6709 Git \u4ed3\u5e93\u7684\u6587\u4ef6\u90fd\u4fdd\u5b58\u5728\u6b64\u76ee\u5f55\u4e2d\u3002\\n\\n## \u53cd\u5411\u4ee3\u7406\u4ee5\u53ca HTTPS \u914d\u7f6e\\n\\n\u53ef\u4ee5\u4f7f\u7528 Web \u670d\u52a1\u5668\u5bf9 Gitea \u7684 Web UI \u8fdb\u884c\u53cd\u5411\u4ee3\u7406\uff0c\u901a\u8fc7\u57df\u540d\u66b4\u9732\u5728\u516c\u7f51\u4e2d\u3002\\n\\n\u4e0b\u9762\u662f\u4f7f\u7528 Caddy \u8fdb\u884c\u53cd\u5411\u4ee3\u7406\u7684\u793a\u4f8b\uff0c\u8fd9\u662f Caddyfile \u7684\u90e8\u5206\u5185\u5bb9\u3002Caddy \u4f1a\u81ea\u52a8\u7533\u8bf7\u57df\u540d\u8bc1\u4e66\u5e76\u914d\u7f6e HTTPS\u3002\\n\\n```caddyfile\\n*.iuok.me {\\n\\ttls {\\n\\t\\tdns cloudflare xxxxxx\\n\\t}\\n\\n\\t@gitea host gitea.iuok.me\\n\\thandle @gitea {\\n\\t\\treverse_proxy localhost:13000\\n\\t\\timport hsts\\n\\t}\\n\\n\\thandle {\\n\\t\\tabort\\n\\t}\\n}\\n```\\n\\n## \u521d\u6b21\u8bbe\u7f6e\\n\\n\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u4f60\u7684 Gitea \u57df\u540d\u8fdb\u884c\u8bbf\u95ee\uff0c\u521d\u6b21\u8bbf\u95ee\u7684\u65f6\u5019\u4f1a\u8fdb\u5165\u8bbe\u7f6e\u9875\u9762\u3002\\n\\n\u53ef\u4ee5\u9009\u62e9\u662f\u5426\u5f00\u542f SSH\uff0c\u5982\u679c\u628a SSH \u7aef\u53e3\u8bbe\u7f6e\u4e3a 0 \u5219\u610f\u5473\u5173\u95ed SSH \u8bbf\u95ee\u3002\\n\\n\u5b8c\u6210\u5b89\u88c5\u540e\u5982\u679c\u518d\u9700\u8981\u66f4\u6539\u67d0\u4e9b\u8bbe\u7f6e\u9700\u8981\u624b\u52a8\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u66f4\u6539\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e\u5bb9\u5668\u4e2d\u7684`/data/gitea/conf/app.ini`\u3002\u914d\u7f6e\u6587\u4ef6\u7684\u914d\u7f6e\u7ec6\u8282\u53ef\u4ee5\u53c2\u8003\u5176\u5b98\u65b9\u6587\u6863 [^2]\u3002\\n\\n## \u4f7f\u7528\\n\\n\u5982\u679c\u4f60\u53ea\u60f3\u81ea\u5df1\u4e00\u4e2a\u4eba\u7528\u7684\u8bdd\u9700\u8981\u8bbe\u7f6e\u4e0d\u5141\u8bb8\u65b0\u7528\u6237\u6ce8\u518c\uff0c\u5e76\u4e14\u628a\u81ea\u5df1\u7684\u8d26\u53f7\u548c\u4ed3\u5e93\u90fd\u8bbe\u7f6e\u4e3a\u79c1\u6709\u7684\uff1b\u516c\u5171\u7684\u4ed3\u5e93\u53ef\u4ee5\u5728\u4e3b\u9875\u88ab\u8bbf\u5ba2\u6d4f\u89c8\u3002\\n\\n\u4f7f\u7528\u4f53\u9a8c\u548c Github \u5dee\u4e0d\u591a\u3002\\n\\n## \u53cc\u56e0\u7d20\u8ba4\u8bc1\\n\\n\u4e3a\u4e86\u63d0\u9ad8\u8d26\u6237\u7684\u5b89\u5168\u6027\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u8d26\u6237\u7684\u53cc\u56e0\u7d20\u8ba4\u8bc1\u3002\\n\\n\u5728\u300cSettings\u300d->\u300cSecurity\u300d->\u300cTwo-Factor Authentication\u300d\u4e2d\u53ef\u4ee5\u5f00\u542f\u53cc\u56e0\u7d20\u8ba4\u8bc1\u3002\u4f7f\u7528\u652f\u6301 TOTP \u7684\u4ee4\u724c\u8f6f\u4ef6\u90fd\u53ef\u4ee5\u751f\u6210\u767b\u5f55\u4ee4\u724c\uff1b\u5982 Authy\u3001Google Authenticator \u6216 Bitwarden \u7b49\u8f6f\u4ef6\u3002\\n\\n\u5f00\u542f\u4e4b\u540e\u5728\u767b\u5f55\u65f6\u9664\u4e86\u8f93\u5165\u5bc6\u7801\u4e4b\u5916\uff0c\u8fd8\u4f1a\u8981\u6c42\u4f60\u8f93\u5165\u4e00\u4e2a\u52a8\u6001\u9a8c\u8bc1\u7801\uff0c\u8be5\u9a8c\u8bc1\u7801\u968f\u65f6\u95f4\u53d8\u5316\u3002\\n\\n\u5f00\u4e86\u53cc\u56e0\u7d20\u8ba4\u8bc1\u4e4b\u540e\u5728\u4f7f\u7528 HTTPS \u65b9\u5f0f\u8bbf\u95ee Git \u4ed3\u5e93\u65f6\u5c31\u4e0d\u80fd\u7528\u539f\u6765\u7684\u5bc6\u7801\u4e86\uff0c\u9700\u8981\u4f60\u5355\u72ec\u751f\u6210\u4e00\u4e2a Access Token \u6765\u8bbf\u95ee\u4ed3\u5e93\u3002Access Token \u9700\u8981\u5728\u300cSettings\u300d->\u300cApplications\u300d->\u300cManage Access Tokens\\n\u300d\u4e2d\u521b\u5efa\u3002\\n\\n## \u955c\u50cf\u4ed3\u5e93\\n\\n\u5728 Gitea \u4e2d\u53ef\u4ee5\u521b\u5efa\u955c\u50cf\u4ed3\u5e93\uff0c\u7528\u4e8e\u5b9a\u65f6\u4ece\u6e90\u4ed3\u5e93\u4e2d\u540c\u6b65\u5185\u5bb9\u3002\\n\\n\u5728\u521b\u5efa\u4ed3\u5e93\u7684\u65f6\u5019\u9009\u62e9\u8fc1\u79fb\u4ed3\u5e93\uff0c\u5728\u8fc1\u79fb\u9009\u9879\u4e2d\u52fe\u9009\u300cThis repository will be a mirror\u300d\u5373\u53ef\u521b\u5efa\u4e00\u4e2a\u955c\u50cf\u4ed3\u5e93\u3002\\n\\n\u53ea\u6709\u521b\u5efa\u4ed3\u5e93\u7684\u65f6\u5019\u53ef\u4ee5\u9009\u62e9\u521b\u5efa\u955c\u50cf\u4ed3\u5e93\uff0c\u4e0d\u53ef\u4ee5\u628a\u73b0\u6709\u4ed3\u5e93\u6539\u4e3a\u955c\u50cf\u4ed3\u5e93\uff1b\u955c\u50cf\u4ed3\u5e93\u4e4b\u540e\u53ef\u4ee5\u6539\u4e3a\u666e\u901a\u4ed3\u5e93\u3002\\n\\n## \u6570\u636e\u5907\u4efd\\n\\n\u81ea\u5efa\u7684\u670d\u52a1\u8981\u505a\u597d\u6570\u636e\u5907\u4efd\u5de5\u4f5c\uff0c\u56e0\u4e3a VPS \u63d0\u4f9b\u5546\u4e5f\u4e0d\u4e00\u5b9a\u53ef\u9760\uff0c\u4e5f\u6709\u53ef\u80fd\u53d1\u751f\u610f\u5916\u4e8b\u6545\uff0c\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002\\n\\nGitea \u7684\u6570\u636e\u6587\u4ef6\u7ed3\u6784\u6bd4\u8f83\u7b80\u5355\uff0c\u76f4\u63a5\u5907\u4efd Docker Volume \u5bf9\u5e94\u7684\u76ee\u5f55\u5373\u53ef\u3002\\n\\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cDocker Volume \u4f4d\u4e8e`/var/lib/docker/volume`\u4e0b\uff0c\u5907\u4efd`docker-compose.yml`\u4e2d\u5bf9\u5e94\u7684\u6570\u636e\u5377\u4e2d\u7684\u5185\u5bb9\u5373\u53ef\u3002\\n\\n\u53ef\u4ee5\u4f7f\u7528 restic \u5907\u4efd\u5230\u5176\u5b83\u670d\u52a1\u5546\u63d0\u4f9b\u7684\u5bf9\u8c61\u5b58\u50a8\u4e2d\uff1b\u6ce8\u610f\u8981\u5f02\u5730\u5907\u4efd\uff0c\u5907\u4efd\u5728\u672c\u673a\u65e0\u610f\u4e49\u3002\\n\\n\u6062\u590d\u6570\u636e\u7684\u65f6\u5019\u624b\u52a8\u521b\u5efa Volume\uff0c\u628a\u5907\u4efd\u5185\u5bb9\u8fd8\u539f\uff0c\u7136\u540e\u518d\u542f\u52a8 Gitea \u5bb9\u5668\u5373\u53ef\u3002\\n\\n\\n[^1]: [Gitea](https://gitea.io/en-us/)\\n[^2]: [Documentation - Docs](https://docs.gitea.io/en-us/)"},{"id":"/scoop-with-aria2-for-multi-thread-download","metadata":{"permalink":"/blog/scoop-with-aria2-for-multi-thread-download","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/scoop-with-aria2-for-multi-thread-download.md","source":"@site/blog/scoop-with-aria2-for-multi-thread-download.md","title":"Scoop\uff1a\u7528 aria2 \u52a0\u901f\u4e0b\u8f7d","description":"\u524d\u8a00","date":"2022-03-09T00:00:00.000Z","formattedDate":"2022\u5e743\u67089\u65e5","tags":[{"label":"scoop","permalink":"/blog/tags/scoop"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-03-09T00:00:00.000Z","tags":["scoop"]},"prevItem":{"title":"Gitea\uff1a\u8f7b\u91cf\u7ea7\u81ea\u5efa Git \u670d\u52a1","permalink":"/blog/self-hosted-git-service-gitea"},"nextItem":{"title":"Nodebrew\uff1aNode.js \u5b89\u88c5\u4ee5\u53ca\u7248\u672c\u5207\u6362","permalink":"/blog/nodebrew-the-nodejs-version-manager"}},"content":"## \u524d\u8a00\\n\\naria2[^1] \u662f\u4e00\u6b3e\u6d41\u884c\u7684\u591a\u7ebf\u7a0b\u4e0b\u8f7d\u5668\u3002Scoop \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528\u5355\u7ebf\u7a0b\u4e0b\u8f7d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5b89\u88c5 aria2 \u6765\u8ba9 Scoop \u652f\u6301\u591a\u7ebf\u7a0b\u4e0b\u8f7d\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u5b89\u88c5 aria2\\n\\n\u5728 PowerShell \u4e2d\u6267\u884c\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u5b89\u88c5 aria2\u3002\\n\\n```powershell\\nscoop install aria2\\n```\\n\\n\u4e0d\u9700\u8981\u591a\u4f59\u914d\u7f6e\uff0cScoop \u5728\u6267\u884c\u4e0b\u8f7d\u52a8\u4f5c\u524d\u4f1a\u68c0\u6d4b\u4f60\u662f\u5426\u5b89\u88c5\u4e86 aria2\uff0c\u5982\u679c\u68c0\u6d4b\u5230\u4f60\u5df2\u7ecf\u5b89\u88c5\u4e86 aria2 \u5219\u81ea\u52a8\u8c03\u7528\u5176\u8fdb\u884c\u591a\u7ebf\u7a0b\u4e0b\u8f7d\u3002\\n\\n## \u914d\u7f6e aria2\\n\\n\u5728 Scoop \u4e2d\u6709\u4e00\u4e9b\u5173\u4e8e aria2 \u7684\u914d\u7f6e [^2]\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4f60\u53ef\u80fd\u60f3\u4e86\u89e3\u3002\\n\\n| \u914d\u7f6e\u9879                            | \u9ed8\u8ba4\u503c | \u8bf4\u660e                                                         |\\n| --------------------------------- | ------ | ------------------------------------------------------------ |\\n| `aria2-enabled`                   | `true` | \u662f\u5426\u542f\u7528 aria2                                                |\\n| `aria2-warning-enabled`           | `true` | \u662f\u5426\u5728\u6bcf\u6b21\u4e0b\u8f7d\u4e4b\u524d\u8f93\u51fa\u63d0\u793a\u4fe1\u606f\uff0c\u5185\u5bb9\u4e3a aria2 \u4e0b\u8f7d\u7684\u8bf4\u660e        |\\n| `aria2-retry-wait`                | `2`    | aria2 \u91cd\u8bd5\u7b49\u5f85\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2                                  |\\n| `aria2-split`                     | `5`    | \u4e0b\u8f7d\u65f6\u4f7f\u7528\u7684\u94fe\u63a5\u6570                                           |\\n| `aria2-max-connection-per-server` | `5`    | \u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u6700\u5927\u8fde\u63a5\u6570                                       |\\n| `aria2-min-split-size`            | `5M`   | \u6700\u5c0f\u5206\u6bb5\u5927\u5c0f\uff0c\u5982\u679c\u5c06\u8981\u4e0b\u8f7d\u7684\u6587\u4ef6\u5927\u5c0f\u5c0f\u4e8e\u8be5\u53c2\u6570\u7684 2 \u500d\uff0c\u5219\u4e0b\u8f7d\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u5bf9\u6587\u4ef6\u8fdb\u884c\u5206\u6bb5 |\\n| `aria2-options`                   |        | \u5176\u5b83\u9700\u8981\u4f20\u9012\u7ed9 aria2 \u7684\u53c2\u6570\uff0c\u53ef\u4ee5\u53c2\u8003 aria2 \u7684\u6587\u6863 [^3]           |\\n\\n\u4f60\u53ef\u4ee5\u901a\u8fc7`scoop config`\u547d\u4ee4\u6765\u66f4\u6539\u8fd9\u4e9b\u914d\u7f6e\u9879\u7684\u503c\u3002\\n\\n\u4f8b\u5982\u4f60\u60f3\u505c\u6b62\u4f7f\u7528 aria2 \u8fdb\u884c\u591a\u7ebf\u7a0b\u4e0b\u8f7d\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u5b9e\u73b0\u3002\\n\\n```powershell\\nscoop config aria2-enabled false\\n```\\n\\n[^1]: [aria2/aria2: aria2 is a lightweight multi-protocol & multi-source, cross platform download utility operated in command-line. It supports HTTP/HTTPS, FTP, SFTP, BitTorrent and Metalink.](https://github.com/aria2/aria2)\\n[^2]: [ScoopInstaller/Scoop: A command-line installer for Windows.](https://github.com/ScoopInstaller/scoop#multi-connection-downloads-with-aria2)\\n[^3]: [aria2c(1) \u2014 aria2 1.36.0 documentation](https://aria2.github.io/manual/en/html/aria2c.html#options)"},{"id":"/nodebrew-the-nodejs-version-manager","metadata":{"permalink":"/blog/nodebrew-the-nodejs-version-manager","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/nodebrew-the-nodejs-version-manager.md","source":"@site/blog/nodebrew-the-nodejs-version-manager.md","title":"Nodebrew\uff1aNode.js \u5b89\u88c5\u4ee5\u53ca\u7248\u672c\u5207\u6362","description":"\u524d\u8a00","date":"2022-02-25T00:00:00.000Z","formattedDate":"2022\u5e742\u670825\u65e5","tags":[{"label":"nodejs","permalink":"/blog/tags/nodejs"},{"label":"linux","permalink":"/blog/tags/linux"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-02-25T00:00:00.000Z","tags":["nodejs","linux"]},"prevItem":{"title":"Scoop\uff1a\u7528 aria2 \u52a0\u901f\u4e0b\u8f7d","permalink":"/blog/scoop-with-aria2-for-multi-thread-download"},"nextItem":{"title":"Linuxbrew\uff1aLinux \u4e0a\u7684 Homebrew","permalink":"/blog/linuxbrew-the-homebrew-on-linux"}},"content":"## \u524d\u8a00\\n\\n\u5728\u8bb8\u591a Linux \u5305\u7ba1\u7406\u5668\u4e2d Node.js \u7684\u7248\u672c\u6bd4\u8f83\u6df7\u4e71\uff0c\u6216\u8005\u5728\u5b98\u65b9\u8f6f\u4ef6\u4ed3\u5e93\u4e2d\u4e0d\u5b58\u5728 Node.js \u8f6f\u4ef6\u5305\uff1b\u81ea\u5df1\u52a8\u624b\u5b89\u88c5\u53c8\u6bd4\u8f83\u7e41\u7410\uff1b\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u9700\u8981\u5207\u6362 Node.js \u7248\u672c\u5c31\u66f4\u9ebb\u70e6\u4e86\uff0c\u8fd9\u65f6 Nodebrew[^1] \u5c31\u6d3e\u4e0a\u7528\u573a\u4e86\u3002\\n\\nNodebrew \u662f Node.js \u7248\u672c\u7ba1\u7406\u5668\uff0c\u7528 Perl \u7f16\u5199\uff0c\u53ef\u4ee5\u7b80\u5316\u4f60\u5173\u4e8e Node.js \u5b89\u88c5\u3001\u5378\u8f7d\u3001\u7248\u672c\u7ba1\u7406\u7b49\u8fc7\u7a0b\u3002\\n\\nNodebrew \u6ca1\u6709\u4e3a Windows \u800c\u8bbe\u8ba1\uff0c\u4e0d\u652f\u6301\u5728 Windows \u4f7f\u7528\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u5b89\u88c5\\n\\nNodebrew \u7684\u5b89\u88c5\u8fc7\u7a0b\u5c31\u662f\u628a Perl \u811a\u672c\u4e0b\u8f7d\u5230\u672c\u5730\uff0c\u7136\u540e\u5c06\u5176\u6240\u5728\u7684\u76ee\u5f55\u52a0\u5165`PATH`\u4e2d\u3002\\n\\n### \u5b89\u88c5\u4f4d\u7f6e\\n\\n\u4f60\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf`NODEBREW_ROOT`\u6765\u6307\u5b9a Nodebrew \u7684\u5b89\u88c5\u4f4d\u7f6e\u3002\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u7701\u7565\u8fd9\u4e00\u6b65\u9aa4\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e2a\u73af\u5883\u53d8\u91cf\uff0cNodebrew \u4f1a\u9ed8\u8ba4\u5b89\u88c5\u5728`$HOME/.nodebrew`\u3002\\n\\n### \u901a\u8fc7\u5b89\u88c5\u811a\u672c\u5b89\u88c5\\n\\n\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u4e0b\u8f7d Nodebrew \u5230\u672c\u5730\u3002\\n\\n```bash\\ncurl -L git.io/nodebrew | perl - setup\\n```\\n\\n\u4e4b\u540e\u4f60\u8fd8\u9700\u8981\u5c06\u5176\u52a0\u5165\u5230`PATH`\u4e2d\u3002\u4f60\u9700\u8981\u5c06\u4e0b\u9762\u7684\u547d\u4ee4\uff08\u4e8c\u9009\u4e00\uff09\u52a0\u5165\u5230\u4f60\u7684 Shell \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u4f8b\u5982`/etc/profile`\u3001`~/.profile`\u6216`~/.bashrc`\u7b49\u6587\u4ef6\u3002\\n\\n```bash\\n# Node.js \u5b89\u88c5\u5728\u7528\u6237\u76ee\u5f55\uff0c\u6bcf\u4e2a\u7528\u6237\u72ec\u7acb\\nexport PATH=$HOME/.nodebrew/current/bin:$PATH\\n```\\n\\n```bash\\n# Node.js \u5b89\u88c5\u5728\u7edf\u4e00\u76ee\u5f55\uff0c\u6240\u6709\u7528\u6237\u5171\u7528\\n# \u8bf7\u4fee\u6539 NODEBREW_ROOT \u4e3a\u4f60\u671f\u671b\u7684\u5b89\u88c5\u4f4d\u7f6e\\nexport NODEBREW_ROOT=/somewhere\\nexport PATH=$NODEBREW_ROOT/current/bin:$PATH\\n```\\n\\n\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u5c31\u662f\u4f60\u4e0a\u4e00\u6b65\u9aa4\u4e2d\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u6216\u8005\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u91cd\u65b0\u767b\u5f55\u7ec8\u7aef\u6765\u4f7f\u914d\u7f6e\u751f\u6548\u3002\\n\\n```bash\\nsource /etc/profile\\n```\\n\\n\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u521d\u59cb\u5316 Nodebrew \u6587\u4ef6\u5939\u3002\\n\\n```bash\\nnodebrew setup_dirs\\n```\\n\\n### \u901a\u8fc7 Homebrew \u6765\u5b89\u88c5\\n\\nHomebrew[^2] \u662f\u4e00\u4e2a\u5305\u7ba1\u7406\u5668\uff0c\u7531 Ruby \u7f16\u5199\uff0c\u53ef\u4ee5\u5728 macOS \u6216 Linux \u5e73\u53f0\u4e0a\u8fd0\u884c\u3002\\n\\n\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u901a\u8fc7`brew`\u547d\u4ee4\u5b89\u88c5 Nodebrew\u3002\\n\\n```bash\\nbrew install nodebrew\\n```\\n\\n\u4e4b\u540e\u4f60\u8fd8\u9700\u8981\u5c06\u5176\u52a0\u5165\u5230`PATH`\u4e2d\u3002\u4f60\u9700\u8981\u5c06\u4e0b\u9762\u7684\u547d\u4ee4\uff08\u4e8c\u9009\u4e00\uff09\u52a0\u5165\u5230\u4f60\u7684 Shell \u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u4f8b\u5982`/etc/profile`\u3001`~/.profile`\u6216`~/.bashrc`\u7b49\u6587\u4ef6\u3002\\n\\n```bash\\n# Node.js \u5b89\u88c5\u5728\u7528\u6237\u76ee\u5f55\uff0c\u6bcf\u4e2a\u7528\u6237\u72ec\u7acb\\nexport PATH=$HOME/.nodebrew/current/bin:$PATH\\n```\\n\\n```bash\\n# Node.js \u5b89\u88c5\u5728\u7edf\u4e00\u76ee\u5f55\uff0c\u6240\u6709\u7528\u6237\u5171\u7528\\nexport NODEBREW_ROOT=$HOMEBREW_PREFIX/var/nodebrew\\nexport PATH=$NODEBREW_ROOT/current/bin:$PATH\\n```\\n\\n\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\uff0c\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u5c31\u662f\u4f60\u4e0a\u4e00\u6b65\u9aa4\u4e2d\u4fee\u6539\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u3002\u6216\u8005\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u91cd\u65b0\u767b\u5f55\u7ec8\u7aef\u6765\u4f7f\u914d\u7f6e\u751f\u6548\u3002\\n\\n```bash\\nsource /etc/profile\\n```\\n\\n\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u521d\u59cb\u5316 Nodebrew \u6587\u4ef6\u5939\u3002\\n\\n```bash\\nnodebrew setup_dirs\\n```\\n\\n## \u4f7f\u7528\\n\\n\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u5b89\u88c5\u5e76\u4f7f\u7528\u6700\u65b0\u7a33\u5b9a\u7248\u7684 Node.js\u3002\u4e4b\u540e`node`\u548c`npm`\u547d\u4ee4\u5c31\u53ef\u4ee5\u7528\u4e86\u3002\\n\\n```bash\\nnodebrew install stable\\nnodebrew use stable\\n```\\n\\n\u66f4\u591a\u4f7f\u7528\u5e2e\u52a9\u8bf7\u53c2\u8003\u5176 Github \u4ed3\u5e93 [^1] \u9875\u9762\u548c\u547d\u4ee4\u884c\u4e2d\u63d0\u4f9b\u7684\u8bf4\u660e\u4fe1\u606f\u3002\\n\\n[^1]: [hokaccha/nodebrew: Node.js version manager](https://github.com/hokaccha/nodebrew)\\n[^2]: [The Missing Package Manager for macOS (or Linux) \u2014 Homebrew](https://brew.sh/)"},{"id":"/linuxbrew-the-homebrew-on-linux","metadata":{"permalink":"/blog/linuxbrew-the-homebrew-on-linux","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/linuxbrew-the-homebrew-on-linux.md","source":"@site/blog/linuxbrew-the-homebrew-on-linux.md","title":"Linuxbrew\uff1aLinux \u4e0a\u7684 Homebrew","description":"\u524d\u8a00","date":"2022-02-24T00:00:00.000Z","formattedDate":"2022\u5e742\u670824\u65e5","tags":[{"label":"linux","permalink":"/blog/tags/linux"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-02-24T00:00:00.000Z","tags":["linux"]},"prevItem":{"title":"Nodebrew\uff1aNode.js \u5b89\u88c5\u4ee5\u53ca\u7248\u672c\u5207\u6362","permalink":"/blog/nodebrew-the-nodejs-version-manager"},"nextItem":{"title":"\u4f18\u96c5\u5730\u91cd\u8f7d Caddyfile","permalink":"/blog/reload-caddyfile-gracefully"}},"content":"## \u524d\u8a00\\n\\nHomebrew[^1] \u662f\u4e00\u6b3e\u7528 Ruby \u7f16\u5199\u7684\u3001\u9488\u5bf9 macOS \u7cfb\u7edf\u7684\u5305\u7ba1\u7406\u5668\u3002\u540e\u6765\u53c8\u66f4\u65b0\u4e86\u5bf9 Linux \u7684\u652f\u6301\uff0c\u73b0\u5728\u4f60\u53ef\u4ee5\u5728\u4f60\u7684 Linux \u7cfb\u7edf\u4e2d\u5f15\u5165\u4e00\u4e2a\u65b0\u7684\u5305\u7ba1\u7406\u5668 Linuxbrew\u3002\\n\\nLinuxbrew \u53ef\u4ee5\u662f\u5bf9\u7cfb\u7edf\u4e2d\u9ed8\u8ba4\u5305\u7ba1\u7406\u5668\u7684\u8865\u5145\u3002\u6709\u4e9b\u9700\u8981\u7684\u8f6f\u4ef6\u5305\u5e76\u4e0d\u6536\u5f55\u5728\u5b98\u65b9\u7684\u8f6f\u4ef6\u4ed3\u5e93\u4e2d\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5c31\u9700\u8981\u4f60\u81ea\u5df1\u4e0b\u8f7d\u6216\u7f16\u8bd1\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u81ea\u5df1\u5b89\u88c5\u3002Linuxbrew/Homebrew \u7684\u8f6f\u4ef6\u5305\u6536\u5f55\u8303\u56f4\u5e7f\u3001\u66f4\u65b0\u9891\u7387\u9ad8\uff0c\u53ef\u4ee5\u7b80\u5316\u4f60\u5b89\u88c5\u8f6f\u4ef6\u5305\u7684\u8fc7\u7a0b\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u5b89\u88c5\u4f9d\u8d56\\n\\nLinuxbrew \u7684\u5b89\u88c5\u548c\u4f7f\u7528\u7684\u8fc7\u7a0b\u4f9d\u8d56 Git\u3002Linuxbrew \u5728\u5b89\u88c5\u8f6f\u4ef6\u5305\u65f6\u53ef\u80fd\u4f1a\u4ece\u6e90\u7801\u5728\u672c\u673a\u4e0a\u7f16\u8bd1\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u6240\u4ee5\u9700\u8981\u7528\u5230 GCC \u548c glibc\u3002\\n\\n\u5982\u679c\u4f60\u7684\u64cd\u4f5c\u7cfb\u7edf\u662f`Debian`\u6216\u5176\u6d3e\u751f\u7684\u53d1\u884c\u7248\uff0c\u53ef\u4ee5\u7528`apt`\u6765\u5b89\u88c5\u8fd9\u4e9b\u8f6f\u4ef6\u5305\u3002\\n\\n```bash\\napt install build-essential procps curl file git\\n```\\n\\n\u5982\u679c\u4f60\u4f7f\u7528\u7684\u64cd\u4f5c\u7cfb\u7edf\u662f Red Hat \u7cfb\u7684\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528`yum`\u6765\u5b89\u88c5\u8fd9\u4e9b\u8f6f\u4ef6\u5305\u3002\\n\\n```bash\\nsudo yum groupinstall \'Development Tools\'\\nsudo yum install procps-ng curl file git\\nsudo yum install libxcrypt-compat # needed by Fedora 30 and up\\n```\\n\\n\u8fd9\u4e9b\u5b89\u88c5\u547d\u4ee4\u53c2\u8003\u81ea Homebrew \u6587\u6863\u4e2d\u7684 Homebrew on Linux \u90e8\u5206 [^2]\u3002\\n\\n## \u5b89\u88c5 Linuxbrew\\n\\nLinuxbrew \u672c\u8eab\u548c\u5176\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u90fd\u5b58\u653e\u5728\u7528\u6237\u76ee\u5f55\u4e0b\uff0c\u6240\u4ee5\u5b89\u88c5\u548c\u4f7f\u7528 Linuxbrew \u4e0d\u8981\u6c42 root \u6743\u9650\u3002\u5b9e\u9645\u4e0a\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0cLinuxbrew \u7981\u6b62\u4f60\u7528 root \u6743\u9650\u8fd0\u884c\u5b83\uff0c\u56e0\u4e3a\u8f6f\u4ef6\u5305\u7684\u5b89\u88c5\u811a\u672c\u5728 root \u6743\u9650\u4e0b\u53ef\u80fd\u4f1a\u7834\u574f\u4f60\u7684\u7cfb\u7edf\uff08\u4e0d\u7ba1\u662f\u6709\u610f\u8fd8\u662f\u65e0\u610f\u7684\uff09\u3002\\n\\nLinuxbrew \u63a8\u8350\u4f60\u5c06\u5b83\u5b89\u88c5\u5728 linuxbrew \u7684\u7528\u6237\u76ee\u5f55\u4e0b\uff0c\u8be5\u76ee\u5f55\u4f4d\u4e8e`/home/linuxbrew/.linuxbrew`\uff0cLinuxbrew \u672c\u8eab\u548c\u5b83\u6240\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u90fd\u4f1a\u5b58\u653e\u4e8e\u6b64\u76ee\u5f55\u4e2d\u3002\\n\\n\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a linuxbrew \u7684\u7528\u6237\uff0c\u5e76\u914d\u7f6e\u5176\u7528\u6237\u76ee\u5f55\u3002\\n\\n```bash\\nuseradd -s /bin/bash linuxbrew\\nmkdir /home/linuxbrew\\nchown linuxbrew /home/linuxbrew\\n```\\n\\n\u5207\u6362\u5230 linuxbrew \u7528\u6237\uff0c\u6267\u884c\u5b89\u88c5\u811a\u672c\u3002\\n\\n```bash\\nsu - linuxbrew -c \\"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\\"\\n```\\n\\n\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u5c06 Linuxbrew \u7684\u53ef\u6267\u884c\u6587\u4ef6\u76ee\u5f55\u52a0\u5165`PATH`\uff0c\u5e76\u914d\u7f6e\u4e00\u4e9b\u548c Linuxbrew \u76f8\u5173\u7684\u73af\u5883\u53d8\u91cf\u3002\u4fee\u6539`/etc/profile`\u9700\u8981 root \u6743\u9650\uff0c\u4f60\u9700\u8981\u9000\u51fa\u5230 root \u7528\u6237\u3002\\n\\n\\n```bash\\necho $(/home/linuxbrew/.linuxbrew/bin/brew shellenv) >> /etc/profile\\nsource /etc/profile\\n```\\n\\n\u6d4b\u8bd5\u3002\u8fd0\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u6d4b\u8bd5 Linuxbrew \u662f\u5426\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u5982\u679c\u5f97\u5230\u300cYour system is ready to brew.\u300d\u7684\u63d0\u793a\u5219\u8bc1\u660e\u4f60\u7684\u5b89\u88c5\u8fc7\u7a0b\u5982\u671f\u5b8c\u6210\u3002\u5982\u679c\u4f60\u7684 Linuxbrew \u4e0d\u80fd\u6b63\u5e38\u8fd0\u884c\uff0c\u5b83\u5e94\u8be5\u4f1a\u7ed9\u4f60\u63d0\u793a\u3002brew \u8981\u6c42\u7528\u975e root \u6743\u9650\u8fd0\u884c\uff0c\u6240\u4ee5\u4f60\u9700\u8981\u5728\u4f7f\u7528 brew \u547d\u4ee4\u7684\u65f6\u5019\u5148\u5207\u6362\u5230 linuxbrew \u7528\u6237\u3002\u5176\u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u53ef\u4ee5\u5728 root \u7528\u6237\u4e0b\u8fd0\u884c\u3002\\n\\n```bash\\nsu - linuxbrew -c brew doctor\\n```\\n\\n## \u5b89\u88c5\u8f6f\u4ef6\u5305\\n\\n\u5728\u4f7f\u7528`brew`\u547d\u4ee4\u4e4b\u524d\u4f60\u9700\u8981\u5148\u5207\u6362\u5230 Linuxbrew \u7528\u6237\uff0c\u4f46\u662f\u901a\u8fc7 Linuxbrew \u5b89\u88c5\u7684\u8f6f\u4ef6\u5305\u662f\u53ef\u4ee5\u4f9b\u6240\u6709\u7528\u6237\u4f7f\u7528\u7684\u3002\\n\\n\u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u5b89\u88c5\u4e00\u4e2a\u540d\u4e3a hello \u7684\u8f6f\u4ef6\u5305\uff0c\u5176\u63d0\u4f9b\u4e86\u4e00\u4e2a\u540d\u4e3a`hello`\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u7528\u4e8e\u5728\u63a7\u5236\u53f0\u8f93\u51fa\u300cHello, world!\u300d\u3002\\n\\n```bash\\nsu - linuxbrew -c brew install hello\\n```\\n\\n\u4f60\u53ef\u4ee5\u4f7f\u7528`brew search`\u547d\u4ee4\u6765\u641c\u7d22\u8f6f\u4ef6\u5305\uff1b\u6216\u8005\u5728\u7f51\u9875 Homebrew Formulae[^3] \u4e2d\u641c\u7d22\u8f6f\u4ef6\u5305\uff0c\u4f46\u662f\u5e76\u4e0d\u662f\u6240\u6709\u8f6f\u4ef6\u5305\u90fd\u9002\u7528\u4e8e Linux\u3002\\n\\n## \u8fdb\u9636\u4f7f\u7528\\n\\nLinuxbrew \u5176\u5b9e\u5c31\u662f Homebrew\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u8fc7 Homebrew\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Linuxbrew\uff0c\u5c31\u50cf\u5728 macOS \u4e0a\u4e00\u6837\u3002\\n\\n\u5982\u679c\u4f60\u6ca1\u6709\u7528\u8fc7 Homebrew\uff0c\u4f60\u53ef\u4ee5\u53c2\u8003\u4e00\u4e0b`brew help`\u547d\u4ee4\u548c`brew commands`\u547d\u4ee4\u7684\u5e2e\u52a9\u4ee5\u53ca Homebrew \u7684\u5b98\u65b9\u6587\u6863 [^4]\u3002\\n\\n[^1]: [The Missing Package Manager for macOS (or Linux) \u2014 Homebrew](https://brew.sh/)\\n[^2]: [Homebrew on Linux \u2014 Homebrew Documentation](https://docs.brew.sh/Homebrew-on-Linux)\\n[^3]: [homebrew-core \u2014 Homebrew Formulae](https://formulae.brew.sh/formula/)\\n[^4]: [Documentation \u2014 Homebrew Documentation](https://docs.brew.sh/)"},{"id":"/reload-caddyfile-gracefully","metadata":{"permalink":"/blog/reload-caddyfile-gracefully","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/reload-caddyfile-gracefully.md","source":"@site/blog/reload-caddyfile-gracefully.md","title":"\u4f18\u96c5\u5730\u91cd\u8f7d Caddyfile","description":"\u524d\u8a00","date":"2022-01-23T00:00:00.000Z","formattedDate":"2022\u5e741\u670823\u65e5","tags":[{"label":"caddy","permalink":"/blog/tags/caddy"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-01-23T00:00:00.000Z","tags":["caddy"]},"prevItem":{"title":"Linuxbrew\uff1aLinux \u4e0a\u7684 Homebrew","permalink":"/blog/linuxbrew-the-homebrew-on-linux"},"nextItem":{"title":"\u4f7f\u7528 Caddy \u81ea\u52a8\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66","permalink":"/blog/wildcard-certificates-with-caddy"}},"content":"## \u524d\u8a00\\n\\n\u4fee\u6539 Caddyfile \u4e4b\u540e\u4e0d\u9700\u8981\u91cd\u65b0\u542f\u52a8 Caddy \u670d\u52a1\uff0cCaddy \u63d0\u4f9b\u4e86`caddy reload`\u547d\u4ee4\u53ef\u4ee5\u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u3002\\n\\n\u8bb0\u5f55\u4e24\u4e2a\u811a\u672c\u7528\u4e8e\u683c\u5f0f\u5316 Caddyfile \u5e76\u91cd\u8f7d\u914d\u7f6e\u6587\u4ef6\u3002\u811a\u672c\u7684\u5185\u5bb9\u53ef\u80fd\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4f5c\u67d0\u4e9b\u4fee\u6539\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## Docker\\n\\n\u5982\u679c\u4f60\u4f7f\u7528`docker`\u547d\u4ee4\u542f\u52a8 Caddy \u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u811a\u672c\u6765\u8ba9 Caddy \u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u3002\u8be5\u811a\u672c\u5185\u5bb9\u53c2\u8003\u4e8e Caddy Docker \u955c\u50cf\u6587\u6863 [^1]\u3002\\n\\n```bash\\n#!bin/bash\\ncaddy_container_id=$(docker ps | grep caddy | awk \'{print $1;}\')\\ndocker exec -w /etc/caddy $caddy_container_id caddy fmt --overwrite Caddyfile\\ndocker exec -w /etc/caddy $caddy_container_id caddy reload\\n```\\n\\n## Docker Compose\\n\\n\u5982\u679c\u4f60\u4f7f\u7528`docker-compose`\u547d\u4ee4\u542f\u52a8 Caddy \u5bb9\u5668\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u811a\u672c\u6765\u8ba9 Caddy \u91cd\u65b0\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\u3002\u8be5\u811a\u672c\u9700\u8981\u548c`docker-compose.yml`\u4f4d\u4e8e\u540c\u4e00\u76ee\u5f55\u4e0b\uff0c\u5e76\u5728\u8be5\u76ee\u5f55\u4e0b\u6267\u884c\u6b64\u811a\u672c\u3002\\n\\n```bash\\n#!bin/bash\\ndocker-compose exec -w /etc/caddy caddy caddy fmt --overwrite Caddyfile\\ndocker-compose exec -w /etc/caddy caddy caddy reload\\n```\\n\\n[^1]: [Caddy - Official Image | Docker Hub](https://hub.docker.com/_/caddy)"},{"id":"/wildcard-certificates-with-caddy","metadata":{"permalink":"/blog/wildcard-certificates-with-caddy","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/wildcard-certificates-with-caddy.md","source":"@site/blog/wildcard-certificates-with-caddy.md","title":"\u4f7f\u7528 Caddy \u81ea\u52a8\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66","description":"\u6cdb\u57df\u540d\u8bc1\u4e66","date":"2022-01-22T00:00:00.000Z","formattedDate":"2022\u5e741\u670822\u65e5","tags":[{"label":"caddy","permalink":"/blog/tags/caddy"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-01-22T00:00:00.000Z","tags":["caddy"]},"prevItem":{"title":"\u4f18\u96c5\u5730\u91cd\u8f7d Caddyfile","permalink":"/blog/reload-caddyfile-gracefully"},"nextItem":{"title":"\u6302\u8f7d\u817e\u8baf\u4e91 COS \u5230\u672c\u5730\u6587\u4ef6\u5939","permalink":"/blog/mount-tencent-cos-on-local-file-system"}},"content":"## \u6cdb\u57df\u540d\u8bc1\u4e66\\n\\n\u5728 Caddy \u4e2d\u4e66\u5199 Matcher \u65f6\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5982`*.example.com`\uff0cCaddy \u4f1a\u81ea\u52a8\u4e3a\u4f60\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66\uff0c\u4f46\u662f\u9700\u8981\u5408\u9002\u7684\u914d\u7f6e\u3002\\n\\n`*.example.com`\u5305\u62ec`foo.example.com`\u3001`bar.example.com`\u7b49\u5176\u5b83\u4e8c\u7ea7\u57df\u540d\uff0c\u4f46\u662f\u4e0d\u5305\u62ec\u9876\u7ea7\u57df\u540d`example.com`\uff1b\u540c\u65f6\u4e0d\u5305\u62ec\u5176\u5b83\u7b49\u7ea7\u7684\u57df\u540d\uff0c\u53ea\u5305\u62ec\u540c\u7b49\u7ea7\u57df\u540d\u3002\\n\\n\u901a\u914d\u7b26`*`\u53ea\u80fd\u653e\u5728\u6700\u5de6\u8fb9\uff0c\u5982`*.example.com`\u3001`*.foo.example.com`\u548c`*.bar.example.com`\u7b49\uff1b\u4e0d\u80fd\u5199\u4e3a`foo.*.example.com`\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u9700\u8981\u505a\u7684\u4e8b\u60c5\\n\\n\u4e0d\u50cf\u5355\u57df\u540d\u8bc1\u4e66\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u9a8c\u8bc1\u7684\u65b9\u5f0f\u6765\u5b8c\u6210\u7533\u8bf7\uff0c\u6cdb\u57df\u540d\u8bc1\u4e66\u8981\u6c42 DNS \u9a8c\u8bc1\uff0c\u8fd9\u8981\u6c42\u4f60\u5f97\u6709\u6743\u9650\u4fee\u6539\u8be5\u57df\u540d\u7684 DNS \u8bb0\u5f55\uff0c\u5e76\u4e14\u4f60\u7684 DNS \u670d\u52a1\u5546\u8981\u88ab Caddy \u652f\u6301\u624d\u53ef\u4ee5\u3002\\n\\nCaddy \u5bf9 DNS \u7684\u4fee\u6539\u529f\u80fd\u662f\u7531 Caddy \u7684 DNS \u6a21\u7ec4\u5b9e\u73b0\u7684\uff0c\u4f7f\u7528\u6a21\u7ec4\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u6269\u5c55 Caddy\u3002\u4f60\u53ef\u4ee5\u5728 caddy-dns \u7684\u4ed3\u5e93\u5217\u8868 [^1] \u4e2d\u67e5\u770b\u4f60\u7684 DNS \u670d\u52a1\u5546\u662f\u5426\u53d7\u652f\u6301\u3002\\n\\nCaddy \u7684\u5b98\u65b9 Docker \u955c\u50cf [^2] \u5e76\u4e0d\u5305\u62ec\u4efb\u4f55\u6a21\u7ec4\uff0c\u53ea\u6709\u539f\u7248\u7684 Caddy\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u5e26\u6a21\u7ec4\u7684\u955c\u50cf\u8bdd\u9700\u8981\u81ea\u5df1\u6784\u5efa\u3002Caddy \u63d0\u4f9b\u4e86 xcaddy[^3] \u5de5\u5177\u6765\u5e2e\u52a9\u4f60\u7f16\u8bd1\u5e26\u6a21\u7ec4\u7684 Caddy\uff0c\u5e76\u4e14\u4e5f\u63d0\u4f9b\u4e86\u4f7f\u7528\u793a\u4f8b [^2]\uff0c\u53c2\u8003\u8fd9\u4e9b\u8bf4\u660e\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u6784\u5efa\u81ea\u5df1\u7684 Caddy \u955c\u50cf\u3002\\n\\n\u4e0b\u6587\u4e2d\u8bb0\u5f55\u4e86\u6211\u7528\u8fc7\u7684\u4e24\u4e2a DNS \u670d\u52a1\u5546\u6a21\u7ec4\uff0c\u5206\u522b\u662f Cloudflare \u548c DNSPod\u3002\\n\\n## Cloudflare \u4f8b\u5b50\\n\\n### \u7f16\u5199 Dockerfile\\n\\n`Dockerfile`\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff0c\u7528\u4e8e\u6784\u5efa Docker \u955c\u50cf\u3002\\n\\n```dockerfile\\nFROM caddy:builder AS builder\\nRUN xcaddy build --with github.com/caddy-dns/cloudflare\\nFROM caddy\\nCOPY --from=builder /usr/bin/caddy /usr/bin/caddy\\n```\\n\\n\u6bcf\u884c\u547d\u4ee4\u7684\u89e3\u91ca\u5982\u4e0b\u3002\\n\\n1. \u4f7f\u7528`caddy:builder`\u955c\u50cf\uff0c\u8d77\u522b\u540d\u4e3a`builder`\uff0c\u8be5\u955c\u50cf\u4e2d\u5305\u542b\u4e86`go`\u73af\u5883\u548c`xcaddy`\u5de5\u5177\uff1b\\n2. \u4f7f\u7528`xcaddy`\u6765\u7f16\u8bd1`caddy`\uff0c\u5e76\u4f7f\u7528`--with`\u53c2\u6570\u6307\u5b9a\u9644\u52a0\u7684\u6a21\u7ec4\uff0c\u8be5\u53c2\u6570\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\uff0c\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u9644\u52a0\u591a\u4e2a\u6a21\u7ec4\uff0c\u8fd9\u91cc\u4f7f\u7528\u4e86`github.com/caddy-dns/cloudflare`[^4]\uff1b\\n3. \u4f7f\u7528\u539f\u7248\u7684`caddy`\u955c\u50cf\uff1b\\n4. \u590d\u5236\u5728`builder`\u955c\u50cf\u4e2d\u4f60\u81ea\u5df1\u7f16\u8bd1\u7684`caddy`\u8986\u76d6\u6389\u539f\u7248`caddy`\uff0c\u5e76\u4f7f\u7528\u6b64\u955c\u50cf\u4f5c\u4e3a\u6700\u7ec8\u955c\u50cf\u3002\\n\\n### \u83b7\u53d6 Cloudflare Token\\n\\n\u5728 Cloudflare \u7684 API Tokens[^5] \u9875\u9762\u4e2d\u521b\u5efa\u4e00\u4e2a API Token\u3002\\n\\n![image-20220123001758949](wildcard-certificates-with-caddy.assets/image-20220123001758949.png)\\n\\n\u9009\u62e9\u4f7f\u7528\u7f16\u8f91 DNS \u6a21\u677f\u6765\u521b\u5efa API Token\u3002\\n\\n![image-20220123001847246](wildcard-certificates-with-caddy.assets/image-20220123001847246.png)\\n\\n\u5728 Zone Resources \u4e2d\u9009\u62e9\u76ee\u6807\u57df\u540d\u3002\\n\\n![image-20220123002105447](wildcard-certificates-with-caddy.assets/image-20220123002105447.png)\\n\\n\u786e\u8ba4\u4e4b\u540e\u4f1a\u7ed9\u4f60\u751f\u6210\u4e00\u4e2a Token\uff0c\u4f60\u9700\u8981\u4fdd\u5b58\u5b83\u3002\\n\\n### \u7f16\u5199 Caddyfile\\n\\n`Caddyfile`\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff0c\u4f5c\u4e3a Caddy \u7684\u914d\u7f6e\u6587\u4ef6\u3002\\n\\n```caddyfile\\n{\\n\\temail example@gmail.com\\n}\\n\\n*.example.com {\\n\\ttls {\\n\\t\\tdns cloudflare <CF_API_TOKEN>\\n\\t}\\n\\n\\t@foo host foo.example.com\\n\\thandle @foo {\\n\\t\\treverse_proxy localhost:1000\\n\\t}\\n\\n\\t@bar host bar.example.com\\n\\thandle @bar {\\n\\t\\treverse_proxy localhost:2000\\n\\t}\\n\\n\\thandle {\\n\\t\\tabort\\n\\t}\\n}\\n\\nexample.com {\\n\\treverse_proxy localhost:3000\\n}\\n\\nfoo.bar.example.com {\\n\\treverse_proxy localhost:4000\\n}\\n```\\n\\n- 1-3\uff1a\u5168\u5c40\u914d\u7f6e\u533a\u5757\uff0c\u5176\u4e2d`email`\u6307\u5b9a\u7533\u8bf7\u8bc1\u4e66\u65f6\u7528\u7684\u90ae\u7bb1\uff0c\u5199\u4f60\u81ea\u5df1\u7684\u90ae\u7bb1\uff1b\\n- 5-23\uff1a`*.example.com`\u6cdb\u57df\u540d\u914d\u7f6e\uff1b\\n  - 7\uff1a\u6307\u5b9a DNS \u670d\u52a1\u5546\u4e3a Cloudflare \u5e76\u4e14\u914d\u7f6e Cloudflare \u7684 API Token\uff0c\u66ff\u6362`<CF_API_TOKEN>`\u4e3a\u4f60\u81ea\u5df1\u7684\uff1b\\n  - 10-18\uff1a\u4f7f\u7528\u5177\u540d Matcher \u548c`handle`\u6307\u4ee4\u6765\u914d\u7f6e\u6bcf\u4e2a\u4f7f\u7528\u6cdb\u57df\u540d\u8bc1\u4e66\u7684\u7ad9\u70b9\uff1b\\n  - 20-22\uff1a\u5176\u5b83\u672a\u5b9a\u4e49\u7684\u57df\u540d\u76f4\u63a5\u4e22\u5f03\u8fde\u63a5\uff0c\u8fd9\u9700\u8981\u5199\u5728\u6240\u6709\u7ad9\u70b9\u540e\u9762\u3002\\n- 25-31\uff1a\u5176\u5b83\u4e0d\u5339\u914d\u6cdb\u57df\u540d\u7684\u57df\u540d\u914d\u7f6e\uff0c\u8fd8\u548c\u6b63\u5e38\u4f7f\u7528\u4e00\u6837\u3002\\n\\n### \u4f7f\u7528 Docker Compose \u8fd0\u884c\\n\\n`docker-compose.yml`\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff0c\u7528\u4e8e\u5feb\u901f\u8fd0\u884c\u5bb9\u5668\u3002\\n\\n```yml\\nversion: \\"3\\"\\nservices:\\n  caddy:\\n    build: .\\n    restart: unless-stopped\\n    network_mode: host\\n    volumes:\\n      - data:/data\\n      - ./Caddyfile:/etc/caddy/Caddyfile\\nvolumes:\\n  data:\\n```\\n\\n\u5f53\u524d\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\u3002\\n\\n```\\ncaddy\\n\u251c\u2500\u2500 Dockerfile\\n\u251c\u2500\u2500 Caddyfile\\n\u2514\u2500\u2500 docker-compose.yml\\n```\\n\\n\u5728 caddy \u76ee\u5f55\u4e0b\u8fd0\u884c\u547d\u4ee4\u3002Docker Compose \u4f1a\u6839\u636e Dockerfile \u6784\u5efa\u955c\u50cf\u5e76\u8fd0\u884c\u3002\\n\\n```bash\\ndocker-compose up --build -d\\n```\\n\\n## DNSPod \u4f8b\u5b50\\n\\n\u548c\u4f7f\u7528 Cloudflare \u5dee\u4e0d\u591a\u3002\\n\\n### \u7f16\u5199 Dockerfile\\n\\n```dockerfile\\nFROM caddy:builder AS builder\\nRUN go env -w GOPROXY=https://goproxy.cn,direct\\nRUN xcaddy build --with github.com/caddy-dns/dnspod\\nFROM caddy\\nCOPY --from=builder /usr/bin/caddy /usr/bin/caddy\\n```\\n\\n\u8fd9\u4e2a Dockerfile \u6587\u4ef6\u7684\u5185\u5bb9\u548c\u4f7f\u7528 Cloudfalre \u65f6 Dockerfile \u7684\u5185\u5bb9\u6709\u4e9b\u8bb8\u4e0d\u540c\u3002\\n\\n- \u7b2c 2 \u884c\u6307\u5b9a\u4e86`go get`\u4f7f\u7528\u56fd\u5185\u4ee3\u7406\uff0c\u56e0\u4e3a\u6211\u7684\u8fd9\u53f0\u670d\u52a1\u5668\u5728\u56fd\u5185\uff0c\u5728\u4e0b\u8f7d\u4f9d\u8d56\u7684\u65f6\u5019\u9047\u5230\u4e86\u4e00\u4e9b\u7f51\u7edc\u95ee\u9898\uff0c\u5982\u679c\u4f60\u5728\u4f7f\u7528`go get`\u7684\u65f6\u5019\u4e5f\u9047\u5230\u4e86\u7f51\u7edc\u95ee\u9898\u53ef\u4ee5\u8bd5\u8bd5\u6dfb\u52a0\u8fd9\u884c\u547d\u4ee4\uff0c\u5728`xcaddy build`\u547d\u4ee4\u4e4b\u524d\uff1b\\n- \u7b2c 3 \u884c\u4f7f\u7528`xcaddy`\u6765\u7f16\u8bd1`caddy`\uff0c\u5e76\u4f7f\u7528`--with`\u53c2\u6570\u6307\u5b9a\u9644\u52a0\u7684\u6a21\u7ec4\uff0c\u8be5\u53c2\u6570\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\uff0c\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u9644\u52a0\u591a\u4e2a\u6a21\u7ec4\uff0c\u8fd9\u91cc\u4f7f\u7528\u4e86`github.com/caddy-dns/dnspod`[^6]\uff1b\\n\\n### \u83b7\u53d6 DNSPod Token\\n\\n\u5728 DNSPod API \u5bc6\u94a5\u9875\u9762 [^7] \u4e2d\u751f\u6210\u4e00\u4e2a Token\uff0c\u5728\u751f\u6210 Token \u4e4b\u540e\u4f60\u9700\u8981\u4fdd\u5b58\u4e0b\u6765\uff0c\u5b83\u53ea\u4f1a\u5b8c\u6574\u5730\u663e\u793a\u4e00\u6b21\uff0c\u4ee5\u540e\u90fd\u4e0d\u80fd\u5b8c\u6574\u5730\u67e5\u770b\u4e86\u3002\\n\\n![image-20220123003832951](wildcard-certificates-with-caddy.assets/image-20220123003832951.png)\\n\\n\u9700\u8981\u6ce8\u610f\u7684\u662f DNSPod Token \u4f7f\u7528\u65f6\u6709\u4e9b\u4e0d\u4e00\u6837\uff0c\u4f60\u7533\u8bf7\u7684\u5bc6\u94a5\u6709 ID \u548c Token\uff0c\u5728\u4f7f\u7528\u65f6\u9700\u8981\u628a\u4e24\u8005\u7ec4\u5408\u8d77\u6765\uff0c\u4e2d\u95f4\u7528\u82f1\u6587\u9017\u53f7\u5206\u9694\uff0c\u5982`<id>,<token>`\uff0c\u5728\u4f7f\u7528\u65f6\u4f60\u9700\u8981\u5c06\u5185\u5bb9\u66ff\u6362\u4e3a\u81ea\u5df1\u7684 ID \u548c Token\uff0c\u66f4\u591a\u8bf4\u660e\u8bf7\u53c2\u8003 DNSPod \u7684 API \u4f7f\u7528\u6587\u6863 [^8]\u3002\\n\\n### \u7f16\u5199 Caddyfile\\n\\n```\\n{\\n\\temail example@gmail.com\\n}\\n\\n*.example.com {\\n\\ttls {\\n\\t\\tdns dnspod <DNSPOD_TOKEN>\\n\\t}\\n\\n\\t@foo host foo.example.com\\n\\thandle @foo {\\n\\t\\treverse_proxy localhost:1000\\n\\t}\\n\\n\\t@bar host bar.example.com\\n\\thandle @bar {\\n\\t\\treverse_proxy localhost:2000\\n\\t}\\n\\n\\thandle {\\n\\t\\tabort\\n\\t}\\n}\\n\\nexample.com {\\n\\treverse_proxy localhost:3000\\n}\\n\\nfoo.bar.example.com {\\n\\treverse_proxy localhost:4000\\n}\\n```\\n\\n\u7b2c 7 \u884c\u4e0d\u4e00\u6837\uff0c\u6307\u5b9a\u4e86 DNS \u670d\u52a1\u5546\u4e3a`dnspod`\uff0c\u5e76\u4e14\u4f60\u9700\u8981\u66ff\u6362\u6389`<DNSPOD_TOKEN>`\u4e3a\u4f60\u81ea\u5df1\u7684\u3002\u9700\u8981\u6ce8\u610f DNSPod \u7684 API Token \u683c\u5f0f\u7279\u6b8a\uff0c\u662f\u7531 ID \u548c Token \u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5e76\u7528\u82f1\u6587\u9017\u53f7\u5206\u9694\u3002\\n\\n\u5176\u5b83\u5185\u5bb9\u548c\u4f7f\u7528 Cloudflare \u65f6\u4e00\u6837\uff0c\u8bf7\u53c2\u8003\u4e0a\u6587\u3002\\n\\n### \u4f7f\u7528 Docker Compose \u8fd0\u884c\\n\\n\u548c\u4f7f\u7528 Cloudflare \u65f6\u4e00\u6837\uff0c\u8bf7\u53c2\u8003\u4e0a\u6587\u3002\\n\\n## \u540e\u8bb0\\n\\n\u66f4\u591a\u4f7f\u7528\u5e2e\u52a9\u8bf7\u53c2\u8003\u5176\u5b98\u65b9\u6587\u6863 [^9]\uff0c\u955c\u50cf\u6784\u5efa\u51fa\u9519\u8bf7\u67e5\u770b\u6784\u5efa\u65e5\u5fd7\uff0cCaddy \u8fd0\u884c\u65f6\u51fa\u9519\u8bf7\u67e5\u770b Caddy \u955c\u50cf\u7684\u65e5\u5fd7\u3002\\n\\n[^1]: [caddy-dns](https://github.com/caddy-dns)\\n[^2]: [Caddy - Official Image | Docker Hub](https://hub.docker.com/_/caddy)\\n[^3]: [caddyserver/xcaddy: Build Caddy with plugins](https://github.com/caddyserver/xcaddy)\\n[^4]: [caddy-dns/cloudflare: Caddy module: dns.providers.cloudflare](https://github.com/caddy-dns/cloudflare)\\n[^5]: [API Tokens | Cloudflare](https://dash.cloudflare.com/profile/api-tokens)\\n[^6]: [caddy-dns/dnspod](https://github.com/caddy-dns/dnspod)\\n[^7]: [API \u5bc6\u94a5 - DNSPod-\u514d\u8d39\u667a\u80fd DNS \u89e3\u6790\u670d\u52a1\u5546 - \u7535\u4fe1_\u7f51\u901a_\u6559\u80b2\u7f51\uff0c\u667a\u80fd DNS](https://console.dnspod.cn/account/token/token)\\n[^8]: [\u5bc6\u94a5\u7ba1\u7406 - DNSPod \u670d\u52a1\u4e0e\u652f\u6301](https://docs.dnspod.cn/account/5f2d466de8320f1a740d9ff3/)\\n[^9]: [Common Caddyfile Patterns \u2014 Caddy Documentation](https://caddyserver.com/docs/caddyfile/patterns#wildcard-certificates)"},{"id":"/mount-tencent-cos-on-local-file-system","metadata":{"permalink":"/blog/mount-tencent-cos-on-local-file-system","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/mount-tencent-cos-on-local-file-system.md","source":"@site/blog/mount-tencent-cos-on-local-file-system.md","title":"\u6302\u8f7d\u817e\u8baf\u4e91 COS \u5230\u672c\u5730\u6587\u4ef6\u5939","description":"\u524d\u8a00","date":"2022-01-10T00:00:00.000Z","formattedDate":"2022\u5e741\u670810\u65e5","tags":[{"label":"tencent cos","permalink":"/blog/tags/tencent-cos"}],"truncated":true,"authors":[],"frontMatter":{"date":"2022-01-10T00:00:00.000Z","tags":["tencent cos"]},"prevItem":{"title":"\u4f7f\u7528 Caddy \u81ea\u52a8\u7533\u8bf7\u6cdb\u57df\u540d\u8bc1\u4e66","permalink":"/blog/wildcard-certificates-with-caddy"},"nextItem":{"title":"\u7528 KMS \u6fc0\u6d3b Windows \u548c Office","permalink":"/blog/activate-windows-and-office-with-kms"}},"content":"## \u524d\u8a00\\n\\n> 2022-06-18 \u66f4\u65b0\uff1a\u672c\u6587\u4e2d\u7684\u89e3\u51b3\u529e\u6cd5\u6709\u66f4\u597d\u7684\u65b9\u6848\uff0c\u8bf7\u67e5\u770b [\u4f7f\u7528 s3fs \u6302\u8f7d\u817e\u8baf\u4e91 COS \u4e2d\u7684\u5185\u5bb9](./mount-tencent-cos-using-s3fs.md)\u3002\\n\\n\u817e\u8baf\u4e91\u63d0\u4f9b\u4e86\u4e00\u4e2a\u8f6f\u4ef6 cosfs \u7528\u4e8e\u6302\u8f7d COS \u5230\u672c\u5730\uff0c\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6\u7684\u6587\u4ef6\u64cd\u4f5c\u547d\u4ee4\u6765\u64cd\u4f5c COS \u4e2d\u7684\u5185\u5bb9\u3002\u7531\u4e8e\u540e\u7aef\u662f\u4e91\u5b58\u50a8\u800c\u4e0d\u662f\u771f\u6b63\u7684\u672c\u5730\u5b58\u50a8\uff0c\u6240\u4ee5\u6709\u4e9b\u64cd\u4f5c\u7684\u6027\u80fd\u6bd4\u8f83\u4f4e\u3002\u4e0d\u63a8\u8350\u901a\u8fc7\u6b64\u79cd\u65b9\u5f0f\u5728\u5176\u4e2d\u4fee\u6539\u6587\u4ef6\u5185\u5bb9\u6216\u6587\u4ef6\u540d\u79f0\uff0c\u4ec5\u4ec5\u4e0b\u8f7d\u6587\u4ef6\u548c\u4e0a\u4f20\u65b0\u6587\u4ef6\u7684\u64cd\u4f5c\u8fd8\u662f\u53ef\u4ee5\u7684\u3002\\n\\n\u817e\u8baf\u4e91\u5185\u7f51\u8bbf\u95ee COS \u7684\u4e0b\u8f7d\u6d41\u91cf\u4e0d\u8ba1\u8d39\uff0c\u53ef\u4ee5\u901a\u8fc7\u817e\u8baf\u4e91\u670d\u52a1\u5668\u628a COS \u5185\u5bb9\u6302\u8f7d\u5230\u670d\u52a1\u5668\uff0c\u7136\u540e\u901a\u8fc7\u522b\u7684\u9014\u5f84\u5728\u5916\u7f51\u4e0b\u8f7d\uff0c\u4f8b\u5982\u7528 Rclone \u901a\u8fc7 SFTP \u628a COS \u7684\u5185\u5bb9\u590d\u5236\u5230\u5916\u7f51\u7684\u673a\u5668\uff0c\u8fd9\u6837\u5c31\u4e0d\u8ba1\u4e0b\u8f7d\u6d41\u91cf\u7684\u8d39\u7528\u4e86\uff0c\u4f46\u662f API \u8c03\u7528\u6b21\u6570\u8fd8\u662f\u8981\u6536\u8d39\u7684\u3002\\n\\n\u6587\u4e2d\u6240\u6d89\u53ca\u7684\u64cd\u4f5c\u7cfb\u7edf\u662f Debian\uff0c\u5e94\u8be5\u4e5f\u9002\u7528\u4e8e\u5176\u4ed6 Debian \u7cfb\u7684\u64cd\u4f5c\u7cfb\u7edf\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u5b89\u88c5\u8f6f\u4ef6\\n\\n*cosfs[^1]* \u4f9d\u8d56\u4e8e fuse\uff0c\u9996\u5148\u5b89\u88c5 fuse\u3002\\n\\n```bash\\napt install fuse\\n```\\n\\n\u5b89\u88c5 cosfs\uff0c\u5b98\u65b9\u63d0\u4f9b\u4e86`deb`\u548c`rpm`\u683c\u5f0f\u7684\u5b89\u88c5\u5305\uff0cDebian \u7cfb\u7edf\u7528`deb`\u683c\u5f0f\u7684\uff0c\u4e0b\u8f7d\u5b89\u88c5\u5305\u4e4b\u524d\u53ef\u4ee5\u5148\u53bb *\u53d1\u5e03\u9875\u9762 [^2]* \u68c0\u67e5\u4e00\u4e0b\u662f\u5426\u6709\u65b0\u7248\u672c\u3002\\n\\n```bash\\n# wget https://ghproxy.com/https://github.com/tencentyun/cosfs/releases/download/v1.0.19/cosfs_1.0.19-ubuntu20.04_amd64.deb\\nwget https://github.com/tencentyun/cosfs/releases/download/v1.0.19/cosfs_1.0.19-ubuntu20.04_amd64.deb\\ndpkg -i cosfs_1.0.19-ubuntu20.04_amd64.deb\\n```\\n\\n## \u7f16\u5199\u914d\u7f6e\u6587\u4ef6\\n\\n\u914d\u7f6e\u6587\u4ef6\u5e94\u8be5\u5b58\u653e\u5728`/etc/passwd-cosfs`\u4e2d\u3002\u5176\u4e2d\u53ef\u4ee5\u6709\u591a\u884c\uff0c\u6bcf\u884c\u7684\u683c\u5f0f\u5982\u4e0b\u3002\\n\\n```\\n<BucketName-APPID>:<SecretId>:<SecretKey>\\n```\\n\\n\u4f8b\u5982\u4f60\u53ef\u4ee5\u8fd9\u6837\u5199\u3002\\n\\n```\\nexamplebucket-1250000000:AKIDHTVVaVR6e3****:PdkhT9e2rZCfy6****\\n```\\n\\n\u540c\u65f6\u9700\u8981\u66f4\u6539\u8be5\u6587\u4ef6\u7684\u6743\u9650\u3002\\n\\n```bash\\nchmod 640 /etc/passwd-cosfs\\n```\\n\\n## \u6302\u8f7d\\n\\n\u5148\u521b\u5efa\u4e00\u4e2a\u6302\u8f7d\u70b9\u3002\\n\\n```bash\\nmkdir /mnt/cos\\n```\\n\\n\u6302\u8f7d\uff0c\u5176\u4e2d`ourl`\u6307\u5b9a\u4e86\u5730\u57df\u94fe\u63a5\u3002\\n\\n```bash\\ncosfs examplebucket-1250000000 /mnt/ -ourl=http://cos.ap-guangzhou.myqcloud.com\\n```\\n\\n\u6302\u8f7d\u4e4b\u540e\u5c31\u53ef\u4ee5\u50cf\u5bf9\u5f85\u666e\u901a\u6587\u4ef6\u7cfb\u7edf\u7684\u65b9\u5f0f\u6765\u64cd\u4f5c COS \u4e2d\u7684\u6587\u4ef6\u4e86\u3002\\n\\n## \u53d6\u6d88\u6302\u8f7d\\n\\n```bash\\numount /mnt/cos\\n```\\n\\n## \u5c40\u9650\u6027\\n\\n\u8be5\u65b9\u6cd5\u6709\u4e00\u5b9a *\u5c40\u9650\u6027 [^3]*\uff0c\u53ea\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\u597d\u7528\uff0c\u4f7f\u7528\u65f6\u8981\u8003\u8651\u6027\u80fd\u95ee\u9898\u3002\\n\\n- \u968f\u673a\u6216\u8005\u8ffd\u52a0\u5199\u6587\u4ef6\u4f1a\u5bfc\u81f4\u6574\u4e2a\u6587\u4ef6\u7684\u91cd\u5199\uff1b\\n- \u5143\u6570\u636e\u64cd\u4f5c\uff0c\u4f8b\u5982 list directory\uff0c\u6027\u80fd\u8f83\u5dee\uff0c\u56e0\u4e3a\u9700\u8981\u8fdc\u7a0b\u8bbf\u95ee COS \u670d\u52a1\u5668\uff1b\\n- \u6587\u4ef6/\u6587\u4ef6\u5939\u7684 rename \u64cd\u4f5c\u4e0d\u662f\u539f\u5b50\u7684\uff1b\\n- \u591a\u4e2a\u5ba2\u6237\u7aef\u6302\u8f7d\u540c\u4e00\u4e2a COS bucket \u65f6\uff0c\u4f9d\u8d56\u7528\u6237\u81ea\u884c\u534f\u8c03\u5404\u4e2a\u5ba2\u6237\u7aef\u7684\u884c\u4e3a\u3002\u4f8b\u5982\u907f\u514d\u591a\u4e2a\u5ba2\u6237\u7aef\u5199\u540c\u4e00\u4e2a\u6587\u4ef6\u7b49\u7b49\uff1b\\n- \u4e0d\u652f\u6301 hard link\uff1b\\n- \u4e0d\u9002\u5408\u7528\u5728\u9ad8\u5e76\u53d1\u8bfb/\u5199\u7684\u573a\u666f\uff0c\u8fd9\u6837\u4f1a\u8ba9\u7cfb\u7edf\u7684 load \u5347\u9ad8\u3002\\n\\n[^1]: [\u5bf9\u8c61\u5b58\u50a8 COSFS \u5de5\u5177 - \u5de5\u5177\u6307\u5357 - \u6587\u6863\u4e2d\u5fc3 - \u817e\u8baf\u4e91](https://cloud.tencent.com/document/product/436/6883)\\n[^2]: [Releases \xb7 tencentyun/cosfs](https://github.com/tencentyun/cosfs/releases)\\n[^3]: [tencentyun/cosfs](https://github.com/tencentyun/cosfs#%E5%B1%80%E9%99%90%E6%80%A7)"},{"id":"/activate-windows-and-office-with-kms","metadata":{"permalink":"/blog/activate-windows-and-office-with-kms","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/activate-windows-and-office-with-kms.md","source":"@site/blog/activate-windows-and-office-with-kms.md","title":"\u7528 KMS \u6fc0\u6d3b Windows \u548c Office","description":"\u6fc0\u6d3b Windows","date":"2022-01-02T00:00:00.000Z","formattedDate":"2022\u5e741\u67082\u65e5","tags":[],"truncated":true,"authors":[],"frontMatter":{"date":"2022-01-02T00:00:00.000Z"},"prevItem":{"title":"\u6302\u8f7d\u817e\u8baf\u4e91 COS \u5230\u672c\u5730\u6587\u4ef6\u5939","permalink":"/blog/mount-tencent-cos-on-local-file-system"},"nextItem":{"title":"\u81ea\u5efa Zerotier \u884c\u661f\u8282\u70b9","permalink":"/blog/self-hosted-zerotier-controller"}},"content":"## \u6fc0\u6d3b Windows\\n\\n\u53ea\u80fd\u6fc0\u6d3b VL \u7248\u672c\u7684\u7cfb\u7edf\uff0c\u96f6\u552e\u7248\u4e0d\u80fd\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6fc0\u6d3b\u3002\\n\\n\x3c!-- more --\x3e\\n\\n\u4f7f\u7528\u7ba1\u7406\u5458\u6743\u9650\u8fd0\u884c`cmd`\u3002\\n\\n```cmd\\nslmgr /skms kms.03k.org\\nslmgr /ato\\n```\\n\\n## \u6fc0\u6d3b Office\\n\\n\u8fdb\u5165 Office \u5b89\u88c5\u76ee\u5f55\uff0c\u7528\u7ba1\u7406\u5458\u6743\u9650\u6267\u884c\u547d\u4ee4\u3002\\n\\n```cmd\\n# C:\\\\Program Files (x86)\\\\Microsoft Office\\\\Office16\\ncscript ospp.vbs /sethst:kms.03k.org\\ncscript ospp.vbs /act\\n```\\n\\n## KMS \u670d\u52a1\u5668\u6536\u96c6\\n\\n\u5728\u4e0a\u9762\u547d\u4ee4\u4e2d\u7684 KMS \u670d\u52a1\u5668\u5931\u6548\u7684\u65f6\u5019\u53ef\u4ee5\u5c1d\u8bd5\u4e0b\u9762\u5217\u8868\u4e2d\u7684\u5176\u5b83 KMS \u670d\u52a1\u5668\u3002\\n\\n- `kms.03k.org`\\n- `kms.v0v.bid`\\n\\n## \u81ea\u5efa KMS \u670d\u52a1\u5668\\n\\n\u6216\u8005\u4e5f\u53ef\u4ee5\u81ea\u5df1\u642d\u5efa KMS \u670d\u52a1\u5668\uff0c\u96be\u5ea6\u4e0d\u9ad8\uff0c\u901a\u8fc7 Docker \u53ef\u4ee5\u5feb\u901f\u90e8\u7f72\u3002\\n\\n- [teddysun/kms - Docker Image | Docker Hub](https://hub.docker.com/r/teddysun/kms)\\n\\n## \u5176\u5b83\u6fc0\u6d3b\u65b9\u5f0f\\n\\n- [\u4e91\u840c Windows 10 \u6fc0\u6d3b\u5de5\u5177 - \u9996\u9875](https://cmwtat.cloudmoe.com/cn.html)\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- [\u672c\u7ad9\u4e0a\u7ebf KMS \u670d\u52a1~\u4e00\u53e5\u547d\u4ee4\u6fc0\u6d3b windows/office | \u96f6\u6563\u5751\u77e5\u8bc6\u5206\u4eab](https://03k.org/kms.html)"},{"id":"/self-hosted-zerotier-controller","metadata":{"permalink":"/blog/self-hosted-zerotier-controller","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/self-hosted-zerotier-controller.md","source":"@site/blog/self-hosted-zerotier-controller.md","title":"\u81ea\u5efa Zerotier \u884c\u661f\u8282\u70b9","description":"\u524d\u8a00","date":"2021-12-31T00:00:00.000Z","formattedDate":"2021\u5e7412\u670831\u65e5","tags":[{"label":"zerotier","permalink":"/blog/tags/zerotier"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-12-31T00:00:00.000Z","tags":["zerotier"]},"prevItem":{"title":"\u7528 KMS \u6fc0\u6d3b Windows \u548c Office","permalink":"/blog/activate-windows-and-office-with-kms"},"nextItem":{"title":"UFW\uff1a\u7b80\u5355\u6613\u4e0a\u624b\u7684\u9632\u706b\u5899\u89c4\u5219\u7ba1\u7406\u5de5\u5177","permalink":"/blog/ufw"}},"content":"## \u524d\u8a00\\n\\n> \u81ea\u5efa ZeroTier Planet \u884c\u661f\u670d\u52a1\u5668\u53ef\u4ee5\u89e3\u51b3\u4e24\u4e2a\u95ee\u9898\uff1a\\n>\\n> 1. \u5b98\u65b9\u514d\u8d39\u7248\u672c\u6709 50 \u4e2a\u8bbe\u5907\u8fde\u63a5\u6570\u7684\u9650\u5236\\n> 2. \u63d0\u5347\u7f51\u7edc\u7a33\u5b9a\u6027\\n\\n\x3c!-- more --\x3e\\n\\n## \u8fd0\u884c\u9879\u76ee\\n\\n\u4f7f\u7528`docker-compose`\u53ef\u4ee5\u5feb\u901f\u8fd0\u884c\u9879\u76ee\u3002`docker-compose.yml`\u7684\u5185\u5bb9\u5982\u4e0b\u3002\\n\\n```yaml\\nversion: \'3\'\\nservices:\\n  ztncui:\\n    image: keynetworks/ztncui\\n    restart: unless-stopped\\n    ports:\\n      - \'3000:3000\'\\n    environment:\\n      MYADDR: 172.38.38.38\\n      HTTP_ALL_INTERFACES: \\"yes\\"\\n      ZTNCUI_PASSWD: PASS\\n      TZ: Asia/Shanghai\\n    volumes:\\n      - ztncui:/opt/key-networks/ztncui/etc/\\n      - zerotier-one:/var/lib/zerotier-one/\\nvolumes:\\n  ztncui: null\\n  zerotier-one: null\\n```\\n\\n\u5176\u4e2d\u4e00\u4e9b\u73af\u5883\u53d8\u91cf\u9700\u8981\u8bbe\u7f6e\u3002\\n\\n- `MYADDR`\uff1a\u673a\u5668\u7684\u516c\u7f51 IP \u5730\u5740\\n- `HTTP_ALL_INTERFACES`\uff1a\u76d1\u542c\u6240\u6709\u7f51\u7edc\u63a5\u53e3\\n- `ZTNCUI_PASSWD`\uff1a\u8bbe\u7f6e`admin`\u7528\u6237\u7684\u5bc6\u7801\u3002\\n\\n`ztncui`\u548c`zerotier-one`\u4e24\u4e2a Volume \u6301\u4e45\u5316\u914d\u7f6e\u4fe1\u606f\uff0c\u9632\u6b62\u91cd\u65b0\u521b\u5efa\u5bb9\u5668\u540e\u4e22\u5931\u914d\u7f6e\u3002\\n\\n\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u7528`docker-compose up -d`\u542f\u52a8\u5bb9\u5668\u3002\\n\\n\u9632\u706b\u5899\u9700\u8981\u653e\u884c`3000`\u7aef\u53e3\u3002\\n\\n## \u7f51\u7edc\u914d\u7f6e\\n\\n\u8bbf\u95ee`IP:3000`\u53ef\u4ee5\u8fdb\u5165\u7f51\u9875\u7ba1\u7406 UI\uff0c\u4e5f\u53ef\u4ee5\u7528\u53cd\u54cd\u4ee3\u7406\u670d\u52a1\u5668\u6765\u8f6c\u53d1\u6b64\u7aef\u53e3\u7684\u6d41\u91cf\uff0c\u5e76\u7528\u57df\u540d\u548c HTTPS \u8bbf\u95ee\u3002\u7528\u6237\u540d\u662f`admin`\uff0c\u5bc6\u7801\u662f\u4f60\u4e4b\u524d\u914d\u7f6e\u7684\u73af\u5883\u53d8\u91cf`ZTNCUI_PASSWD`\u7684\u503c\u3002\\n\\n\u63a7\u5236\u9762\u677f\u7684\u4f7f\u7528\u65b9\u6cd5\u548c\u64cd\u4f5c\u903b\u8f91\u548c\u5b98\u65b9\u63a7\u5236\u9762\u677f\u5dee\u4e0d\u591a\u3002\\n\\n\u5728\u5e95\u90e8\u7684\u5bfc\u822a\u680f\u4e2d\u70b9\u51fb\u300cNetworks\u300d\uff0c\u518d\u70b9\u51fb`Add network`\u521b\u5efa\u4e00\u4e2a\u7f51\u7edc\u3002\u7ed9\u7f51\u7edc\u8d77\u4e00\u4e2a\u540d\u5b57\u4e4b\u540e\u4f60\u5c31\u80fd\u5728\u300cNetworks\u300d\u4e2d\u770b\u89c1\u4f60\u521a\u521a\u521b\u5efa\u7684\u7f51\u7edc\u4e86\u3002\\n\\n![image-20211231150656489](self-hosted-zerotier-controller.assets/image-20211231150656489.png)\\n\\n\u70b9\u51fb\u8be5\u7f51\u7edc\u540d\u5c31\u80fd\u8fdb\u5165\u8be5\u7f51\u7edc\u8bbe\u7f6e\u7684\u8bbe\u7f6e\u9875\u9762\u3002\\n\\n![image-20211231152132452](self-hosted-zerotier-controller.assets/image-20211231152132452.png)\\n\\n\u70b9\u51fb\u300cEasy setup\u300d\u6309\u94ae\u4e3a\u7f51\u7edc\u8bbe\u7f6e\u7f51\u6bb5\u3002\u5728\u8be5\u9875\u9762\u4e2d\u70b9\u51fb\u300cGenerate network address\u300d\u6309\u94ae\u53ef\u4ee5\u968f\u673a\u751f\u6210\u7f51\u6bb5\uff0c\u70b9\u51fb\u300cSubmit\u300d\u6309\u94ae\u4fdd\u5b58\u4fe1\u606f\u3002\\n\\n![image-20211231152152226](self-hosted-zerotier-controller.assets/image-20211231152152226.png)\\n\\n\u70b9\u51fb\u300cPrivate\u300d\u6309\u94ae\u8bbe\u7f6e\u79c1\u6709\u7f51\u7edc/\u516c\u5f00\u7f51\u7edc\u3002\\n\\n![image-20211231152400238](self-hosted-zerotier-controller.assets/image-20211231152400238.png)\\n\\n\u70b9\u51fb\u300cRoutes\u300d\u6309\u94ae\u8bbe\u7f6e\u9759\u6001\u8def\u7531\u3002\\n\\n![image-20211231152422204](self-hosted-zerotier-controller.assets/image-20211231152422204.png)\\n\\n## \u5ba2\u6237\u7aef\\n\\n\u4f7f\u7528\u5404\u4e2a\u5e73\u53f0\u7684\u539f\u751f\u5ba2\u6237\u7aef\u76f4\u63a5\u53ef\u4ee5\u8fde\u63a5\u5230\u81ea\u5efa\u7f51\u7edc\u3002Network ID \u586b\u81ea\u5df1\u7684\u5c31\u884c\u4e86\u3002\\n\\n\u5ba2\u6237\u7aef\u5728\u52a0\u5165\u79c1\u6709\u7f51\u7edc\u7684\u65f6\u5019\u9700\u8981\u5728\u7f51\u7edc\u7ba1\u7406\u9875\u9762\u624b\u52a8\u6279\u51c6\u8ba4\u8bc1\uff1b\u52fe\u9009\u5bf9\u5e94\u7684\u300cAuthorized\u300d\u5217\u9009\u6846\u5373\u53ef\u3002\\n\\n![image-20211231152823640](self-hosted-zerotier-controller.assets/image-20211231152823640.png)\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- [ZeroTier Planet \u884c\u661f\u670d\u52a1\u5668\uff0c\u4e00\u952e\u79c1\u6709\u90e8\u7f72\uff0c\u53ef\u7a81\u7834 50 \u53f0\u8bbe\u5907\u9650\u5236 - \u5c0f\u4f17\u8f6f\u4ef6](https://www.appinn.com/zerotier-planet-server-docker-install/)\\n- [Jonnyan404/zerotier-planet: \u4e00\u5206\u949f\u81ea\u5efa zerotier-planet](https://github.com/Jonnyan404/zerotier-planet)\\n- [key-networks/ztncui: ZeroTier network controller UI](https://github.com/key-networks/ztncui)\\n- [key-networks/ztncui-containerized: A Docker image that contains ZeroTier One and ztncui to set up a standalone ZeroTier network controller with a web user interface in a container.](https://github.com/key-networks/ztncui-containerized)"},{"id":"/ufw","metadata":{"permalink":"/blog/ufw","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/ufw.md","source":"@site/blog/ufw.md","title":"UFW\uff1a\u7b80\u5355\u6613\u4e0a\u624b\u7684\u9632\u706b\u5899\u89c4\u5219\u7ba1\u7406\u5de5\u5177","description":"\u524d\u8a00","date":"2021-12-31T00:00:00.000Z","formattedDate":"2021\u5e7412\u670831\u65e5","tags":[{"label":"debian","permalink":"/blog/tags/debian"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-12-31T00:00:00.000Z","tags":["debian"]},"prevItem":{"title":"\u81ea\u5efa Zerotier \u884c\u661f\u8282\u70b9","permalink":"/blog/self-hosted-zerotier-controller"},"nextItem":{"title":"Debian \u914d\u7f6e\u5907\u4efd","permalink":"/blog/debian-environment-backup"}},"content":"## \u524d\u8a00\\n\\nUFW \u662f\u4e00\u6b3e\u5728 Debian \u7cfb\u7cfb\u7edf\u4e2d\u53ef\u7528\u7684\u9632\u706b\u5899\u89c4\u5219\u7ba1\u7406\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5feb\u901f\u914d\u7f6e\u5404\u79cd\u670d\u52a1\u7684\u7aef\u53e3\u8bbf\u95ee\u6743\u9650\uff0c\u800c\u4e0d\u7528\u4e66\u5199\u5197\u957f\u7684 iptables \u89c4\u5219\u547d\u4ee4\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u5b89\u88c5\\n\\n\u53ef\u4ee5\u4f7f\u7528`apt`\u5feb\u901f\u5b89\u88c5\u3002\\n\\n```bash\\napt install ufw\\n```\\n\\n## \u542f\u7528/\u7981\u7528\\n\\n\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u542f\u7528 UFW\uff0c\u5e76\u4e14\u4f1a\u968f\u7740\u7cfb\u7edf\u5f00\u542f\u800c\u542f\u52a8\u3002\\n\\n```bash\\nufw enable\\n```\\n\\n\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u505c\u6b62 UFW\u3002\\n\\n```bash\\nufw disable\\n```\\n\\n## \u9ed8\u8ba4\u884c\u4e3a\\n\\n\u4f7f\u7528`ufw default`\u547d\u4ee4\u6765\u914d\u7f6e\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4ee5\u4e0b\u4e24\u6761\u662f UFW \u521d\u59cb\u5316\u7684\u9ed8\u8ba4\u884c\u4e3a\uff1b\u9ed8\u8ba4\u62d2\u7edd\u6240\u6709\u5165\u6d41\u91cf\uff0c\u5141\u8bb8\u6240\u6709\u51fa\u6d41\u91cf\u3002\\n\\n```bash\\nufw default deny incoming\\nufw default allow outgoing\\n```\\n\\n\u4f60\u53ef\u4ee5\u4f7f\u7528`ufw default`\u547d\u4ee4\u6765\u8986\u76d6\u9ed8\u8ba4\u884c\u4e3a\uff0c\u4f7f\u7528`allow`/`deny`\u548c`incoming`/`outgoing`/`routed`\u7ec4\u5408\u3002\\n\\n\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u67e5\u770b\u5f53\u524d\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002\\n\\n```bash\\nufw status verbose\\n```\\n\\n![image-20211231173659554](ufw.assets/image-20211231173659554.png)\\n\\n## \u6dfb\u52a0\u89c4\u5219\\n\\n### \u653e\u884c/\u7981\u6b62\u7aef\u53e3\\n\\n\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u653e\u884c 53 \u7aef\u53e3\u7684 TCP \u548c UDP \u6d41\u91cf\u3002\\n\\n```bash\\nufw allow 53\\n```\\n\\n\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u4ec5\u653e\u884c 53 \u7aef\u53e3\u7684 TCP \u6d41\u91cf\u3002\\n\\n```bash\\nufw allow 53/tcp\\n```\\n\\n\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u4ec5\u653e\u884c 53 \u7aef\u53e3\u7684 UDP \u6d41\u91cf\u3002\\n\\n```bash\\nufw allow 53/udp\\n```\\n\\n\u8fd8\u53ef\u4ee5\u4e00\u6b21\u653e\u884c\u4e00\u4e2a\u8303\u56f4\u5185\u7684\u7aef\u53e3\u3002\\n\\n```bash\\nufw allow 1000:2000/tcp\\n```\\n\\n\u7981\u6b62\u547d\u4ee4\u5c31\u662f\u7528`deny`\u66ff\u4ee3`allow`\u3002\\n\\n```bash\\nufw deny 53\\nufw deny 53/tcp\\nufw deny 53/udp\\nufw deny 1000:2000/tcp\\n```\\n\\n### \u653e\u884c/\u7981\u6b62 IP\\n\\n```bash\\nufw allow from 1.2.3.4\\nufw deny from 1.2.3.4\\n```\\n\\n## \u5220\u9664\u89c4\u5219\\n\\n\u4f7f\u7528`ufw delete`\u547d\u4ee4\u6765\u5220\u9664\u4e00\u6761\u4e4b\u524d\u6dfb\u52a0\u7684\u89c4\u5219\u3002\\n\\n```bash\\nufw delete allow 53\\nufw delete deny from 1.2.3.4\\n```\\n\\n\u6216\u8005\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u5217\u51fa\u6dfb\u52a0\u7684\u89c4\u5219\u5e76\u7f16\u53f7\uff0c\u901a\u8fc7\u7f16\u53f7\u5220\u9664\u89c4\u5219\u3002\\n\\n```bash\\nufw status numbered\\nufw delete 2\\n```\\n\\n![image-20211231173743883](ufw.assets/image-20211231173743883.png)\\n\\n## \u5e38\u7528\u670d\u52a1\u7aef\u53e3\\n\\n\u5728\u6dfb\u52a0\u6216\u5220\u9664\u5173\u4e8e\u7aef\u53e3\u7684\u89c4\u5219\u65f6\uff0c\u9664\u4e86\u624b\u52a8\u6307\u51fa\u7aef\u53e3\u53f7\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u670d\u52a1\u540d\u79f0\u6765\u653e\u884c/\u7981\u6b62\u7aef\u53e3\u3002\\n\\n```bash\\nufw allow ssh\\nufw deny ssh\\nufw delete allow ssh\\nufw delete deny ssh\\n```\\n\\n\u670d\u52a1\u540d\u548c\u7aef\u53e3\u53f7\u5b9a\u4e49\u5728`/etc/services`\u6587\u4ef6\u4e2d\u3002\u5728\u5176\u4e2d\u6709\u5173`ssh`\u670d\u52a1\u7684\u90e8\u5206\u662f\u8fd9\u6837\u5199\u7684\u3002\\n\\n```\\nssh\\t\\t22/tcp\\t\\t\\t\\t# SSH Remote Login Protocol\\n```\\n\\nUFW \u4f1a\u6839\u636e\u6b64\u6587\u4ef6\u5185\u5bb9\u7ba1\u7406\u7aef\u53e3\u3002\\n\\n\u5e38\u7528\u7684\u670d\u52a1\u540d\u79f0\u6709`ssh`\u3001`http`\u548c`https`\u7b49\u3002\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- [Uncomplicated Firewall (ufw) - Debian Wiki](https://wiki.debian.org/Uncomplicated%20Firewall%20%28ufw%29)\\n- [UFW - Community Help Wiki](https://help.ubuntu.com/community/UFW)\\n- [Uncomplicated Firewall - Wikipedia](https://en.wikipedia.org/wiki/Uncomplicated_Firewall)\\n- [An Introduction to Uncomplicated Firewall (UFW) - Linux.com](https://www.linux.com/training-tutorials/introduction-uncomplicated-firewall-ufw/)\\n- [UFW Tutorial: How To Set Up a Firewall with UFW on Ubuntu 20.04 | ArubaCloud.com](https://www.arubacloud.com/tutorial/how-to-set-up-and-configure-ufw-firewall-on-ubuntu-20-04.aspx)\\n- [How To Set Up a Firewall with UFW on Ubuntu 20.04 | DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-20-04)"},{"id":"/debian-environment-backup","metadata":{"permalink":"/blog/debian-environment-backup","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/debian-environment-backup.md","source":"@site/blog/debian-environment-backup.md","title":"Debian \u914d\u7f6e\u5907\u4efd","description":"\u8f6f\u4ef6\u6e90","date":"2021-12-24T00:00:00.000Z","formattedDate":"2021\u5e7412\u670824\u65e5","tags":[{"label":"debian","permalink":"/blog/tags/debian"},{"label":"linux","permalink":"/blog/tags/linux"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-12-24T00:00:00.000Z","tags":["debian","linux"]},"prevItem":{"title":"UFW\uff1a\u7b80\u5355\u6613\u4e0a\u624b\u7684\u9632\u706b\u5899\u89c4\u5219\u7ba1\u7406\u5de5\u5177","permalink":"/blog/ufw"},"nextItem":{"title":"Docker \u7a7f\u900f\u9632\u706b\u5899\u7684\u95ee\u9898","permalink":"/blog/docker-and-system-firewall"}},"content":"\x3c!-- more --\x3e\\n\\n## \u8f6f\u4ef6\u6e90\\n\\n\u6267\u884c\u547d\u4ee4\u3002\\n\\n```bash\\napt edit-sources\\n```\\n\\n\u66ff\u6362\u5185\u5bb9\uff0c\u8fd9\u91cc\u4f7f\u7528\u4e86 *\u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 [^1]*\u3002\\n\\n```\\n# \u9ed8\u8ba4\u6ce8\u91ca\u4e86\u6e90\u7801\u955c\u50cf\u4ee5\u63d0\u9ad8 apt update \u901f\u5ea6\uff0c\u5982\u6709\u9700\u8981\u53ef\u81ea\u884c\u53d6\u6d88\u6ce8\u91ca\\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free\\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free\\n\\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free\\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free\\n\\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free\\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free\\n\\ndeb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free\\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free\\n```\\n\\n\u6216\u8005\u4f7f\u7528 *\u963f\u91cc\u5df4\u5df4\u5f00\u6e90\u955c\u50cf\u7ad9\u70b9 [^2]*\\n\\n```\\ndeb http://mirrors.aliyun.com/debian/ bullseye main non-free contrib\\n# deb-src http://mirrors.aliyun.com/debian/ bullseye main non-free contrib\\ndeb http://mirrors.aliyun.com/debian-security/ bullseye-security main\\n# deb-src http://mirrors.aliyun.com/debian-security/ bullseye-security main\\ndeb http://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib\\n# deb-src http://mirrors.aliyun.com/debian/ bullseye-updates main non-free contrib\\ndeb http://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib\\n# deb-src http://mirrors.aliyun.com/debian/ bullseye-backports main non-free contrib\\n```\\n\\n## \u66f4\u65b0\u7cfb\u7edf\\n\\n```bash\\napt update\\napt upgrade\\n```\\n\\n## \u5b89\u88c5\u5c0f\u5de5\u5177\\n\\n```bash\\napt install curl wget tmux bat htop btop exa neofetch trash-cli\\napt install croc\\n```\\n\\n## \u914d\u7f6e\u522b\u540d\\n\\n\u6267\u884c\u547d\u4ee4\u3002\\n\\n```\\nnano .profile\\n```\\n\\n\u52a0\u5165\u5185\u5bb9\u3002\\n\\n```bash\\nalias bat=\'batcat\'\\nalias ll=\'exa -lha --modified --created --time-style long-iso --group-directories-first\'\\nalias dc=\'docker-compose\'\\n```\\n\\n## docker\\n\\n```bash\\nwget https://get.docker.com/ -O get-docker.sh\\n# sh get-docker.sh --mirror Aliyun\\nsh get-docker.sh\\nsystemctl enable docker\\n```\\n\\n## *docker-compose[^3]*\\n\\n```bash\\n# wget https://ghproxy.com/https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-linux-x86_64 -O /opt/docker-compose\\nwget https://github.com/docker/compose/releases/download/v2.2.2/docker-compose-linux-x86_64 -O /opt/docker-compose\\nchmod u+x /opt/docker-compose\\nln -s /opt/docker-compose /usr/local/sbin/docker-compose\\n```\\n\\n\u6216\u8005\u901a\u8fc7 Linuxbrew[^4] \u5b89\u88c5\u3002\\n\\n[^1]: [debian | \u955c\u50cf\u7ad9\u4f7f\u7528\u5e2e\u52a9 | \u6e05\u534e\u5927\u5b66\u5f00\u6e90\u8f6f\u4ef6\u955c\u50cf\u7ad9 | Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/help/debian/)\\n[^2]: [debian \u955c\u50cf-debian \u4e0b\u8f7d\u5730\u5740-debian \u5b89\u88c5\u6559\u7a0b - \u963f\u91cc\u5df4\u5df4\u5f00\u6e90\u955c\u50cf\u7ad9](https://developer.aliyun.com/mirror/debian)\\n[^3]: [Releases \xb7 docker/compose](https://github.com/docker/compose/releases)\\n[^4]: [Linuxbrew\uff1aLinux \u4e0a\u7684 Homebrew](./linuxbrew-the-homebrew-on-linux.md)"},{"id":"/docker-and-system-firewall","metadata":{"permalink":"/blog/docker-and-system-firewall","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/docker-and-system-firewall.md","source":"@site/blog/docker-and-system-firewall.md","title":"Docker \u7a7f\u900f\u9632\u706b\u5899\u7684\u95ee\u9898","description":"\u524d\u8a00","date":"2021-12-23T00:00:00.000Z","formattedDate":"2021\u5e7412\u670823\u65e5","tags":[{"label":"docker","permalink":"/blog/tags/docker"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-12-23T00:00:00.000Z","tags":["docker"]},"prevItem":{"title":"Debian \u914d\u7f6e\u5907\u4efd","permalink":"/blog/debian-environment-backup"},"nextItem":{"title":"\u901a\u8fc7\u4ee3\u7406\u8fde\u63a5 SSH \u670d\u52a1\u5668","permalink":"/blog/ssh-under-proxy"}},"content":"## \u524d\u8a00\\n\\n\u6709\u4e9b\u670d\u52a1\u53ea\u9700\u8981\u5728\u672c\u5730\u8bbf\u95ee\uff0c\u4e0d\u9700\u8981\u5411\u5916\u66b4\u9732\u7aef\u53e3\uff0c\u4e0d\u7136\u4f1a\u6709\u5b89\u5168\u9690\u60a3\uff0c\u603b\u6709\u4e00\u5927\u5806\u673a\u5668\u626b\u63cf\u4f60\u7684\u7aef\u53e3\uff0c\u5c1d\u8bd5\u63a5\u5165\u4f60\u7684\u670d\u52a1\u3002\\n\\n\u901a\u8fc7 Docker \u66b4\u9732\u7684\u7aef\u53e3\uff0c\u5373\u4f7f\u6ca1\u6709\u5728\u9632\u706b\u5899\u4e2d\u624b\u52a8\u653e\u884c\uff0c\u5728\u5916\u90e8\u8fd8\u662f\u53ef\u4ee5\u8bbf\u95ee\u5230\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u89e3\u51b3\u529e\u6cd5\\n\\n\u5728\u8fdb\u884c\u7aef\u53e3\u6620\u5c04\u7684\u65f6\u5019\u6307\u5b9a\u76d1\u542c\u5730\u5740\u4e3a`127.0.0.1`\uff0c\u5982`127.0.0.1:3000:80`\u3002\u5728\u6ca1\u6307\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u5982`3000:80`\uff0c\u76d1\u542c\u5730\u5740\u4e3a`0.0.0.0`\u3002\\n\\n\u8fd9\u5728\u4f7f\u7528`docker run`\u547d\u4ee4\u548c`docker-compose`\u547d\u4ee4\u7684\u65f6\u5019\u90fd\u53ef\u4ee5\u751f\u6548\u3002\\n\\n`docker run`\u547d\u4ee4\u793a\u4f8b\u5982\u4e0b\u3002\\n\\n```bash\\ndocker run -p 127.0.0.1:80:80 nginx\\n```\\n\\n\u4f7f\u7528`docker-compose`\u547d\u4ee4\u65f6\uff0c`docker-compose.yml`\u5185\u5bb9\u793a\u4f8b\u5982\u4e0b\u3002\\n\\n```yml\\nversion: \'3.3\'\\nservices:\\n    nginx:\\n        ports:\\n            - \'127.0.0.1:80:80\'\\n        image: nginx\\n```\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- [\u65e0\u89c6\u7cfb\u7edf\u9632\u706b\u5899\u7684 docker - \u535a\u5ba2 - binsite](https://www.binss.me/blog/docker-pass-through-system-firewall/)\\n- [docker \u65e0\u89c6\u9632\u706b\u5899\u95ee\u9898\u603b\u7ed3 - Icharle | Don\'t forget your first thoughts](https://icharle.com/dockeriptables.html)\\n- [docker \u5f00\u653e\u7684\u7aef\u53e3\u662f\u5982\u4f55\u5b9e\u73b0\u7ed5\u8fc7\u9632\u706b\u5899\u7684\uff1f - \u77e5\u4e4e](https://www.zhihu.com/question/64616650)\\n- [Docker \u4e0e IPtables - \u7b80\u4e66](https://www.jianshu.com/p/69d3ab177655)"},{"id":"/ssh-under-proxy","metadata":{"permalink":"/blog/ssh-under-proxy","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/ssh-under-proxy.md","source":"@site/blog/ssh-under-proxy.md","title":"\u901a\u8fc7\u4ee3\u7406\u8fde\u63a5 SSH \u670d\u52a1\u5668","description":"\u6b63\u6587","date":"2021-12-23T00:00:00.000Z","formattedDate":"2021\u5e7412\u670823\u65e5","tags":[{"label":"ssh","permalink":"/blog/tags/ssh"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-12-23T00:00:00.000Z","tags":["ssh"]},"prevItem":{"title":"Docker \u7a7f\u900f\u9632\u706b\u5899\u7684\u95ee\u9898","permalink":"/blog/docker-and-system-firewall"},"nextItem":{"title":"iterm2 \u5bf9 tmux \u7684\u7279\u6b8a\u652f\u6301","permalink":"/blog/tmux-integration-in-iterm2"}},"content":"\x3c!-- more --\x3e\\n\\n## \u6b63\u6587\\n\\n\u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u901a\u8fc7 SOCKS5 \u4ee3\u7406\u8fde\u63a5\u5230 SSH \u670d\u52a1\u5668\u3002\u5176\u4e2d`127.0.0.1:7890`\u662f\u672c\u5730 SOCKS5 \u4ee3\u7406\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002\\n\\n```bash\\nssh -oProxyCommand=\\"nc -x 127.0.0.1:7890 %h %p\\" root@198.198.198.198\\n```\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- [\u900f\u8fc7\u4ee3\u7406\u8fde\u63a5 SSH [Lainme\'s Blog]](https://www.lainme.com/doku.php/blog/2011/01/%E9%80%8F%E8%BF%87%E4%BB%A3%E7%90%86%E8%BF%9E%E6%8E%A5ssh)"},{"id":"/tmux-integration-in-iterm2","metadata":{"permalink":"/blog/tmux-integration-in-iterm2","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/tmux-integration-in-iterm2.md","source":"@site/blog/tmux-integration-in-iterm2.md","title":"iterm2 \u5bf9 tmux \u7684\u7279\u6b8a\u652f\u6301","description":"\u524d\u8a00","date":"2021-12-23T00:00:00.000Z","formattedDate":"2021\u5e7412\u670823\u65e5","tags":[{"label":"ssh","permalink":"/blog/tags/ssh"},{"label":"tmux","permalink":"/blog/tags/tmux"},{"label":"iterm2","permalink":"/blog/tags/iterm-2"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-12-23T00:00:00.000Z","tags":["ssh","tmux","iterm2"]},"prevItem":{"title":"\u901a\u8fc7\u4ee3\u7406\u8fde\u63a5 SSH \u670d\u52a1\u5668","permalink":"/blog/ssh-under-proxy"},"nextItem":{"title":"Zerotier \u5f02\u5730\u7ec4\u7f51","permalink":"/blog/zerotier"}},"content":"## \u524d\u8a00\\n\\ntmux[^1] \u662f\u4e00\u6b3e\u975e\u5e38\u597d\u7528\u7684\u7ec8\u7aef\u590d\u7528\u5de5\u5177\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5feb\u901f\u5730\u4fdd\u5b58\u548c\u6062\u590d\u5de5\u4f5c\u73b0\u573a\u3002\\n\\n\u4f7f\u7528 tmux \u7684\u65f6\u5019\u6709\u8bb8\u591a\u5feb\u6377\u952e\u9700\u8981\u8bb0\u5fc6\uff0c\u5e76\u4e14\u7a97\u683c\u5207\u6362\u548c\u7a97\u683c\u7684\u4e0a\u4e0b\u6eda\u52a8\u5e76\u4e0d\u65b9\u4fbf\uff1btmux \u7684\u5feb\u6377\u952e\u8fd8\u53ef\u80fd\u548c\u5176\u5b83\u8f6f\u4ef6\u7684\u5feb\u6377\u952e\u6709\u51b2\u7a81\u3002\\n\\niterm2[^2] \u662f macOS \u4e2d\u7684\u4e00\u4e2a\u7ec8\u7aef\u6a21\u62df\u5668\u8f6f\u4ef6\uff0c\u5b83\u5bf9 tmux \u6709\u72ec\u5bb6\u652f\u6301\uff0c\u53ef\u4ee5\u5728\u63a7\u5236\u6a21\u5f0f\u4e0b\u8fd0\u884c tmux\u3002\u5728\u8fd9\u4e2a\u6a21\u5f0f\u4e2d\uff0ctmux \u4f1a\u8bdd\u8868\u73b0\u548c\u672c\u5730\u7ec8\u7aef\u4e00\u6837\uff0c\u53ef\u4ee5\u4f7f\u7528 iterm2 \u7684\u5feb\u6377\u952e\u6765\u8fdb\u884c\u591a\u7a97\u53e3\u548c\u591a\u7a97\u683c\u5206\u9694\uff0c\u7528\u9f20\u6807\u5207\u6362\u7a97\u53e3\u548c\u7a97\u683c\uff0c\u5e76\u4e14\u7528\u9f20\u6807\u6eda\u8f6e\u4e0a\u4e0b\u6eda\u52a8\u7a97\u683c\u4e5f\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u4e0d\u9700\u8981\u8fdb tmux \u7684\u590d\u5236\u6a21\u5f0f\u6765\u6eda\u52a8\u7a97\u683c\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u4f7f\u7528\\n\\n\u4e0d\u8bba\u662f\u5728\u672c\u5730\u4f7f\u7528 tmux\uff0c\u8fd8\u662f\u901a\u8fc7 ssh \u4f7f\u7528\u8fdc\u7aef\u7684 tmux\uff0citerm2 \u90fd\u652f\u6301\u4f7f\u7528 tmux \u7684\u63a7\u5236\u6a21\u5f0f\u3002\\n\\ntmux \u7684\u63a7\u5236\u6a21\u5f0f\u901a\u8fc7\u9644\u52a0`-CC`\u53c2\u6570\u6765\u5f00\u542f\u3002\\n\\n\u5982`tmux -CC`\u547d\u4ee4\u4f1a\u5f00\u542f\u4e00\u4e2a\u65b0\u7684 tmux \u4f1a\u8bdd\uff0c\u5e76\u542f\u7528\u63a7\u5236\u6a21\u5f0f\uff0c\u4e4b\u540e\u4f60\u7684 iterm \u4f1a\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u7a97\u53e3\uff0c\u7528\u4e8e\u5c55\u793a tmux \u4f1a\u8bdd\uff1b\u8be5\u7a97\u53e3\u7684\u8868\u73b0\u548c\u6ca1\u4f7f\u7528 tmux \u65f6\u4e00\u6837\uff0c\u4f60\u4e0d\u9700\u8981\u901a\u8fc7\u5feb\u6377\u952e\u6216 tmux \u547d\u4ee4\u6765\u65b0\u5efa\u591a\u7a97\u53e3\u548c\u591a\u7a97\u683c\u3002\u4f7f\u7528 iterm2 \u7684\u5feb\u6377\u952e<kbd>Command+D</kbd>\u548c<kbd>Command+Shift+D</kbd>\u6765\u5206\u9694\u7a97\u683c\uff0c\u4f7f\u7528<kbd>Command+N</kbd>\u6765\u65b0\u5efa Tab\uff0c\u4f7f\u7528<kbd>Command+N</kbd>\u6765\u65b0\u5efa\u7a97\u53e3\u3002\\n\\n\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u6765\u9644\u52a0\u5230\u4e00\u4e2a\u5df2\u5b58\u5728\u7684 tmux \u4f1a\u8bdd\u3002\\n\\n```bash\\ntmux ls\\ntmux -CC attach -t 0\\n```\\n\\n\u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u540d\u4e3a`main`\u7684\u4f1a\u8bdd\uff0c\u5982\u679c\u8be5\u4f1a\u8bdd\u5b58\u5728\u7684\u8bdd\u5219\u76f4\u63a5\u6062\u590d\u8be5\u4f1a\u8bdd\u3002\\n\\n```bash\\ntmux -CC new -A -s main\\n```\\n\\n\u6216\u8005\u5728\u901a\u8fc7 SSH \u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u65f6\u5019\u76f4\u63a5\u6267\u884c\u6b64\u547d\u4ee4\uff0c\u76f4\u63a5\u6253\u5f00\u4e00\u4e2a tmux \u4f1a\u8bdd\u3002\\n\\n```bash\\nssh -t root@1.1.1.1 \'tmux -CC new -A -s main\'\\n```\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- [tmux Integration Best Practices \xb7 Wiki \xb7 George Nachman / iterm2 \xb7 GitLab](https://gitlab.com/gnachman/iterm2/-/wikis/tmux-Integration-Best-Practices)\\n\\n[^1]: [tmux | \u6211\u7684\u5b66\u4e60\u7b14\u8bb0](../docs/notes/utility/tmux)\\n[^2]: [tmux Integration - Documentation - iTerm2 - macOS Terminal Replacement](https://iterm2.com/documentation-tmux-integration.html)"},{"id":"/zerotier","metadata":{"permalink":"/blog/zerotier","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/zerotier.md","source":"@site/blog/zerotier.md","title":"Zerotier \u5f02\u5730\u7ec4\u7f51","description":"\u524d\u8a00","date":"2021-12-23T00:00:00.000Z","formattedDate":"2021\u5e7412\u670823\u65e5","tags":[{"label":"zerotier","permalink":"/blog/tags/zerotier"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-12-23T00:00:00.000Z","tags":["zerotier"]},"prevItem":{"title":"iterm2 \u5bf9 tmux \u7684\u7279\u6b8a\u652f\u6301","permalink":"/blog/tmux-integration-in-iterm2"},"nextItem":{"title":"\u5728 HTML \u4e2d\u4f7f\u7528 Unicode \u4ee3\u7801","permalink":"/blog/use-unicode-in-html"}},"content":"## \u524d\u8a00\\n\\nZerotier[^1] \u662f\u4e00\u4e2a\u4f18\u79c0\u7684\u5f02\u5730\u7ec4\u7f51\u89e3\u51b3\u65b9\u6848\u3002\u5176\u4f18\u70b9\u662f\u7ec4\u7f51\u7075\u6d3b\u3001\u4e0d\u9700\u8981\u66f4\u6539\u73b0\u6709\u7f51\u7edc\u7ed3\u6784\uff0c\u652f\u6301 P2P \u548c\u8f6c\u53d1\u3002\\n\\nZerotier \u4f7f\u7528\u4e5f\u4e0d\u662f\u6ca1\u6709\u9650\u5236\uff0c\u514d\u8d39\u7248\u672c\u7684\u6700\u591a\u52a0\u5165 50 \u4e2a\u5ba2\u6237\u7aef\uff0c\u4e0d\u8fc7\u5bf9\u4e8e\u4e2a\u4eba\u6765\u8bf4\u80af\u5b9a\u591f\u7528\u4e86\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u63a7\u5236\u53f0\\n\\n\u5728\u63a7\u5236\u53f0 [^2] \u6ce8\u518c\u5e76\u767b\u9646\u3002\\n\\n\u5728\u521b\u5efa\u7f51\u7edc\u540e\u4f1a\u5f97\u5230\u4e00\u4e2a Network ID\uff0c\u6b64 ID \u662f\u552f\u4e00\u7684\uff0c\u662f\u5ba2\u6237\u7aef\u52a0\u5165\u6b64\u7f51\u7edc\u6240\u9700\u7684\u552f\u4e00\u53c2\u6570\u3002\\n\\n![image-20211223012353090](zerotier.assets/image-20211223012353090.png)\\n\\n\u5728\u7f51\u7edc\u7ba1\u7406\u9875\u9762\u4e2d\uff0cAccess Control \u63a7\u5236\u5ba2\u6237\u7aef\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u5982\u679c\u9009\u62e9`PRIVATE`\u5219\u6bcf\u4e2a\u5ba2\u6237\u7aef\u7684\u52a0\u5165\u90fd\u9700\u8981\u5728\u6b64\u9875\u9762\u7ecf\u7531\u4f60\u5141\u8bb8\u3002\\n\\n![image-20211223012418452](zerotier.assets/image-20211223012418452.png)\\n\\n\u5728 IPv4 Auto-Assign \u4e2d\uff0c\u53ef\u4ee5\u5bf9\u5ba2\u6237\u7aef\u7684 IP \u6bb5\u8fdb\u884c\u914d\u7f6e\uff0c\u4e0d\u548c\u4f60\u539f\u6765\u7684\u7f51\u7edc\u5730\u5740\u51b2\u7a81\u5373\u53ef\u3002\\n\\n![image-20211223012631035](zerotier.assets/image-20211223012631035.png)\\n\\n\u5728 Members \u4e2d\u4f60\u53ef\u4ee5\u7ba1\u7406\u8be5\u7f51\u7edc\u4e0b\u7684\u6240\u6709\u5ba2\u6237\u7aef\uff0c\u52fe\u9009\u5ba2\u6237\u7aef\u5bf9\u5e94\u7684`Auth?`\u9009\u6846\u5373\u53ef\u8ba9\u5ba2\u6237\u7aef\u52a0\u5165\u6b64\u7f51\u7edc\u3002\u6bcf\u4e2a\u5ba2\u6237\u7aef\u5728\u52a0\u5165\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u5206\u914d\u4e00\u4e2a IP \u5730\u5740\uff0c\u4f60\u8fd8\u53ef\u4ee5\u624b\u52a8\u5206\u914d\u5ba2\u6237\u7aef\u7684 IP \u5730\u5740\u3002\\n\\n![image-20211223012842109](zerotier.assets/image-20211223012842109.png)\\n\\n\u5728\u591a\u4e2a\u5ba2\u6237\u7aef\u52a0\u5165\u7f51\u7edc\u540e\uff0c\u5373\u4f7f\u5904\u4e8e\u4e0d\u540c\u7684\u7f51\u7edc\u73af\u5883\u4e0b\uff0c\u5ba2\u6237\u7aef\u90fd\u53ef\u4ee5\u901a\u8fc7\u5206\u914d\u5230\u7684 IP \u4e92\u76f8\u8bbf\u95ee\u3002\\n\\n## \u5ba2\u6237\u7aef\\n\\nZerotier \u5728\u5e38\u7528\u5e73\u53f0\u4e0a\u90fd\u6709\u5ba2\u6237\u7aef\uff0c\u6709\u56fe\u5f62\u5316\u7684\u6709\u547d\u4ee4\u884c\u7684\u3002\\n\\n![image-20211223011629303](zerotier.assets/image-20211223011629303.png)\\n\\n## \u81ea\u52a8 NAT\\n\\n\u5728\u524d\u9762\u7684\u65b9\u6848\u4e2d\uff0c \u5982\u679c\u591a\u4e2a\u673a\u5668\u4e92\u76f8\u8bbf\u95ee\u5c31\u9700\u8981\u6bcf\u4e2a\u673a\u5668\u90fd\u5b89\u88c5 Zerotier \u5ba2\u6237\u7aef\u5e76\u52a0\u5165\u540c\u4e00\u4e2a\u7f51\u7edc\u3002\\n\\n\u501f\u52a9 OpenWrt \u548c Zerotier \u53ef\u4ee5\u66b4\u9732\u6574\u4e2a\u5c40\u57df\u7f51\u5230 Zerotier \u7f51\u7edc\u4e2d\uff0c\u53ea\u9700\u8981 OpenWrt \u4e2d\u7684 Zerotier \u52a0\u5165\u7f51\u7edc\u5373\u53ef\u3002\\n\\n\u52fe\u9009\u300c\u81ea\u52a8\u5141\u8bb8\u5ba2\u6237\u7aef NAT\u300d\u5373\u53ef\u3002\\n\\n![image-20211223014114997](zerotier.assets/image-20211223014114997.png)\\n\\n\u8bb8\u591a OpenWrt \u7684\u53d1\u884c\u7248\u90fd\u96c6\u6210\u4e86\u6b64\u8f6f\u4ef6\u5305\u3002\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b Telegram \u9891\u9053\uff1a\\n\\n- [Telegram: Contact @OpenWRTcn](https://t.me/OpenWRTcn)\\n- [Telegram: Contact @aixiaoshao](https://t.me/aixiaoshao)\\n- [Telegram: Contact @passwallOpenWRT233](https://t.me/passwallOpenWRT233)\\n\\nOpenWrt \u4e0d\u9700\u8981\u4f5c\u4e3a\u4f60\u7684\u4e3b\u8def\u7531\uff0c\u5b83\u53ef\u4ee5\u901a\u8fc7 LAN \u53e3\u63a5\u5165\u4f60\u73b0\u6709\u7684\u5c40\u57df\u7f51\uff0c\u5173\u95ed LAN \u53e3\u7684 DHCP \u670d\u52a1\uff0c\u4f5c\u4e3a\u65c1\u8def\u7531\u4f7f\u7528\u3002\\n\\n\u4f60\u8fd8\u9700\u8981\u5728 Zerotier \u63a7\u5236\u53f0\u4e2d\u914d\u7f6e\u9759\u6001\u8def\u7531\u3002\\n\\n![image-20211223014932675](zerotier.assets/image-20211223014932675.png)\\n\\n\u5728\u6dfb\u52a0\u9759\u6001\u8def\u7531\u7684\u65f6\u5019`Destination`\u586b\u5c40\u57df\u7f51\u7684\u7f51\u7edc\u5730\u5740\uff0c`(Via)`\u4e3a\u4e0b\u4e00\u8df3\u5730\u5740\uff0c\u5373 OpenWrt \u8def\u7531\u5668\u7684 Zerotier \u5730\u5740\u3002\\n\\n\u4e0a\u9762\u7684\u9759\u6001\u8def\u7531\u914d\u7f6e\u5c06`192.168.10.0/24`\u5c40\u57df\u7f51\u548c`192.168.11.0/24`\u5c40\u57df\u7f51\u66b4\u9732\u5728 Zerotier \u7f51\u7edc\u4e2d\u3002`172.22.39.15`\u548c`172.22.105.60`\u5206\u522b\u662f\u4e24\u4e2a OpenWrt \u8def\u7531\u5668\u5728 Zerotier \u7f51\u7edc\u4e2d\u7684\u5730\u5740\uff0c\u8fd9\u4e24\u4e2a\u8def\u7531\u5668\u5747\u914d\u7f6e\u4e86\u81ea\u52a8\u5141\u8bb8\u5ba2\u6237\u7aef NAT\u3002\\n\\n\u8fd9\u6837\u505a\u7684\u4f18\u70b9\u662f\u7ba1\u7406\u65b9\u4fbf\uff0c\u4e0d\u9700\u8981\u5728\u6bcf\u4e2a\u673a\u5668\u4e0a\u5b89\u88c5\u5ba2\u6237\u7aef\u5e76\u4e14\u52a0\u5165\u7f51\u7edc\u3002\u5e76\u4e14\u5373\u4f7f\u4f60\u5728\u4f7f\u7528\u79fb\u52a8\u7f51\u7edc\u7684\u65f6\u5019\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5230\u5bb6\u91cc\u5c40\u57df\u7f51\u7684 IP\uff0c\u5e76\u4e14\u8fd8\u662f\u901a\u8fc7\u5c40\u57df\u7f51 IP \u8bbf\u95ee\uff0c\u5e76\u4e0d\u9700\u8981\u4fee\u6539\u8f6f\u4ef6\u914d\u7f6e\u3002\\n\\n\u5927\u81f4\u7684\u7f51\u7edc\u62d3\u6251\u56fe\u5982\u4e0b\u3002\u5728\u5916\u4f7f\u7528\u79fb\u52a8\u7f51\u7edc\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528`192.168.10.0/24`\u6216`192.168.11.0/24`\u7f51\u6bb5\u7684\u5185\u7f51\u5730\u5740\u8bbf\u95ee\u5c40\u57df\u7f51 A \u6216\u5c40\u57df\u7f51 B \u5185\u7684\u8d44\u6e90\u3002\\n\\n\u5982\u679c\u5c40\u57df\u7f51 A \u4e2d\u7684\u67d0\u53f0\u8bbe\u5907\u9700\u8981\u8bbf\u95ee\u5c40\u57df\u7f51 B \u4e2d\u7684\u8d44\u6e90\uff0c\u8fd8\u662f\u9700\u8981\u5728\u8be5\u8bbe\u5907\u4e0a\u5b89\u88c5 Zerotier \u5ba2\u6237\u7aef\uff0c\u5e76\u4e14\u52a0\u5165\u7edf\u4e00 Zerotier \u7f51\u7edc\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7`192.168.11.0/24`\u7684\u5185\u7f51  IP \u5730\u5740\u6765\u8bbf\u95ee\u5c40\u57df\u7f51 B \u4e2d\u7684\u8d44\u6e90\u4e86\u3002\\n\\n![image-20211223022539047](zerotier.assets/image-20211223022539047.png)\\n\\n[^1]: [ZeroTier \u2013 Global Area Networking](https://www.zerotier.com/)\\n[^2]: [ZeroTier Central](https://my.zerotier.com/network)"},{"id":"/use-unicode-in-html","metadata":{"permalink":"/blog/use-unicode-in-html","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/use-unicode-in-html.md","source":"@site/blog/use-unicode-in-html.md","title":"\u5728 HTML \u4e2d\u4f7f\u7528 Unicode \u4ee3\u7801","description":"\u524d\u8a00","date":"2021-11-27T00:00:00.000Z","formattedDate":"2021\u5e7411\u670827\u65e5","tags":[],"truncated":true,"authors":[],"frontMatter":{"date":"2021-11-27T00:00:00.000Z"},"prevItem":{"title":"Zerotier \u5f02\u5730\u7ec4\u7f51","permalink":"/blog/zerotier"},"nextItem":{"title":"\u914d\u7f6e oh-my-zsh","permalink":"/blog/oh-my-zsh"}},"content":"## \u524d\u8a00\\n\\n\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u9700\u8981\u5728 HTML \u4e2d\u5d4c\u5165\u7279\u6b8a\u7b26\u53f7\uff0c\u4f46\u662f HTML \u5b9e\u4f53\u4e2d\u5e76\u4e0d\u5305\u542b\u8fd9\u4e9b\u7b26\u53f7\uff0c\u6216\u662f\u8be5\u5b9e\u4f53\u7b26\u53f7\u4e0d\u80fd\u88ab\u6d4f\u89c8\u5668\u6b63\u786e\u6e32\u67d3\uff0c\u53ef\u4ee5\u901a\u8fc7 Unicode \u4ee3\u7801\u4ee3\u66ff\u8fd9\u4e9b\u5b57\u7b26\uff0c\u4ee5\u8fbe\u5230\u5728\u7f51\u9875\u4e2d\u6b63\u786e\u6e32\u67d3\u8be5\u5b57\u7b26\u7684\u76ee\u7684\u3002HTML \u5b9e\u4f53\u4ee3\u7801\u548c\u5b57\u7b26\u5bf9\u5e94\u7684 Unicode \u4ee3\u7801\u53ef\u4ee5\u53c2\u8003 HTML Standard[^1]\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u58f0\u660e\u7f51\u9875\u7f16\u7801\\n\\n\u4e3a\u4e86\u80fd\u5728\u7f51\u9875\u4e2d\u6b63\u5e38\u663e\u793a Unicode \u5b57\u7b26\uff0c\u8be5\u7f51\u9875\u5fc5\u987b\u4f7f\u7528 Unicode \u7f16\u7801\uff0c\u5982 UTF-8\u3002\u53ef\u5728`meta`\u6807\u7b7e\u91cc\u58f0\u660e\u7f51\u9875\u7f16\u7801\uff0c\u5e76\u786e\u4fdd HTTP \u5934\u4e5f\u4f7f\u7528\u6b64\u7f16\u7801\u3002\\n\\n```html\\n<meta http-equiv=\\"Content-Type\\" content=\\"text/html; charset=utf-8\\" />\\n```\\n\\n## \u4f7f\u7528 HTML \u5b9e\u4f53\\n\\n\u5728 HTML Standard[^1] \u4e2d\u53ef\u4ee5\u770b\u5230\u8be5\u7b26\u53f7\u7684\u540d\u5b57\u662f`Aacute;`\uff0c\u53ef\u4ee5\u5728\u5176\u524d\u65b9\u52a0\u4e0a`&`\u6765\u8868\u793a HTML \u547d\u540d\u5b57\u7b26\u3002\\n\\n<p>&Aacute;</p>\\n\\n```html\\n<p>&Aacute;</p>\\n```\\n\\n\u4f46\u662f\u5e76\u4e0d\u662f\u6240\u6709\u7684\u547d\u540d\u5b57\u7b26\u90fd\u80fd\u88ab\u6e32\u67d3\u51fa\u6765\uff0c\u6bd4\u5982\u5b57\u7b26`{`\u3002\\n\\n<p>&lbrace;</p>\\n\\n```html\\n<p>&lbrace;</p>\\n```\\n\\n## \u4f7f\u7528 Unicode \u4ee3\u7801\\n\\n\u53ef\u4ee5\u4f7f\u7528\u5341\u516d\u8fdb\u5236\u7f16\u7801\u3002\\n\\n<p>&#x0007B;</p>\\n\\n```html\\n<p>&#x0007B;</p>\\n```\\n\\n\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5341\u8fdb\u5236\u7f16\u7801\u3002\\n\\n<p>&#123;</p>\\n\\n```html\\n<p>&#123;</p>\\n```\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- [HTML\u3001CSS\u3001JS \u5bf9 unicode \u5b57\u7b26\u7684\u4e0d\u540c\u5904\u7406 - \u6211\u662f\u5c0f\u8317\u540c\u5b66 - \u535a\u5ba2\u56ed](https://www.cnblogs.com/liuxianan/p/display-unicode-character-in-html-css-and-js.html)\\n- [HTML Unicode UTF-8](https://www.w3schools.com/charsets/ref_utf_symbols.asp)\\n\\n[^1]: [HTML Standard](https://html.spec.whatwg.org/multipage/named-characters.html#named-character-references)"},{"id":"/oh-my-zsh","metadata":{"permalink":"/blog/oh-my-zsh","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/oh-my-zsh.md","source":"@site/blog/oh-my-zsh.md","title":"\u914d\u7f6e oh-my-zsh","description":"\u524d\u8a00","date":"2021-11-26T00:00:00.000Z","formattedDate":"2021\u5e7411\u670826\u65e5","tags":[],"truncated":true,"authors":[],"frontMatter":{"date":"2021-11-26T00:00:00.000Z"},"prevItem":{"title":"\u5728 HTML \u4e2d\u4f7f\u7528 Unicode \u4ee3\u7801","permalink":"/blog/use-unicode-in-html"},"nextItem":{"title":"Scoop\uff1aWindows \u5305\u7ba1\u7406\u5668","permalink":"/blog/scoop-the-windows-package-manager"}},"content":"## \u524d\u8a00\\n\\noh-my-zsh[^1] \u662f zsh[^2] \u7684\u4e00\u6b3e\u63d2\u4ef6\u7ba1\u7406\u5668\uff0c\u63d0\u4f9b\u4e86\u5f88\u591a zsh \u7684\u63d2\u4ef6\u548c\u4e3b\u9898\u3002\\n\\nzsh \u7684\u4f18\u70b9\u662f\u517c\u5bb9 bash \u8bed\u6cd5\uff0c\u53ef\u4ee5\u5728\u65e5\u5e38\u5de5\u4f5c\u4e2d\u66ff\u6362\u6389 bash\uff0c\u5e76\u4e14\u53ef\u4ee5\u4eab\u53d7 zsh \u7684\u5f88\u591a\u7279\u6027\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u5b89\u88c5\\n\\n\u5b89\u88c5 oh-my-zsh \u4e4b\u524d\u9700\u8981\u5148\u5b89\u88c5 zsh \u548c git\uff0coh-my-zsh \u4f9d\u8d56\u5b83\u4eec\u5728\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002\\n\\n\u5728 zsh \u4e2d\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 oh-my-zsh\u3002\\n\\n```bash\\nsh -c \\"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\\"\\n```\\n\\n\u5b89\u88c5\u811a\u672c\u5c31\u662f\u5e2e\u4f60\u514b\u9686\u4e86 oh-my-zsh \u7684\u4ed3\u5e93\u5230`~/.oh-my-zsh`\uff0c\u5e76\u4e14\u7ed9\u4f60\u65b0\u5efa\u4e86\u4e00\u4e2a`~/.zshrc`\u6587\u4ef6\u6a21\u677f\uff0c\u7528\u4e8e\u5728 zsh \u542f\u52a8\u65f6\u52a0\u8f7d oh-my-zsh\u3002\\n\\n\u4f60\u4e4b\u524d\u7684`.zshrc`\u6587\u4ef6\u5185\u5bb9\u88ab\u8f6c\u79fb\u5230`.zshrc.pre-oh-my-zsh`\uff0c\u73b0\u5728\u7684`.zshrc`\u7684\u5185\u5bb9\u662f\u5168\u65b0\u7684\uff0c\u5982\u679c\u4f60\u4e4b\u524d\u5728\u7528\u6237\u914d\u7f6e\u6587\u4ef6\u91cc\u505a\u4e86\u91cd\u8981\u914d\u7f6e\uff0c\u4f60\u9700\u8981\u5c06`.zshrc.pre-oh-my-zsh`\u91cc\u7684\u5185\u5bb9\u9644\u52a0\u5230\u73b0\u5728\u7684`.zshrc`\u4e4b\u540e\uff0c\u4ee5\u786e\u4fdd\u4e4b\u524d\u7684\u529f\u80fd\u6b63\u5e38\u4f7f\u7528\u3002\\n\\n## \u4e3b\u9898\\n\\noh-my-zsh \u9ed8\u8ba4\u81ea\u5e26\u4e86\u8bb8\u591a\u4e3b\u9898\uff0c\u8fd9\u4e9b\u4e3b\u9898\u6587\u4ef6\u5b58\u653e\u5728`~/.oh-my-zsh/themes/`\u6587\u4ef6\u5939\u4e0b\u3002\u4f60\u53ef\u4ee5\u5728 oh-my-zsh \u4e3b\u9898 wiki[^3] \u4e2d\u53c2\u8003\u8fd9\u4e9b\u4e3b\u9898\u7684\u9884\u89c8\u56fe\u3002\\n\\n\u7f16\u8f91`.zshrc`\u6587\u4ef6\uff0c\u4fee\u6539`ZSH_THEME`\u914d\u7f6e\uff0c\u6267\u884c`exec zsh`\u547d\u4ee4\u6216\u91cd\u542f\u7ec8\u7aef\u5373\u53ef\u770b\u5230\u65b0\u4e3b\u9898\u7684\u6548\u679c\u3002\\n\\n```bash\\nZSH_THEME=\\"robbyrussell\\"\\n```\\n\\n## \u7b2c\u4e09\u65b9\u4e3b\u9898\\n\\n\u9664\u4e86\u9ed8\u8ba4\u81ea\u5e26\u7684\u4e3b\u9898\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528\u7b2c\u4e09\u65b9\u4e3b\u9898\uff0c\u5982 Dracula[^4] \u4e3b\u9898\u3002\\n\\n\u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u514b\u9686 Dracula \u4e3b\u9898\u7684\u4ed3\u5e93\u5230\u672c\u5730\u7684`~/zsh-dracula`\u6587\u4ef6\u5939\u3002\\n\\n```bash\\ngit clone https://github.com/dracula/zsh.git ~/zsh-dracula\\n```\\n\\n\u4f60\u53ef\u4ee5\u624b\u52a8\u590d\u5236`~/zsh-dracula`\u4e0b\u7684`dracula.zsh-theme`\u6587\u4ef6\u548c`lib`\u6587\u4ef6\u5939\u81f3`~/.oh-my-zsh/custome/themes/`\u6587\u4ef6\u5939\u4e0b\u6765\u5b8c\u6210\u4e3b\u9898\u7684\u5b89\u88c5\u3002\\n\\n\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u4e3b\u9898\u7684\u8f6f\u8fde\u63a5\u5230\u4e3b\u9898\u6587\u4ef6\u5939\uff0c\u6765\u5b8c\u6210\u4e3b\u9898\u7684\u5b89\u88c5\u3002\\n\\n```bash\\nln -s ~/zsh-dracula/dracula.zsh-theme $ZSH_CUSTOM/themes/dracula.zsh-theme\\n```\\n\\n\u5728\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\u7f16\u8f91`.zshrc`\u6587\u4ef6\uff0c\u4fee\u6539`ZSH_THEME`\u914d\u7f6e\uff0c\u6267\u884c`exec zsh`\u547d\u4ee4\u6216\u91cd\u542f\u7ec8\u7aef\u5373\u53ef\u770b\u5230\u65b0\u4e3b\u9898\u7684\u6548\u679c\u3002\\n\\n```bash\\nZSH_THEME=\\"dracula\\"\\n```\\n\\n## \u63d2\u4ef6\\n\\noh-my-zsh \u9ed8\u8ba4\u81ea\u5e26\u4e86\u8bb8\u591a\u63d2\u4ef6\uff0c\u8fd9\u4e9b\u63d2\u4ef6\u6587\u4ef6\u5b58\u653e\u5728`~/.oh-my-zsh/plugins/`\u6587\u4ef6\u5939\u4e0b\u3002\u4f60\u53ef\u4ee5\u5728 oh-my-zsh \u63d2\u4ef6 wiki[^5] \u4e2d\u67e5\u9605\u9ed8\u8ba4\u63d2\u4ef6\u7684\u76ee\u5f55\u548c\u6587\u6863\u3002\\n\\n\u7f16\u8f91`.zshrc`\u6587\u4ef6\uff0c\u4fee\u6539`plugins`\u914d\u7f6e\uff0c\u628a\u63d2\u4ef6\u540d\u79f0\u5199\u5165\u5176\u4e2d\u5373\u53ef\u542f\u7528\u63d2\u4ef6\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u540d\u79f0\u4e4b\u95f4\u7528\u7a7a\u683c\u6216\u6362\u884c\u5206\u9694\uff0c\u4e0d\u8981\u7528\u9017\u53f7\u3002\u6ce8\u610f\u8fc7\u591a\u7684\u63d2\u4ef6\u4f1a\u5f71\u54cd\u542f\u52a8\u65f6\u95f4\u3002\u6267\u884c`exec zsh`\u547d\u4ee4\u6216\u91cd\u542f\u7ec8\u7aef\u5373\u53ef\u8ba9\u914d\u7f6e\u6587\u4ef6\u751f\u6548\u3002\\n\\n```bash\\nplugins=(git theme)\\n```\\n\\n\u4e0b\u9762\u8bb0\u5f55\u4e00\u4e9b\u81ea\u7528\u7684\u63d2\u4ef6\u3002\\n\\n### git[^6]\\n\\n\u9ed8\u8ba4\u542f\u7528\u7684\u63d2\u4ef6\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e9b Git \u547d\u4ee4\u7684\u522b\u540d\u548c Git \u76f8\u5173\u7684\u5e38\u7528\u547d\u4ee4\uff0c\u8be6\u60c5\u53ef\u53c2\u8003\u5176\u6587\u6863 [^6]\u3002\\n\\n### theme[^7]\\n\\n\u7528\u547d\u4ee4\u9884\u89c8\u4e3b\u9898\uff0c\u4e0d\u9700\u8981\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u3002\\n\\n- `theme`\uff0c\u968f\u673a\u52a0\u8f7d\u4e3b\u9898\\n- `lstheme`\uff0c\u5217\u51fa\u6240\u6709\u4e3b\u9898\\n- `theme <name>`\uff0c\u9884\u89c8\u6307\u5b9a\u4e3b\u9898\\n\\n### z[^8]\\n\\n\u63d0\u4f9b\u4e00\u4e2a`z`\u547d\u4ee4\u7528\u4e8e\u5e38\u7528\u76ee\u5f55\u5feb\u901f\u8df3\u8f6c\uff0c\u65e5\u5e38\u4e2d\u53ef\u4ee5\u66ff\u6362\u6389`cd`\uff0c\u5728\u901a\u8fc7`z`\u547d\u4ee4\u5207\u6362\u76ee\u5f55\u540e\u4e0b\u6b21\u5207\u6362\u53ea\u9700\u8981\u8f93\u5165\u90e8\u5206\u6587\u4ef6\u540d\u3002\\n\\n\u4e0b\u9762\u7684\u547d\u4ee4\u6f14\u793a\u4e86`z plug`\u547d\u4ee4\u5207\u6362\u5230`~/.oh-my-zsh/plugins`\u76ee\u5f55\u3002\\n\\n```bash\\n/usr/bin$ z plug  # Even \'z p\' might suffice\\n~/.oh-my-zsh/plugins$\\n```\\n\\n### safe-paste[^9]\\n\\n\u9632\u6b62\u7c98\u8d34\u8fdb\u7ec8\u7aef\u7684\u591a\u884c\u4ee3\u7801\u76f4\u63a5\u6267\u884c\u3002\\n\\n### sudo[^10]\\n\\n\u6309\u4e24\u6b21<kbd>ESC</kbd>\u4e3a\u4f60\u5f53\u524d\u7684\u547d\u4ee4\u6216\u524d\u4e00\u6b21\u547d\u4ee4\u52a0\u4e0a`sudo`\u524d\u7f00\u3002\\n\\n## \u7b2c\u4e09\u65b9\u63d2\u4ef6\\n\\n### zsh-syntax-highlighting[^11]\\n\\n\u547d\u4ee4\u8bed\u6cd5\u9ad8\u4eae\u3002\\n\\n\u514b\u9686\u4ed3\u5e93\u3002\\n\\n```bash\\ngit clone https://github.com/zsh-users/zsh-syntax-highlighting.git $ZSH_CUSTOM/plugins/zsh-syntax-highlighting\\n```\\n\\n\u7f16\u8f91`.zshrc`\u6587\u4ef6\uff0c\u4fee\u6539`plugins`\u914d\u7f6e\uff0c\u52a0\u4e0a`zsh-syntax-highlighting`\u3002\\n\\n```bash\\nplugins=(git theme zsh-syntax-highl3ighting)\\n```\\n\\n### zsh-autosuggestions[^12]\\n\\n\u6839\u636e\u5386\u53f2\u547d\u4ee4\u548c\u547d\u4ee4\u63d0\u793a\u63d2\u4ef6\u6765\u7ed9\u4f60\u8f93\u5165\u5efa\u8bae\u3002\\n\\n\u514b\u9686\u4ed3\u5e93\u3002\\n\\n```bash\\ngit clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions\\n```\\n\\n\u7f16\u8f91`.zshrc`\u6587\u4ef6\uff0c\u4fee\u6539`plugins`\u914d\u7f6e\uff0c\u52a0\u4e0a`zsh-autosuggestions`\u3002\\n\\n[^1]:[ohmyzsh/ohmyzsh: \ud83d\ude43 A delightful community-driven (with 1900+ contributors) framework for managing your zsh configuration. Includes 300+ optional plugins (rails, git, macOS, hub, docker, homebrew, node, php, python, etc), 140+ themes to spice up your morning, and an auto-update tool so that makes it easy to keep up with the latest updates from the community.](https://github.com/ohmyzsh/ohmyzsh)\\n[^2]:[Installing ZSH \xb7 ohmyzsh/ohmyzsh Wiki](https://github.com/ohmyzsh/ohmyzsh/wiki/Installing-ZSH)\\n[^3]:[Themes \xb7 ohmyzsh/ohmyzsh Wiki](https://github.com/ohmyzsh/ohmyzsh/wiki/Themes)\\n[^4]:[Dark theme for Zsh and 223+ apps \u2014 Dracula](https://draculatheme.com/zsh)\\n[^5]:[Plugins \xb7 ohmyzsh/ohmyzsh Wiki (github.com)](https://github.com/ohmyzsh/ohmyzsh/wiki/Plugins)\\n[^6]:[ohmyzsh/plugins/git at master \xb7 ohmyzsh/ohmyzsh](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git)\\n[^7]:[ohmyzsh/plugins/themes at master \xb7 ohmyzsh/ohmyzsh](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/themes)\\n[^8]:[ohmyzsh/plugins/z at master \xb7 ohmyzsh/ohmyzsh](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/z)\\n[^9]:[ohmyzsh/plugins/safe-paste at master \xb7 ohmyzsh/ohmyzsh](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/safe-paste)\\n[^10]: [ohmyzsh/plugins/sudo at master \xb7 ohmyzsh/ohmyzsh](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/sudo)\\n[^11]: [zsh-users/zsh-syntax-highlighting: Fish shell like syntax highlighting for Zsh.](https://github.com/zsh-users/zsh-syntax-highlighting)"},{"id":"/scoop-the-windows-package-manager","metadata":{"permalink":"/blog/scoop-the-windows-package-manager","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/scoop-the-windows-package-manager.md","source":"@site/blog/scoop-the-windows-package-manager.md","title":"Scoop\uff1aWindows \u5305\u7ba1\u7406\u5668","description":"\u5f15\u5165 Scoop","date":"2021-11-24T00:00:00.000Z","formattedDate":"2021\u5e7411\u670824\u65e5","tags":[{"label":"scoop","permalink":"/blog/tags/scoop"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-11-24T00:00:00.000Z","tags":["scoop"]},"prevItem":{"title":"\u914d\u7f6e oh-my-zsh","permalink":"/blog/oh-my-zsh"},"nextItem":{"title":"Windows Terminal + pwsh + oh my posh3 + PSReadLine \u6253\u9020\u4e00\u4e2a\u597d\u7528\u7684\u7ec8\u7aef","permalink":"/blog/use-pwsh-and-oh-my-posh3-on-windows"}},"content":"## \u5f15\u5165 Scoop\\n\\n\u5305\u7ba1\u7406\u5668\u7528\u4e8e\u7ba1\u7406\u8f6f\u4ef6\u7684\u751f\u547d\u5468\u671f\uff1a\u5b89\u88c5\u8f6f\u4ef6\u53ca\u5176\u4f9d\u8d56\uff0c\u914d\u7f6e\u8f6f\u4ef6\u73af\u5883\u53d8\u91cf\u3001\u66f4\u65b0\u8f6f\u4ef6\u548c\u5378\u8f7d\u8f6f\u4ef6\u3002\\n\\nScoop[^1] \u662f Windows \u4e0a\u7684\u4e00\u6b3e\u5305\u7ba1\u7406\u5668\uff0c\u5b83\u662f\u7528 PowerShell \u7f16\u5199\u7684\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f7f\u7528\u8005\u7279\u522b\u662f\u5f00\u53d1\u4eba\u5458\u7ba1\u7406\u8f6f\u4ef6\u73af\u5883\uff0c\u5feb\u901f\u6784\u5efa\u5f00\u53d1\u73af\u5883\u3002\u5e38\u7528\u7684\u5f00\u53d1\u5de5\u5177\u90fd\u53ef\u4ee5\u901a\u8fc7 Scoop \u5b89\u88c5\u548c\u7ba1\u7406\u3002\\n\\n\x3c!-- more --\x3e\\n\\nScoop \u7684\u672c\u8d28\u662f\u4e00\u7cfb\u5217 PowerShell \u811a\u672c\u7684\u96c6\u5408\uff0c\u6240\u4ee5\u8fd0\u884c Scoop \u9700\u8981 PowerShell \u73af\u5883\u3002\u5e76\u4e14\u5b83\u662f\u9488\u5bf9 Windows \u7cfb\u7edf\u8bbe\u8ba1\u7684\uff0c\u4e0d\u5177\u6709\u8de8\u5e73\u53f0\u6027\u3002\\n\\nScoop \u5bf9\u8f6f\u4ef6\u7684\u7ba1\u7406\u529f\u80fd\u4f9d\u8d56\u4e8e\u63d0\u524d\u5b9a\u4e49\u597d\u7684\u9488\u5bf9\u6bcf\u4e2a\u8f6f\u4ef6\u5305\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8fd9\u4e9b\u6587\u4ef6\u4e3a JSON \u683c\u5f0f\uff0c\u79f0\u4e3a **Manifest**\uff0c\u7531\u4f17\u591a\u5f00\u53d1\u8005\u7ef4\u62a4\uff0c\u5e76\u6258\u7ba1\u5728 Github\u3002\u4e00\u4e2a Manifest \u5bf9\u5e94\u4e00\u4e2a\u8f6f\u4ef6\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u8be5\u8f6f\u4ef6\u7684\u4e0b\u8f7d\u5730\u5740\u3001\u5b89\u88c5/\u5378\u8f7d\u811a\u672c\u548c\u5176\u5b83\u5fc5\u8981\u4fe1\u606f\u3002\u5b58\u653e Manifest \u7684\u4ed3\u5e93\u88ab\u79f0\u4e3a **Bucket**\uff0c\u5bf9\u5e94\u4e00\u4e2a Git \u4ed3\u5e93\u3002Manifest \u548c Bucket \u662f Scoop \u4e2d\u7684\u6838\u5fc3\u6982\u5ff5\u3002\\n\\nScoop \u5bf9 Manifest \u548c Bucket \u7684\u7ba1\u7406\u4f9d\u8d56\u4e8e Git\u3002\u76ee\u524d Scoop \u7684\u5b98\u65b9 Bucket \u6258\u7ba1\u5728 GitHub\u3002\\n\\nScoop \u5b89\u88c5\u8f6f\u4ef6\u7684\u8fc7\u7a0b\u4f9d\u8d56\u4e8e 7-zip \u548c\u5176\u5b83\u7c7b\u578b\u7684\u89e3\u5305\u8f6f\u4ef6\u5982 innounp\uff0cScoop \u4f1a\u5c06\u5b89\u88c5\u5305\u91cc\u7684\u6587\u4ef6\u89e3\u538b\u81f3\u8f6f\u4ef6\u5b89\u88c5\u76ee\u5f55\u3002`.zip`\u3001`.7z`\u3001`.msi`\u548c\u5927\u90e8\u5206\u7684`.exe`\u6587\u4ef6\u90fd\u80fd\u89e3\u5305\uff0c\u8f6f\u4ef6\u7684\u5b89\u88c5\u8fc7\u7a0b\u90fd\u662f\u81ea\u52a8\u7684\uff0c\u5e76\u4e0d\u662f\u4f20\u7edf\u7684\u53ef\u89c6\u5316\u754c\u9762\u65b9\u5f0f\uff0c\u4e0d\u9700\u8981\u4eba\u5de5\u5e72\u9884\uff0c\u90fd\u7531 Scoop \u81ea\u52a8\u7ba1\u7406\uff0c\u7a0b\u5e8f\u6587\u4ef6\u653e\u5728\u7edf\u4e00\u7684\u4f4d\u7f6e\u3002\u8f6f\u4ef6\u5f00\u53d1\u8005\u5e76\u4e0d\u9700\u8981\u4e13\u95e8\u4e3a Scoop \u5236\u4f5c\u4e13\u95e8\u7684\u5b89\u88c5\u5305\uff0c\u901a\u7528\u7684\u8f6f\u4ef6\u5b89\u88c5\u7a0b\u5e8f\u90fd\u53ef\u4ee5\u901a\u8fc7 Scoop \u5b89\u88c5\u3002\\n\\n\u901a\u8fc7 Scoop \u5b89\u88c5\u7684\u8f6f\u4ef6\u5927\u591a\u662f\u300c\u7eff\u8272\u8f6f\u4ef6\u300d\uff0c\u5373\u4e0d\u4f1a\u5199\u5165\u6ce8\u518c\u8868\u3001\u4e0d\u4f1a\u521b\u5efa\u684c\u9762\u5feb\u6377\u65b9\u5f0f\uff0c\u8f6f\u4ef6\u5355\u72ec\u8fd0\u884c\uff0c\u4e0d\u4f1a\u6709\u8fc7\u591a\u7684\u4f9d\u8d56\u3002Scoop \u4f1a\u6839\u636e Manifest \u4e2d\u7684\u4fe1\u606f\u4e3a\u8f6f\u4ef6\u521b\u5efa\u5f00\u59cb\u83dc\u5355\u4e2d\u7684\u5feb\u6377\u65b9\u5f0f\u3001\u521b\u5efa\u547d\u4ee4\u94fe\u63a5\u3001\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u901a\u8fc7 Scoop \u5b89\u88c5\u8f6f\u4ef6\u4e0d\u4f1a\u6c61\u67d3\u7cfb\u7edf\u73af\u5883\u3002\\n\\n## \u5b89\u88c5\u524d\u51c6\u5907\\n\\nScoop \u7684\u5b89\u88c5\u548c\u4f7f\u7528\u90fd\u9700\u8981\u8bbf\u95ee\u5230 Github\uff0c\u8003\u8651\u5230\u56fd\u5185\u7f51\u7edc\u60c5\u51b5\u7684\u7279\u6b8a\u6027\uff0c\u8bf7\u4f60\u81ea\u5907\u4ee3\u7406\u8f6f\u4ef6\u4ee5\u786e\u4fdd\u80fd\u6b63\u5e38\u8bbf\u95ee GitHub\u3002\\n\\n\u5927\u90e8\u5206\u7684\u547d\u4ee4\u884c\u5e94\u7528\u4e0d\u4f1a\u8bfb\u53d6\u7cfb\u7edf\u4ee3\u7406\u8bbe\u7f6e\uff0c\u6240\u4ee5\u6709\u4e9b\u60c5\u51b5\u4e0b\u53ca\u65f6\u4f60\u542f\u52a8\u4e86\u4ee3\u7406\u8f6f\u4ef6\u547d\u4ee4\u884c\u5e94\u7528\u4e5f\u4e0d\u4f1a\u901a\u8fc7\u4ee3\u7406\u8f6f\u4ef6\u8bbf\u95ee\u7f51\u7edc\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u624b\u52a8\u8bbe\u7f6e\u547d\u4ee4\u884c\u73af\u5883\u7684\u4ee3\u7406\u3002\\n\\n\u5728 PowerShell \u4e2d\uff0c\u4f60\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u8bbe\u7f6e\u4ee3\u7406\uff0c\u8bf7\u914c\u60c5\u66ff\u6362\u5176\u4e2d\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002\\n\\n```powershell\\n$Env:http_proxy=\\"http://127.0.0.1:11223\\"\\n$Env:https_proxy=\\"http://127.0.0.1:11223\\"\\n```\\n\\n\u8be5\u547d\u4ee4\u53ea\u5728\u5f53\u524d\u4f1a\u8bdd\u751f\u6548\uff0c\u5f53\u4f60\u5173\u95ed\u4e86 PowerShell \u518d\u6b21\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u4f1a\u8bdd\u65f6\u5219\u4f60\u9700\u8981\u518d\u6b21\u6267\u884c\u8be5\u547d\u4ee4\u624d\u80fd\u8ba9\u4ee3\u7406\u8bbe\u7f6e\u751f\u6548\u3002\\n\\n\u4f60\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u547d\u4ee4\u5199\u5165`$PROFILE`\u6587\u4ef6\u6765\u907f\u514d\u5728\u6bcf\u6b21\u65b0\u4f1a\u8bdd\u4e2d\u91cd\u590d\u6267\u884c\u547d\u4ee4\u7684\u5de5\u4f5c\u3002PowerShell \u5728\u6bcf\u6b21\u4f1a\u8bdd\u542f\u52a8\u4e4b\u540e\u90fd\u4f1a\u6267\u884c\u4e00\u6b21`$PROFILE`\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u547d\u4ee4\u3002\\n\\n\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u521b\u5efa\u5e76\u7528\u8bb0\u4e8b\u672c\u6253\u5f00`$PROFILE`\u6587\u4ef6\u3002\\n\\n```powershell\\nif (!(Test-Path -Path $PROFILE )) { New-Item -Type File -Path $PROFILE -Force }\\nnotepad $PROFILE\\n```\\n\\n\u5728\u6253\u5f00\u7684\u8bb0\u4e8b\u672c\u4e2d\u5199\u5165\u8bbe\u7f6e\u4ee3\u7406\u7684\u547d\u4ee4\uff0c\u4fdd\u5b58\u8be5\u6587\u4ef6\uff0c\u5e76\u91cd\u65b0\u6253\u5f00 PowerShell \u5373\u53ef\u751f\u6548\u3002\\n\\n```powershell\\n$Env:http_proxy=\\"http://127.0.0.1:11223\\"\\n$Env:https_proxy=\\"http://127.0.0.1:11223\\"\\n```\\n\\n## \u524d\u63d0\\n\\nScoop \u4f9d\u8d56\u4ee5\u4e0b\u7cfb\u7edf\u73af\u5883\u624d\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002\\n\\n1. PowerShell 5+\\n2. .NET Framework 4.5+\\n\\n\u5bf9\u4e8e\u73b0\u4ee3\u7684 Windows 10 \u7cfb\u7edf\u6765\u8bf4\uff0c\u8fd9\u4e9b\u6761\u4ef6\u5df2\u81ea\u52a8\u6ee1\u8db3\uff0c\u5bf9\u4e8e\u8f83\u4e3a\u53e4\u8001\u7684 Windows 7 \u7cfb\u7edf\u7528\u6237\u6765\u8bf4\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u624b\u52a8\u5347\u7ea7 PowerShell \u5230`PowerShell 5`\uff0c\u5e76\u5b89\u88c5`.NET Framework 4.5`\u3002\\n\\nScoop \u4f9d\u8d56 Git \u548c 7-zip \u6765\u5b8c\u6210\u57fa\u672c\u7684\u5de5\u4f5c\uff0c\u4f46\u662f\u4f60\u4e0d\u9700\u8981\u624b\u52a8\u5b89\u88c5\u8fd9\u4e9b\u8f6f\u4ef6\u3002\u4f60\u53ea\u9700\u8981\u786e\u4fdd\u826f\u597d\u7684\u7f51\u7edc\u73af\u5883\u3002\\n\\n## \u8bbe\u7f6e\u5b89\u88c5\u4f4d\u7f6e\\n\\n// TODO \u8865\u5145\u6b64\u7ae0\u8282\uff0c\u8fd8\u6709\u5404\u4e2a\u6b65\u9aa4\u7684\u622a\u56fe\\n\\n## \u5b89\u88c5 Scoop\\n\\n\u63a5\u4e0b\u6765\u7684\u547d\u4ee4\u90fd\u5728 PowerShell \u4e2d\u6267\u884c\u3002\\n\\n\u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u5141\u8bb8\u6267\u884c\u5916\u90e8 PowerShell \u811a\u672c\u3002\u4f60\u53ef\u80fd\u770b\u5230\u63d0\u793a\u4fe1\u606f\uff0c\u8bf7\u8f93\u5165\u300cY\u300d\u5e76\u6309\u4e0b\u56de\u8f66\u952e\u3002\\n\\n```powershell\\nSet-ExecutionPolicy RemoteSigned -scope CurrentUser\\n```\\n\\n\u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u5b89\u88c5 Scoop\u3002\\n\\n```powershell\\nInvoke-Expression (New-Object System.Net.WebClient).DownloadString(\'https://get.scoop.sh\')\\n```\\n\\n\u5728\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\u4f60\u5c06\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u53ef\u6267\u884c\u547d\u4ee4`scoop`\u3002\u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u5b89\u88c5 7-zip \u548c Git\u3002\\n\\n```powershell\\nscoop install 7zip git\\n```\\n\\n\u7b49\u5f85\u547d\u4ee4\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u4f60\u5c31\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528`7z`\u548c`git`\u547d\u4ee4\uff0cScoop \u5df2\u7ecf\u4e3a\u4f60\u914d\u7f6e\u597d\u4e86\u73af\u5883\u53d8\u91cf\u548c\u547d\u4ee4\u94fe\u63a5\u3002\\n\\n\u5728\u5b89\u88c5\u597d Git \u4e4b\u540e\u4f60\u9700\u8981\u4e3a Git \u8bbe\u7f6e\u4ee3\u7406\uff0c\u4ee5\u4e0b\u547d\u4ee4\u7528\u6765\u4e3a Git \u8bbe\u7f6e\u4ee3\u7406\uff0c\u8bf7\u914c\u60c5\u66ff\u6362\u5176\u4e2d\u7684\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002\\n\\n```bash\\ngit config --global http.proxy http://127.0.0.1:11223\\ngit config --global https.proxy http://127.0.0.1:11223\\n```\\n\\n\u5bf9 Git \u7684\u8bbe\u7f6e\u662f\u6c38\u4e45\u6027\u7684\uff0c\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u53d6\u6d88\u4e3a Git \u8bbe\u7f6e\u4ee3\u7406\uff0c\u4f7f\u7528\u65f6\u8bf7\u53bb\u6389\u6ce8\u91ca\u524d\u7f00\u3002\\n\\n```bash\\n# git config --global --unset http.proxy\\n# git config --global --unset https.proxy\\n```\\n\\n\u4e0b\u9762\u7684\u547d\u4ee4\u7528\u4e8e\u6dfb\u52a0`extras`\u8f6f\u4ef6\u4ed3\u5e93\u3002\\n\\n```powershell\\nscoop bucket add extras\\n```\\n\\n## Scoop \u7684\u76ee\u5f55\u7ed3\u6784\\n\\n// TODO \u8865\u5145\u6b64\u7ae0\u8282\uff0c\u8fd8\u6709\u5404\u4e2a\u6b65\u9aa4\u7684\u622a\u56fe\\n\\n## Scoop \u8f6f\u4ef6\u7ba1\u7406\u547d\u4ee4\\n\\n| \u547d\u4ee4                     | \u793a\u4f8b                                      | \u5907\u6ce8                                                       |\\n| ------------------------ | ----------------------------------------- | ---------------------------------------------------------- |\\n| `scoop search <\u5173\u952e\u8bcd>`  | `scoop search firefox`                    | \u641c\u7d22\u548c\u5173\u952e\u8bcd\u76f8\u5173\u7684\u8f6f\u4ef6\u5305                                   |\\n| `scoop info <\u5305\u540d>`      | `scoop info firefox`                      | \u67e5\u770b\u8f6f\u4ef6\u5305\u4fe1\u606f                                             |\\n| `scoop install <\u5305\u540d>`   | `scoop install nodejs-lts adopt8-hotspot` | \u5b89\u88c5\u6307\u5b9a\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u4e00\u6b21\u6027\u5b89\u88c5\u591a\u4e2a\u8f6f\u4ef6\uff0c\u7528\u7a7a\u683c\u5206\u5272\u8fd9\u4e9b\u8f6f\u4ef6\u540d |\\n| `scoop uninstall <\u5305\u540d>` | `scoop uninstall nodejs-lts`              | \u5378\u8f7d\u6307\u5b9a\u8f6f\u4ef6                                               |\\n| `scoop reinstall <\u5305\u540d>` | `scoop reinstall nodejs-lts`              | \u91cd\u65b0\u5b89\u88c5\u6307\u5b9a\u8f6f\u4ef6                                           |\\n| `scoop reset <\u5305\u540d>`     | `scoop reset python`                      | \u91cd\u65b0\u6267\u884c\u8f6f\u4ef6\u5b89\u88c5\u540e\u811a\u672c\uff0c\u4ee5\u89e3\u51b3\u51b2\u7a81                         |\\n| `scoop list`             |                                           | \u5217\u51fa\u6240\u6709\u5df2\u5b89\u88c5\u8f6f\u4ef6                                         |\\n| `scoop list <\u5173\u952e\u8bcd>`    | `scoop list node`                         | \u5217\u51fa\u548c\u5173\u952e\u8bcd\u76f8\u5173\u7684\u5df2\u5b89\u88c5\u8f6f\u4ef6                               |\\n| `scoop status`           |                                           | \u67e5\u8be2\u66f4\u65b0\u4fe1\u606f                                               |\\n| `scoop update <\u5305\u540d>`    | `scoop update vscode`                     | \u66f4\u65b0\u6307\u5b9a\u7684\u8f6f\u4ef6                                             |\\n| `scoop update`           |                                           | \u66f4\u65b0 Scoop \u548c\u6240\u6709\u4ed3\u5e93\u4fe1\u606f                                  |\\n\\n## Scoop \u4ed3\u5e93\u7ba1\u7406\u547d\u4ee4\\n\\n\u4ed3\u5e93\u76f8\u5173\u547d\u4ee4\u5747\u4ee5`scoop bucket`\u5f00\u59cb\u3002\\n\\n| \u547d\u4ee4                                 | \u793a\u4f8b                                                         | \u5907\u6ce8                               |\\n| ------------------------------------ | ------------------------------------------------------------ | ---------------------------------- |\\n| `scoop bucket known`                 |                                                              | \u5217\u51fa\u77e5\u540d\u8f6f\u4ef6\u4ed3\u5e93                   |\\n| `scoop bucket add <\u77e5\u540d\u4ed3\u5e93\u540d>`      | `scoop bucket add jetbrains`                                 | \u6dfb\u52a0\u77e5\u540d\u8f6f\u4ef6\u4ed3\u5e93\uff0c\u4e0d\u7528\u8f93\u5165\u4ed3\u5e93\u5730\u5740 |\\n| `scoop bucket add <\u522b\u540d> <\u4ed3\u5e93\u5730\u5740>` | `scoop bucket add bobo2334 https://github.com/bobo2334/scoop-bucket.git` | \u6dfb\u52a0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u4ed3\u5e93                 |\\n| `scoop bucket rm <\u522b\u540d>`             | `scoop bucket rm nerd-fonts`                                 | \u79fb\u9664\u8f6f\u4ef6\u4ed3\u5e93                       |\\n| `scoop bucket list`                  |                                                              | \u5217\u51fa\u6240\u6709\u5df2\u6dfb\u52a0\u7684\u8f6f\u4ef6\u4ed3\u5e93           |\\n\\n## \u5378\u8f7d Scoop\\n\\n\u5982\u679c Scoop \u4e0d\u80fd\u8ba9\u4f60\u6ee1\u610f\u7684\u8bdd\uff0c\u4f60\u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u6765\u79fb\u9664 Scoop\u3002\u8fd9\u5c06\u4f1a\u5220\u9664\u6240\u6709\u4f60\u7528 Scoop \u5b89\u88c5\u7684\u8f6f\u4ef6\uff0c\u6700\u540e\u5220\u9664 Scoop \u5b83\u81ea\u8eab\u3002\\n\\n```powershell\\nscoop uninstall scoop\\n```\\n\\n[^1]: [Scoop](https://scoop.sh/)"},{"id":"/use-pwsh-and-oh-my-posh3-on-windows","metadata":{"permalink":"/blog/use-pwsh-and-oh-my-posh3-on-windows","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/use-pwsh-and-oh-my-posh3-on-windows.md","source":"@site/blog/use-pwsh-and-oh-my-posh3-on-windows.md","title":"Windows Terminal + pwsh + oh my posh3 + PSReadLine \u6253\u9020\u4e00\u4e2a\u597d\u7528\u7684\u7ec8\u7aef","description":"\u524d\u8a00","date":"2021-11-24T00:00:00.000Z","formattedDate":"2021\u5e7411\u670824\u65e5","tags":[{"label":"windows-terminal","permalink":"/blog/tags/windows-terminal"},{"label":"powershell","permalink":"/blog/tags/powershell"},{"label":"oh-my-posh","permalink":"/blog/tags/oh-my-posh"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-11-24T00:00:00.000Z","tags":["windows-terminal","powershell","oh-my-posh"]},"prevItem":{"title":"Scoop\uff1aWindows \u5305\u7ba1\u7406\u5668","permalink":"/blog/scoop-the-windows-package-manager"},"nextItem":{"title":"\u4ee5\u5bb9\u5668\u7684\u65b9\u5f0f\u66b4\u9732 Docker Remote API \u5e76\u542f\u7528 TLS","permalink":"/blog/enable-docker-remote-api-with-tls-protection-via-container"}},"content":"## \u524d\u8a00\\n\\n\u5728 macOS \u4e2d\u7528 zsh \u914d\u5408 oh-my-zsh \u53ef\u4ee5\u6253\u9020\u51fa\u4e00\u4e2a\u7528\u7684\u5f88\u8212\u670d\u7684\u7ec8\u7aef\uff0c\u5176\u5b9e\u5728 Windows \u4e2d\u4e5f\u53ef\u4ee5\u3002\\n\\n\u5728 Windows \u4e2d\u53ef\u4ee5\u7528 pwsh[^1] \u548c oh-my-posh[^2] \u6253\u9020\u51fa\u4e00\u4e2a\u597d\u7528\u7684\u7ec8\u7aef\u3002\\n\\nWindows \u81ea\u5e26\u7684 PowerShell \u7248\u672c\u4f4e\uff0c\u6240\u4ee5\u9700\u8981\u989d\u5916\u5b89\u88c5\u4e00\u4e2a\u65b0\u7248\u672c\u7684 pwsh\uff0c\u800c\u4e0d\u662f\u7528\u7cfb\u7edf\u63d0\u4f9b\u7684\u3002\\n\\noh-my-posh3 \u73b0\u5728\u5df2\u57fa\u4e8e Go \u8bed\u8a00\u91cd\u6784\uff0c\u662f\u4e00\u4e2a\u8de8\u5e73\u53f0\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u5b89\u88c5\u548c\u914d\u7f6e\u65b9\u5f0f\u548c oh-my-posh2 \u76f8\u6bd4\u6709\u4e9b\u53d8\u5316\u3002\\n\\n\u7ec8\u7aef\u8f6f\u4ef6\u7528\u7684\u662f Windows Terminal[^3]\uff0c\u8fd9\u662f\u4e00\u4e2a\u73b0\u4ee3\u5316\u7684\u3001\u53ef\u81ea\u5b9a\u4e49\u7684\u597d\u770b\u7684\u7ec8\u7aef\u6a21\u62df\u5668\u3002\\n\\n\u5386\u53f2\u547d\u4ee4\u63d0\u793a\u662f\u901a\u8fc7 PowerShell \u7684 PSReadLine[^4] \u6a21\u7ec4\u5b9e\u73b0\u7684\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u524d\u7f6e\u6761\u4ef6\\n\\nScoop[^5] \u662f Windows \u4e0a\u7684\u4e00\u6b3e\u57fa\u4e8e PowerShell \u7684\u5305\u7ba1\u7406\u5668\uff0c\u63a5\u4e0b\u6765\u7684\u8f6f\u4ef6\u90fd\u662f\u7528 Scoop \u5b89\u88c5\u7684\uff0c\u56e0\u4e3a\u5b83\u80fd\u5f88\u65b9\u4fbf\u5730\u7ba1\u7406\u8f6f\u4ef6\u548c\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002Scoop \u7684\u5b89\u88c5\u53ca\u4f7f\u7528\u4e0d\u5728\u672c\u6587\u7684\u8ba8\u8bba\u8303\u56f4\u5185\u3002\\n\\n\u7531\u4e8e\u591a\u6570\u8f6f\u4ef6\u6765\u6e90\u4e8e Github\uff0c\u5728\u7f51\u7edc\u4e0d\u597d\u7684\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u5b89\u88c5\u5931\u8d25\uff0c\u8bf7\u81ea\u884c\u914d\u7f6e\u7f51\u7edc\u4ee3\u7406\u3002\\n\\n\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u5728 PowerShell \u4e2d\u914d\u7f6e\u4ee3\u7406\uff0c\u8bf7\u81ea\u884c\u66ff\u6362\u5730\u5740\u548c\u7aef\u53e3\u53f7\u3002\\n\\n```powershell\\n$Env:http_proxy=\\"http://127.0.0.1:11223\\";\\n$Env:https_proxy=\\"http://127.0.0.1:11223\\"\\n```\\n\\nScoop \u57fa\u4e8e Git\uff0c\u4e3a\u4e86\u8ba9 Scoop \u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u8bf7\u53c2\u8003\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u914d\u7f6e Git \u7684\u4ee3\u7406\u3002\\n\\n```bash\\ngit config --global http.proxy http://127.0.0.1:11223\\ngit config --global https.proxy https://127.0.0.1:11223\\n```\\n\\n## \u5b89\u88c5 pwsh\\n\\n```powershell\\nscoop install pwsh\\n```\\n\\n## \u5b89\u88c5 Windows Terminal\\n\\n```powershell\\nscoop install windows-terminal\\n```\\n\\n## \u5b89\u88c5 Cascadia Code \u5b57\u4f53\\n\\n\u90e8\u5206\u547d\u4ee4\u884c\u5b57\u7b26\u9700\u8981\u6b63\u786e\u914d\u7f6e\u5b57\u4f53\u624d\u80fd\u6b63\u5e38\u663e\u793a\uff0c\u5b89\u88c5\u5b57\u4f53\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff0c\u6ce8\u610f\u6388\u6743\u63d0\u793a\u3002\\n\\n\u66f4\u591a\u547d\u4ee4\u884c\u5b57\u7b26\u5b57\u4f53\u53ef\u53c2\u8003 nerd-fonts[^6] \u9879\u76ee\u3002\\n\\n```powershell\\nscoop install sudo\\nscoop bucket add nerd-fonts\\nsudo scoop install CascadiaCode-NF-Mono\\n```\\n\\n## \u5728 Windows Terminal \u4e2d\u96c6\u6210 pwsh\\n\\n\u5728 Window Terminal \u4e2d\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u7ec8\u7aef\u914d\u7f6e\u3002\u547d\u540d\u4e3a\u300cPWSH\u300d\uff0c\u547d\u4ee4\u4e3a`pwsh`\u3002\u8bbe\u7f6e\u5b57\u4f53\u4e3a\u300cCaskaydiaCove NF\u300d\u3002\\n\\n![image-20211124184401253](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124184401253.png)\\n\\n![image-20211124184424643](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124184424643.png)\\n\\n![image-20211124184447256](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124184447256.png)\\n\\n![image-20211124184503221](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124184503221.png)\\n\\n\u4fdd\u5b58\u6b64\u914d\u7f6e\uff0c\u5728\u300c\u542f\u52a8\u300d\u9009\u9879\u5361\u4e2d\u628a\u521a\u521a\u65b0\u589e\u7684\u300cPWSH\u300d\u914d\u7f6e\u6587\u4ef6\u8bbe\u7f6e\u4e3a\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u3002\\n\\n![image-20211124184748158](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124184748158.png)\\n\\n\u6253\u5f00 PWSH\uff0c\u914d\u7f6e\u5b8c\u6210\u3002\\n\\n![image-20211124184925333](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124184925333.png)\\n\\n## \u5b89\u88c5 oh-my-posh3\\n\\n\u76ee\u524d\uff0c\u5728 oh-my-posh \u7684\u5b98\u65b9\u6587\u6863\u4e2d\u4f7f\u7528\u7684\u5b89\u88c5\u547d\u4ee4\u4e3a`scoop install https://github.com/JanDeDobbeleer/oh-my-posh/releases/latest/download/oh-my-posh.json`\uff0c\u8bf7\u4e0d\u8981\u4f7f\u7528\u8be5\u547d\u4ee4\u3002\\n\\noh-my-posh3 \u5df2\u5b58\u5728\u4e8e Scoop \u7684 main \u4ed3\u5e93\u4e2d\uff0c\u8bf7\u5b89\u88c5\u6b64\u8f6f\u4ef6\u5305\uff0c\u540e\u9762\u7684\u914d\u7f6e\u547d\u4ee4\u8ddf\u5305\u540d\u6709\u5173\u3002\\n\\n```powershell\\nscoop install oh-my-posh3\\n```\\n\\n\u63a5\u4e0b\u6765\u7f16\u5199 PWSH \u7684\u7528\u6237\u914d\u7f6e\uff0c\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u5e76\u7528\u8bb0\u4e8b\u672c\u6253\u5f00\u3002\u8be5\u914d\u7f6e\u6587\u4ef6\u7684\u4f5c\u7528\u662f\u5728\u6bcf\u6b21 pwsh \u521d\u59cb\u5316\u7684\u65f6\u5019\u81ea\u52a8\u6267\u884c\u5176\u4e2d\u7684\u547d\u4ee4\u3002\\n\\n```powershell\\nif (!(Test-Path -Path $PROFILE )) { New-Item -Type File -Path $PROFILE -Force }\\nnotepad $PROFILE\\n```\\n\\n\u5728\u5f39\u51fa\u7684\u8bb0\u4e8b\u672c\u91cc\u5199\u5165 oh-my-posh \u7684\u521d\u59cb\u5316\u547d\u4ee4\uff0c\u8be5\u547d\u4ee4\u4f1a\u5728\u6bcf\u6b21 pwsh \u521d\u59cb\u5316\u7684\u65f6\u5019\u6267\u884c\u3002\\n\\n```powershell\\n$env:POSH_GIT_ENABLED = $true\\noh-my-posh --init --shell pwsh --config \\"$(scoop prefix oh-my-posh3)\\\\themes\\\\wopian.omp.json\\" | Invoke-Expression\\n```\\n\\n\u91cd\u65b0\u6253\u5f00\u7ec8\u7aef\u5c31\u80fd\u770b\u5230\u4e00\u4e2a\u5e26\u4e3b\u9898\u7684 PowerShell\uff0c\u5982\u679c\u6709\u4e9b\u5b57\u7b26\u663e\u793a\u4e0d\u51fa\u6765\u5c31\u662f\u5b57\u4f53\u6ca1\u6709\u914d\u7f6e\u597d\u3002\\n\\n![image-20211124185954914](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124185954914.png)\\n\\n## \u914d\u7f6e\u5386\u53f2\u547d\u4ee4\u63d0\u793a\\n\\n\u5728 PWSH \u4e2d\u6267\u884c\u547d\u4ee4\uff0c\u5b89\u88c5 PSReadLine \u6a21\u7ec4\u3002\u5728\u5b89\u88c5\u65f6\u8bf7\u8f93\u5165\u300cY\u300d\u6765\u786e\u8ba4\u5b89\u88c5\u3002\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u5b89\u88c5 PSReadLine\uff0c\u8bf7\u5728 PWSH \u4e2d\u6267\u884c\u800c\u4e0d\u662f\u5728 PowerShell \u4e2d\u3002\\n\\n```powershell\\nInstall-Module PSReadLine\\n```\\n\\n![image-20211124194613000](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124194613000.png)\\n\\n\u7136\u540e\u7f16\u8f91`$PROFILE`\u6587\u4ef6\uff0c\u5728\u6bcf\u6b21\u7ec8\u7aef\u6253\u5f00\u7684\u65f6\u5019\u5bf9`PSReadLine`\u8fdb\u884c\u521d\u59cb\u5316\u3002\\n\\n```powershell\\nnotepad $PROFILE\\n```\\n\\n\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u9644\u52a0\u4e0a\u4ee5\u4e0b\u5185\u5bb9\u3002\\n\\n```powershell\\nSet-PSReadLineOption -PredictionSource History # \u8bbe\u7f6e\u9884\u6d4b\u6587\u672c\u6765\u6e90\u4e3a\u5386\u53f2\u8bb0\u5f55\\nSet-PSReadlineKeyHandler -Key Tab -Function Complete # \u8bbe\u7f6e Tab \u952e\u8865\u5168\\nSet-PSReadLineKeyHandler -Key \\"Ctrl+d\\" -Function MenuComplete # \u8bbe\u7f6e Ctrl+d \u4e3a\u83dc\u5355\u8865\u5168\u548c Intellisense\\nSet-PSReadLineKeyHandler -Key \\"Ctrl+z\\" -Function Undo # \u8bbe\u7f6e Ctrl+z \u4e3a\u64a4\u9500\\nSet-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward # \u8bbe\u7f6e\u5411\u4e0a\u952e\u4e3a\u540e\u5411\u641c\u7d22\u5386\u53f2\u8bb0\u5f55\\nSet-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward # \u8bbe\u7f6e\u5411\u4e0b\u952e\u4e3a\u524d\u5411\u641c\u7d22\u5386\u53f2\u7eaa\u5f55\\n```\\n\\n\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\uff0c\u91cd\u542f\u7ec8\u7aef\uff0c\u5c31\u80fd\u770b\u5230\u4e00\u4e2a\u5e26\u5386\u53f2\u547d\u4ee4\u63d0\u793a\u7684\u7ec8\u7aef\u4e86\u3002\\n\\n![image-20211124190601792](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124190601792.png)\\n\\n## \u66f4\u6539 oh-my-posh \u7684\u4e3b\u9898\\n\\noh-my-posh \u63d0\u4f9b\u4e86\u591a\u5957\u4e3b\u9898\u53ef\u4f9b\u9009\u62e9\uff0c\u5728 PWSH \u4e2d\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5bf9\u6240\u6709\u4e3b\u9898\u8fdb\u884c\u9884\u89c8\u3002\\n\\n```powershell\\nGet-ChildItem -Path \\"$(scoop prefix oh-my-posh3)\\\\themes\\\\*\\" -Include \'*.omp.json\' | Sort-Object Name | ForEach-Object -Process {\\n    $esc = [char]27\\n    Write-Host \\"\\"\\n    Write-Host \\"$esc[1m$($_.BaseName)$esc[0m\\"\\n    Write-Host \\"\\"\\n    oh-my-posh --config $($_.FullName) --pwd $PWD\\n    Write-Host \\"\\"\\n}\\n```\\n\\n![image-20211124195044478](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124195044478.png)\\n\\n\u5176\u4e2d\u4ee5`.omp`\u7ed3\u5c3e\u7684\u662f\u4e3b\u9898\u6587\u4ef6\u7684\u540d\u79f0\uff0c\u5982\u679c\u9700\u8981\u4f7f\u7528\u67d0\u4e2a\u4e3b\u9898\u5c31\u66ff\u6362\u6389`$PROFILE`\u6587\u4ef6\u4e2d\u521d\u59cb\u5316\u547d\u4ee4\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u540d\u5c31\u53ef\u4ee5\u4e86\u3002\\n\\n\u4ee5\u4e0b\u547d\u4ee4\u7528\u4e8e\u7528\u8bb0\u4e8b\u672c\u6253\u5f00`$PROFILE`\u6587\u4ef6\u3002\\n\\n```powershell\\nnotepad $PROFILE\\n```\\n\\n\u5728\u6253\u5f00\u7684\u8bb0\u4e8b\u672c\u4e2d\u4f60\u4f1a\u770b\u5230 oh-my-posh \u7684\u521d\u59cb\u5316\u547d\u4ee4\u3002\\n\\n```powershell\\noh-my-posh --init --shell pwsh --config \\"$(scoop prefix oh-my-posh3)\\\\themes\\\\wopian.omp.json\\" | Invoke-Expression\\n```\\n\\n\u5c06\u4f60\u4e2d\u610f\u7684\u4e3b\u9898\u540d\u79f0\u66ff\u6362\u547d\u4ee4\u4e2d\u7684`wopian.omp`\uff0c\u4fdd\u5b58\u8be5\u914d\u7f6e\u6587\u4ef6\u7136\u540e\u91cd\u542f\u7ec8\u7aef\u5c31\u53ef\u4ee5\u770b\u5230\u65b0\u4e3b\u9898\u7684\u6548\u679c\u4e86\u3002\\n\\n## \u66f4\u6539 Windows Terminal \u7684\u914d\u8272\\n\\n\u5728 Windows Terminal \u4e2d\u9ed8\u8ba4\u6709\u591a\u5957\u914d\u8272\u65b9\u6848\u53ef\u9009\uff0c\u8fd9\u91cc\u63a8\u8350\u4e00\u5957\u81ea\u5b9a\u4e49\u7684\u914d\u8272\u65b9\u6848\uff0c\u6765\u81ea\u4e8e Dracula[^7]\u3002\\n\\n\u5728 Windows Terminal \u7684\u8bbe\u7f6e\u9875\u9762\u4e2d\uff0c\u70b9\u51fb\u300c\u6253\u5f00 JSON \u6587\u4ef6\u300d\uff0c\u5728\u8be5\u6587\u4ef6\u7684`schemes`\u6570\u7ec4\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u914d\u8272\u65b9\u6848\u5bf9\u8c61\u3002\\n\\n```json\\n\\"schemes\\": [\\n    {\\n        \\"name\\": \\"Dracula\\",\\n        \\"cursorColor\\": \\"#F8F8F2\\",\\n        \\"selectionBackground\\": \\"#44475A\\",\\n        \\"background\\": \\"#282A36\\",\\n        \\"foreground\\": \\"#F8F8F2\\",\\n        \\"black\\": \\"#21222C\\",\\n        \\"blue\\": \\"#BD93F9\\",\\n        \\"cyan\\": \\"#8BE9FD\\",\\n        \\"green\\": \\"#50FA7B\\",\\n        \\"purple\\": \\"#FF79C6\\",\\n        \\"red\\": \\"#FF5555\\",\\n        \\"white\\": \\"#F8F8F2\\",\\n        \\"yellow\\": \\"#F1FA8C\\",\\n        \\"brightBlack\\": \\"#6272A4\\",\\n        \\"brightBlue\\": \\"#D6ACFF\\",\\n        \\"brightCyan\\": \\"#A4FFFF\\",\\n        \\"brightGreen\\": \\"#69FF94\\",\\n        \\"brightPurple\\": \\"#FF92DF\\",\\n        \\"brightRed\\": \\"#FF6E6E\\",\\n        \\"brightWhite\\": \\"#FFFFFF\\",\\n        \\"brightYellow\\": \\"#FFFFA5\\"\\n    }\\n]\\n```\\n\\n\u4fdd\u5b58\u8be5 JSON \u6587\u4ef6\uff0c\u91cd\u542f Windows Terminal\uff0c\u5728 PWSH \u7684\u5916\u89c2\u914d\u7f6e\u4e2d\u9009\u62e9\u65b0\u6dfb\u52a0\u7684 Dracula \u914d\u8272\u65b9\u6848\u3002\u524d\u6587\u4e2d\u6211\u7528\u7684\u914d\u8272\u65b9\u6848\u5c31\u662f Dracula\u3002\\n\\n![image-20211124202122113](use-pwsh-and-oh-my-posh3-on-windows.assets/image-20211124202122113.png)\\n\\n## \u5728 VS Code \u91cc\u4f7f\u7528\\n\\n\u5728 VS Code \u7684\u914d\u7f6e\u6587\u4ef6`settings.json`\u4e2d\u52a0\u5165\u4ee5\u4e0b\u914d\u7f6e\u3002\\n\\n```json\\n\\"terminal.integrated.profiles.windows\\": {\\n  \\"Windows PowerShell\\": {\\n    \\"path\\": \\"C:\\\\\\\\Windows\\\\\\\\System32\\\\\\\\WindowsPowerShell\\\\\\\\v1.0\\\\\\\\powershell.exe\\"\\n  },\\n  \\"PWSH\\": {\\n    \\"path\\": \\"pwsh\\"\\n  }\\n},\\n\\"terminal.integrated.defaultProfile.windows\\": \\"PWSH\\",\\n\\"terminal.integrated.fontFamily\\": \\"\'CaskaydiaCove NF\'\\"\\n```\\n\\n[^1]: [PowerShell/PowerShell: PowerShell for every system!](https://github.com/PowerShell/PowerShell)\\n[^2]: [Home | Oh My Posh](https://ohmyposh.dev/)\\n[^3]: [microsoft/terminal: The new Windows Terminal and the original Windows console host, all in the same place!](https://github.com/microsoft/terminal)\\n[^4]: [PowerShell/PSReadLine: A bash inspired readline implementation for PowerShell](https://github.com/PowerShell/PSReadLine)\\n[^5]: [Scoop](https://scoop.sh/)\\n[^6]: [Nerd Fonts - Iconic font aggregator, glyphs/icons collection, & fonts patcher](https://www.nerdfonts.com/)\\n[^7]: [Dark theme for Windows Terminal and 218+ apps \u2014 Dracula](https://draculatheme.com/windows-terminal)"},{"id":"/enable-docker-remote-api-with-tls-protection-via-container","metadata":{"permalink":"/blog/enable-docker-remote-api-with-tls-protection-via-container","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/enable-docker-remote-api-with-tls-protection-via-container.md","source":"@site/blog/enable-docker-remote-api-with-tls-protection-via-container.md","title":"\u4ee5\u5bb9\u5668\u7684\u65b9\u5f0f\u66b4\u9732 Docker Remote API \u5e76\u542f\u7528 TLS","description":"\u524d\u8a00","date":"2021-09-10T00:00:00.000Z","formattedDate":"2021\u5e749\u670810\u65e5","tags":[{"label":"docker","permalink":"/blog/tags/docker"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-09-10T00:00:00.000Z","tags":["docker"]},"prevItem":{"title":"Windows Terminal + pwsh + oh my posh3 + PSReadLine \u6253\u9020\u4e00\u4e2a\u597d\u7528\u7684\u7ec8\u7aef","permalink":"/blog/use-pwsh-and-oh-my-posh3-on-windows"},"nextItem":{"title":"\u5f00\u542f Docker Remote API \u5e76\u542f\u7528 TLS","permalink":"/blog/enable-docker-remote-api-with-tls-protection"}},"content":"## \u524d\u8a00\\n\\n\u4e4b\u524d\u5728\u300c\u5f00\u542f Docker Remote API \u5e76\u542f\u7528 TLS\u300d[^1] \u4e2d\u8bb0\u5f55\u8fc7 Docker \u66b4\u9732 Remote API \u5e76\u914d\u7f6e TLS \u652f\u6301\uff0c\u867d\u7136\u5176\u4e2d\u5f15\u7528\u4e86\u522b\u4eba\u7684\u811a\u672c\u6765\u7b80\u5316\u8bc1\u4e66\u7684\u7b7e\u53d1\u6b65\u9aa4\uff0c\u4f46\u662f\u5728\u8bc1\u4e66\u7b7e\u53d1\u5b8c\u6210\u4e4b\u540e\u8fd8\u662f\u9700\u8981\u5bf9 Docker \u7684\u542f\u52a8\u547d\u4ee4\u8fdb\u884c\u4fee\u6539\uff0c\u8fd8\u662f\u4e00\u4e2a\u6bd4\u8f83\u7e41\u7410\u7684\u6b65\u9aa4\u3002\\n\\n\u540e\u6765\u6211\u53d1\u73b0\u4e86 docker-remote-api-tls[^2] \u9879\u76ee\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a Docker \u955c\u50cf\uff0c\u5728\u8fd0\u884c\u955c\u50cf\u4e4b\u540e\u5b83\u4f1a\u81ea\u52a8\u5b8c\u6210\u8bc1\u4e66\u7b7e\u53d1\u548c API \u8f6c\u53d1\u6b65\u9aa4\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u90e8\u7f72\\n\\n\u53ef\u4ee5\u901a\u8fc7 Docker Compose \u65b9\u4fbf\u5730\u542f\u52a8\u8fd9\u4e2a\u5bb9\u5668\uff0c\u4e0b\u9762\u662f`docker-compose.yml`\u6587\u4ef6\u7684\u5185\u5bb9\u3002\\n\\n```yaml\\nversion: \\"3\\"\\nservices:\\n  api:\\n    image: kekru/docker-remote-api-tls:v0.3.0\\n    ports:\\n      - 2376:443\\n    environment:\\n      - CREATE_CERTS_WITH_PW=dockercompose\\n      - CERT_EXPIRATION_DAYS=3650\\n      - CA_EXPIRATION_DAYS=36500\\n      - CERT_HOSTNAME=192.168.229.129.nip.io\\n    volumes:\\n      - /root/compose/docker-remote-api-with-tls/certs:/data/certs\\n      - /var/run/docker.sock:/var/run/docker.sock:ro\\n    restart: unless-stopped\\n```\\n\\n\u6709\u4ee5\u4e0b\u51e0\u70b9\u9700\u8981\u6ce8\u610f\uff1a\\n\\n1. \u7b2c 6 \u884c\uff0c\u5bb9\u5668\u5185\u7684\u7aef\u53e3\u662f 443\uff0c\u9700\u8981\u6620\u5c04\u5230\u5bb9\u5668\u5916 2376 \u7aef\u53e3\uff1b\\n2. \u7b2c 8 \u884c\uff0c`CREATE_CERTS_WITH_PW`\u8bbe\u7f6e\u8bc1\u4e66\u5bc6\u7801\uff1b\\n3. \u7b2c 9 \u884c\uff0c`CERT_EXPIRATION_DAYS`\u8bbe\u7f6e\u8bc1\u4e66\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba4 365 \u5929\uff1b\\n4. \u7b2c 10 \u884c\uff0c`CA_EXPIRATION_DAYS`\u8bbe\u7f6e CA \u8bc1\u4e66\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba4 900 \u5929\uff1b\\n5. \u7b2c 11 \u884c\uff0c`CERT_HOSTNAME`\u8bbe\u7f6e\u57df\u540d\uff0c\u5982\u679c\u6ca1\u6709\u57df\u540d\u53ef\u4ee5\u7528 nip.io[^3] \u6765\u5f97\u5230\u4e00\u4e2a\u53ef\u4ee5\u89e3\u6790\u5230\u4efb\u610f IP \u7684\u57df\u540d\u3002\u5f62\u5982`192.168.229.129.nip.io`\u7684\u57df\u540d\u4f1a\u88ab\u89e3\u6790\u81f3`192.168.229.129`\uff1b\u8fd8\u6709\u5176\u4ed6\u5f62\u5f0f\u7684\u57df\u540d\u53ef\u4ee5\u5728 nip.io \u7f51\u7ad9\u4e2d\u67e5\u770b\uff1b\\n6. \u7b2c 13 \u884c\uff0c\u6302\u8f7d\u8bc1\u4e66\u76ee\u5f55\uff0c\u9996\u6b21\u542f\u52a8\u65f6\u8bc1\u4e66\u4f1a\u88ab\u81ea\u52a8\u521b\u5efa\u5e76\u5b58\u653e\u5728\u6b64\u76ee\u5f55\u4e2d\uff1b\\n7. \u7b2c 14 \u884c\uff0c\u6302\u8f7d`docker.sock`\u3002\\n\\n\u901a\u8fc7`docker compose up -d`\u542f\u52a8\u5bb9\u5668\u3002\u6839\u636e\u914d\u7f6e\uff0c\u8bc1\u4e66\u4f1a\u88ab\u81ea\u52a8\u521b\u5efa\u5728`/root/compose/docker-remote-api-with-tls/certs`\u76ee\u5f55\u4e2d\u3002\\n\\n\u8be5\u76ee\u5f55\u7684\u7ed3\u6784\u5982\u4e0b\uff1a\\n\\n```\\ncerts/\\n\u251c\u2500\u2500 ca-cert.pem\\n\u251c\u2500\u2500 ca-key.pem\\n\u251c\u2500\u2500 client\\n\u2502\xa0\xa0 \u251c\u2500\u2500 ca.pem\\n\u2502\xa0\xa0 \u251c\u2500\u2500 cert.pem\\n\u2502\xa0\xa0 \u2514\u2500\u2500 key.pem\\n\u251c\u2500\u2500 server-cert.pem\\n\u2514\u2500\u2500 server-key.pem\\n```\\n\\n\u5176\u4e2d\uff0c\u5ba2\u6237\u7aef\u9700\u8981\u7684\u8bc1\u4e66\u6587\u4ef6\u5b58\u653e\u5728`client`\u76ee\u5f55\u4e2d\u3002\u6b64\u65f6 Docker Remote API \u5df2\u7ecf\u66b4\u9732\u5728 2376 \u7aef\u53e3\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528\u8bc1\u4e66\u6587\u4ef6\u6765\u901a\u8fc7\u8ba4\u8bc1\u3002\\n\\n\u5982\u679c\u9700\u8981\u91cd\u65b0\u7b7e\u53d1\u8bc1\u4e66\u6587\u4ef6\uff0c\u53ea\u9700\u8981\u6e05\u7a7a`certs`\u6587\u4ef6\u5939\u5e76\u91cd\u542f\u5bb9\u5668\u5373\u53ef\u3002\\n\\n## \u8865\u5145\\n\\n\u56fd\u5185\u7684 IP \u8bf7\u4f7f\u7528\u5df2\u5907\u6848\u57df\u540d\uff0c\u4e0d\u7136\u53ef\u80fd\u4f1a\u88ab\u963b\u65ad\uff0c\u5bfc\u81f4\u8fde\u63a5\u4e0d\u4e0a\u3002\\n\\n[^1]: [\u5f00\u542f Docker Remote API \u5e76\u542f\u7528 TLS](./enable-docker-remote-api-with-tls-protection.md)\\n[^2]: [kekru/docker-remote-api-tls: Docker Image that forwards to the Docker API Socket and requires TLS Client authentication](https://github.com/kekru/docker-remote-api-tls)\\n[^3]: [nip.io - wildcard DNS for any IP Address](https://nip.io/)"},{"id":"/enable-docker-remote-api-with-tls-protection","metadata":{"permalink":"/blog/enable-docker-remote-api-with-tls-protection","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/enable-docker-remote-api-with-tls-protection.md","source":"@site/blog/enable-docker-remote-api-with-tls-protection.md","title":"\u5f00\u542f Docker Remote API \u5e76\u542f\u7528 TLS","description":"\u524d\u8a00","date":"2021-09-09T00:00:00.000Z","formattedDate":"2021\u5e749\u67089\u65e5","tags":[{"label":"docker","permalink":"/blog/tags/docker"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-09-09T00:00:00.000Z","tags":["docker"]},"prevItem":{"title":"\u4ee5\u5bb9\u5668\u7684\u65b9\u5f0f\u66b4\u9732 Docker Remote API \u5e76\u542f\u7528 TLS","permalink":"/blog/enable-docker-remote-api-with-tls-protection-via-container"},"nextItem":{"title":"SSH \u5bc6\u94a5\u767b\u5f55","permalink":"/blog/ssh-certificate-authentication"}},"content":"## \u524d\u8a00\\n\\nPortainer[^1] \u662f\u4e00\u6b3e Docker \u53ef\u89c6\u5316\u7ba1\u7406\u9762\u677f\uff0c\u5b83\u4e0d\u4ec5\u53ef\u4ee5\u7ba1\u7406\u672c\u5730\u7684 Docker \u5b9e\u4f8b\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7 Docker Remote API \u8bbf\u95ee\u7ba1\u7406\u8fdc\u7a0b Docker \u8d44\u6e90\u3002Docker Remote API \u5c31\u662f\u901a\u8fc7 HTTP \u534f\u8bae\u66b4\u9732 Docker \u8d44\u6e90\uff0c\u542f\u7528 TLS \u53ef\u4ee5\u5b9e\u73b0\u8fdc\u7a0b\u8bbf\u95ee\u9274\u6743\u3002\\n\\nDocker \u7684\u5b98\u65b9\u6587\u6863\u63d0\u4f9b\u4e86\u8be6\u7ec6\u7684\u5f00\u542f Docker Remote API \u548c\u5f00\u542f TLS \u7684\u6559\u7a0b [^2]\u3002\u4f46\u662f\u5728\u7b7e\u53d1\u8bc1\u4e66\u7684\u8fc7\u7a0b\u4e2d\u6d89\u53ca\u5230\u7684\u547d\u4ee4\u6bd4\u8f83\u591a\uff0c\u4e14\u7e41\u7410\uff0c\u6211\u5c31\u4ece\u7f51\u7edc\u4e0a\u5bfb\u627e\u5230\u4e86\u522b\u4eba\u5199\u597d\u7684\u7b7e\u53d1\u8bc1\u4e66\u7684\u811a\u672c [^3]\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u66ff\u4ee3\u7eaf\u624b\u5de5\u64cd\u4f5c\u3002\\n\\n\u672c\u6587\u4e2d\u7684\u64cd\u4f5c\u90fd\u5728 CentOS 7 \u4e2d\u5b8c\u6210\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u7b7e\u53d1\u8bc1\u4e66\\n\\n\u5c06\u811a\u672c\u547d\u540d\u4e3a`auto-tls-certs.sh`\u3002\u5176\u4e2d\u9700\u8981\u914d\u7f6e\u7684\u5185\u5bb9\u6709\uff1a\\n\\n1. `CODE`\uff0c\u4f5c\u4e3a\u6587\u4ef6\u540d\u7684\u540e\u7f00\uff0c\u7528\u4e8e\u533a\u5206\u6587\u4ef6\uff1b\\n2. `IP`\uff0c\u673a\u5668\u7684\u516c\u7f51 IP \u5730\u5740\uff1b\\n3. `PASSWORD`\uff0c\u8bc1\u4e66\u5bc6\u7801\u3002\\n\\n\u811a\u672c\u5185\u5bb9\u5982\u4e0b\uff1a\\n\\n```bash\\n#!/bin/bash\\n#\\n# -------------------------------------------------------------\\n# \u81ea\u52a8\u521b\u5efa Docker TLS \u8bc1\u4e66\\n# -------------------------------------------------------------\\n\\n# \u4ee5\u4e0b\u662f\u914d\u7f6e\u4fe1\u606f\\n# --[BEGIN]------------------------------\\n\\nCODE=\\"tx\\"\\nIP=\\"1.1.1.1\\"\\nPASSWORD=\\"pass\\"\\n\\nCOUNTRY=\\"CN\\"\\nSTATE=\\"BEIJING\\"\\nCITY=\\"BEIJING\\"\\nORGANIZATION=\\"Org\\"\\nORGANIZATIONAL_UNIT=\\"Dev\\"\\nCOMMON_NAME=\\"$IP\\"\\nEMAIL=\\".\\"\\n\\n# --[END]--\\n\\n# Generate CA key\\nopenssl genrsa -aes256 -passout \\"pass:$PASSWORD\\" -out \\"ca-key-$CODE.pem\\" 4096\\n# Generate CA\\nopenssl req -new -x509 -days 365 -key \\"ca-key-$CODE.pem\\" -sha256 -out \\"ca-$CODE.pem\\" -passin \\"pass:$PASSWORD\\" -subj \\"/C=$COUNTRY/ST=$STATE/L=$CITY/O=$ORGANIZATION/OU=$ORGANIZATIONAL_UNIT/CN=$COMMON_NAME/emailAddress=$EMAIL\\"\\n# Generate Server key\\nopenssl genrsa -out \\"server-key-$CODE.pem\\" 4096\\n\\n# Generate Server Certs.\\nopenssl req -subj \\"/CN=$COMMON_NAME\\" -sha256 -new -key \\"server-key-$CODE.pem\\" -out server.csr\\n\\necho \\"subjectAltName = IP:$IP,IP:127.0.0.1\\" >> extfile.cnf\\necho \\"extendedKeyUsage = serverAuth\\" >> extfile.cnf\\n\\nopenssl x509 -req -days 365 -sha256 -in server.csr -passin \\"pass:$PASSWORD\\" -CA \\"ca-$CODE.pem\\" -CAkey \\"ca-key-$CODE.pem\\" -CAcreateserial -out \\"server-cert-$CODE.pem\\" -extfile extfile.cnf\\n\\n# Generate Client Certs.\\nrm -f extfile.cnf\\n\\nopenssl genrsa -out \\"key-$CODE.pem\\" 4096\\nopenssl req -subj \'/CN=client\' -new -key \\"key-$CODE.pem\\" -out client.csr\\necho extendedKeyUsage = clientAuth >> extfile.cnf\\nopenssl x509 -req -days 365 -sha256 -in client.csr -passin \\"pass:$PASSWORD\\" -CA \\"ca-$CODE.pem\\" -CAkey \\"ca-key-$CODE.pem\\" -CAcreateserial -out \\"cert-$CODE.pem\\" -extfile extfile.cnf\\n\\nrm -vf client.csr server.csr\\n\\nchmod -v 0400 \\"ca-key-$CODE.pem\\" \\"key-$CODE.pem\\" \\"server-key-$CODE.pem\\"\\nchmod -v 0444 \\"ca-$CODE.pem\\" \\"server-cert-$CODE.pem\\" \\"cert-$CODE.pem\\"\\n\\n# \u6253\u5305\u5ba2\u6237\u7aef\u8bc1\u4e66\\nmkdir -p \\"tls-client-certs-$CODE\\"\\ncp -f \\"ca-$CODE.pem\\" \\"cert-$CODE.pem\\" \\"key-$CODE.pem\\" \\"tls-client-certs-$CODE/\\"\\ncd \\"tls-client-certs-$CODE\\"\\ntar zcf \\"tls-client-certs-$CODE.tar.gz\\" *\\nmv \\"tls-client-certs-$CODE.tar.gz\\" ../\\ncd ..\\nrm -rf \\"tls-client-certs-$CODE\\"\\n\\n# \u62f7\u8d1d\u670d\u52a1\u7aef\u8bc1\u4e66\\nmkdir -p /etc/docker/certs.d\\ncp \\"ca-$CODE.pem\\" \\"server-cert-$CODE.pem\\" \\"server-key-$CODE.pem\\" /etc/docker/certs.d/\\n```\\n\\n\u4f7f\u7528`sh auto-tls-certs.sh`\u547d\u4ee4\u6765\u751f\u6210\u8bc1\u4e66\uff0c\u5e76\u4e14\u751f\u6210\u597d\u7684\u8bc1\u4e66\u4f1a\u88ab\u81ea\u52a8\u6253\u5305\u4e3a`.tar.gz`\u5f52\u6863\uff0c\u975e\u5e38\u65b9\u4fbf\u3002\u4e0b\u9762\u7684\u56fe\u7247\u5c55\u793a\u4e86\u6267\u884c\u811a\u672c\u540e\u751f\u6210\u7684\u6587\u4ef6\u5217\u8868\u3002\\n\\n![image-20210816222131111-16291236956091](./enable-docker-remote-api-with-tls-protection.assets/image-20210816222131111-16291236956091.png)\\n\\n## \u914d\u7f6e Docker\\n\\n\u53ea\u9700\u5173\u6ce8`.pem`\u6587\u4ef6\uff0c\u628a\u8bc1\u4e66\u627e\u4e2a\u4e13\u95e8\u7684\u4f4d\u7f6e\u5b58\u653e\u3002\\n\\n```bash\\nmkdir /etc/.docker\\ncp ~/docker-cert/*.pem /etc/.docker/\\n```\\n\\n\u4fee\u6539 Docker \u542f\u52a8\u6587\u4ef6\u3002\\n\\n```bash\\nnano /lib/systemd/system/docker.service\\n```\\n\\n\u4fee\u6539`Service`\u4e0b\u7684`ExecStart`\u914d\u7f6e\u3002\\n\\n```systemd\\nExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -D -H tcp://0.0.0.0:2376 --tlsverify --tlscacert=/etc/.docker/ca-tx.pem --tlscert=/etc/.docker/server-cert-tx.pem --tlskey=/etc/.docker/server-key-tx.pem\\n```\\n\\n![image-20210816222434122-16291238760702](./enable-docker-remote-api-with-tls-protection.assets/image-20210816222434122-16291238760702.png)\\n\\n\u91cd\u542f Docker\u3002\\n\\n```bash\\nsystemctl daemon-reloadservice docker restart\\n```\\n\\n## \u5f00\u653e\u7aef\u53e3\\n\\n\u5728\u9632\u706b\u5899\u3001\u5b89\u5168\u7ec4\u4e2d\u653e\u884c 2376 \u7aef\u53e3\u3002\\n\\n## \u6d4b\u8bd5\\n\\n\u628a\u8bc1\u4e66\u7684\u538b\u7f29\u5305`tls-client-certs-tx.tar.gz`\u4e0b\u8f7d\u5230\u672c\u673a\uff0c\u89e3\u538b\u5f97\u5230\u8bc1\u4e66\u6587\u4ef6\u3002\\n\\n![image-20210816222527037](./enable-docker-remote-api-with-tls-protection.assets/image-20210816222527037.png)\\n\\n\u7528`curl`\u547d\u4ee4\u6d4b\u8bd5\uff0c\u5982\u679c\u6709 JSON \u683c\u5f0f\u7684\u4fe1\u606f\u8f93\u51fa\u5219\u914d\u7f6e\u6210\u529f\u3002\\n\\n```bash\\ncurl https://\u4f60\u7684 IP/info --cert cert-tx.pem --key key-tx.pem --cacert ca-tx.pem\\n```\\n\\n![image-20210816222600935-16291239626163](./enable-docker-remote-api-with-tls-protection.assets/image-20210816222600935-16291239626163.png)\\n\\n## \u7528 Portainer \u8fde\u63a5\\n\\nPortainer \u662f\u4e00\u6b3e\u975e\u5e38\u597d\u7528\u7684 Docker \u53ef\u89c6\u5316\u7ba1\u7406\u5de5\u5177\uff0c\u901a\u8fc7\u66b4\u9732 Docker Remote API \u53ef\u4ee5\u8fdc\u7a0b\u8fde\u63a5\u5e76\u7ba1\u7406 Docker \u8d44\u6e90\u3002\\n\\n\u5728`Endpoints`\u9875\u9762\u4e2d\u70b9\u51fb`Add endpoint`\uff0c`Environment type`\u9009\u62e9`Docker`\u3002\\n\\n\u5728\u5bf9\u5e94\u7684\u8f93\u5165\u6846\u4e2d\u586b\u5199 IP \u5730\u5740\u548c\u7aef\u53e3\u53f7\uff0c\u5f00\u542f TLS\uff0c\u9009\u62e9\u4e09\u4e2a\u5bf9\u5e94\u7684\u8bc1\u4e66\u6587\u4ef6\u3002\\n\\n![image-20210816222733033-16291240547284](./enable-docker-remote-api-with-tls-protection.assets/image-20210816222733033-16291240547284.png)\\n\\n[^1]: [Documentation](https://documentation.portainer.io/)\\n[^2]: [Protect the Docker daemon socket | Docker Documentation](https://docs.docker.com/engine/security/protect-access/)\\n[^3]: [Docker \u5f00\u542f TLS \u8bbf\u95ee\uff0c\u66f4\u52a0\u5b89\u5168 - \u5b9e\u7528\u6559\u7a0b - \u9ad8\u4e9a\u8f69\u7684 BLOG](https://www.gaoyaxuan.net/blog/324.html)"},{"id":"/ssh-certificate-authentication","metadata":{"permalink":"/blog/ssh-certificate-authentication","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/ssh-certificate-authentication.md","source":"@site/blog/ssh-certificate-authentication.md","title":"SSH \u5bc6\u94a5\u767b\u5f55","description":"\u524d\u8a00","date":"2021-09-08T00:00:00.000Z","formattedDate":"2021\u5e749\u67088\u65e5","tags":[{"label":"ssh","permalink":"/blog/tags/ssh"}],"truncated":true,"authors":[],"frontMatter":{"date":"2021-09-08T00:00:00.000Z","tags":["ssh"]},"prevItem":{"title":"\u5f00\u542f Docker Remote API \u5e76\u542f\u7528 TLS","permalink":"/blog/enable-docker-remote-api-with-tls-protection"},"nextItem":{"title":"\u5229\u7528 Github Actions \u90e8\u7f72 Vuepress \u9879\u76ee\u5230 Github Pages","permalink":"/blog/deploy-vuepress-project-to-github-pages-with-github-actions"}},"content":"## \u524d\u8a00\\n\\n> SSH \u9ed8\u8ba4\u91c7\u7528\u5bc6\u7801\u767b\u5f55\uff0c\u8fd9\u79cd\u65b9\u6cd5\u6709\u5f88\u591a\u7f3a\u70b9\uff0c\u7b80\u5355\u7684\u5bc6\u7801\u4e0d\u5b89\u5168\uff0c\u590d\u6742\u7684\u5bc6\u7801\u4e0d\u5bb9\u6613\u8bb0\u5fc6\uff0c\u6bcf\u6b21\u624b\u52a8\u8f93\u5165\u4e5f\u5f88\u9ebb\u70e6\u3002\u5bc6\u94a5\u767b\u5f55\u662f\u6bd4\u5bc6\u7801\u767b\u5f55\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002[^1]\\n\\n\x3c!-- more --\x3e\\n\\n## \u751f\u6210\u79d8\u94a5\\n\\n\u53ef\u4ee5\u7528 OpenSSH \u4e2d\u7684`ssh-keygen`\u547d\u4ee4\u884c\u5de5\u5177\u6765\u751f\u6210\u79d8\u94a5\u3002`-t`\u53c2\u6570\u6307\u5b9a\u4e86\u52a0\u5bc6\u65b9\u5f0f\uff0c\u901a\u5e38\u4e3a`rsa`\u6216`dsa`\u3002\\n\\n```bash\\nssh-keygen -t rsa\\n```\\n\\n\u751f\u6210\u7684\u5bc6\u94a5\u6587\u4ef6\u9ed8\u8ba4\u5c31\u4f1a\u662f`~/.ssh/id_rsa`\uff08\u79c1\u94a5\uff09\u548c`~/.ssh/id_rsa.pub`\uff08\u516c\u94a5\uff09\u3002\\n\\n\u4e5f\u53ef\u4ee5\u7528 PuTTY \u4e2d\u63d0\u4f9b\u7684 PuTTY Key Generator\uff08puttygen.exe\uff09[^2] \u6765\u7528\u53ef\u89c6\u5316\u7528\u6237\u754c\u9762\u6765\u751f\u6210\u79d8\u94a5\u6587\u4ef6\u3002\\n\\n![image-20210816230720070](./ssh-certificate-authentication.assets/image-20210816230720070.png)\\n\\n## \u628a\u516c\u94a5\u653e\u5728\u670d\u52a1\u5668\u4e0a\\n\\n\u7528\u6237\u516c\u94a5\u4fdd\u5b58\u5728`~/.ssh/authorized_keys`\u6587\u4ef6\u4e2d\uff0c\u5982\u679c\u8be5\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4f60\u53ef\u4ee5\u624b\u52a8\u521b\u5efa\u4e00\u4e2a\u3002\\n\\n\u7136\u540e\u5c06\u516c\u94a5\u7684\u6587\u672c\u5185\u5bb9\u653e\u5165\u5176\u4e2d\uff0c\u6bcf\u884c\u4e00\u4e2a\u3002\\n\\n## \u5173\u95ed\u5bc6\u7801\u767b\u5f55\\n\\n\u7f16\u8f91`/etc/ssh/sshd_config`\u6587\u4ef6\uff0c\u627e\u5230\u5bf9\u5e94\u7684\u914d\u7f6e\u9879\u5e76\u4fee\u6539\u3002\\n\\n```ini\\n# \u4e0d\u5141\u8bb8\u5bc6\u7801\u76f4\u63a5\u767b\u5f55\\nPasswordAuthentication no\\n# \u4e0d\u5141\u8bb8\u7a7a\u5bc6\u7801\u767b\u5f55\\nPermitEmptyPasswords no\\n# \u4e0d\u5141\u8bb8\u4ea4\u4e92\u5f0f\u5bc6\u7801\u767b\u5f55\\nChallengeResponseAuthentication no\\n# \u4e0d\u5141\u8bb8 root \u7528\u6237\u4f7f\u7528\u5bc6\u7801\u767b\u5f55\\nPermitRootLogin prohibit-password\\n# \u4f7f\u7528\u79d8\u94a5\u767b\u5f55\\nPubkeyAuthentication yes\\n```\\n\\n\u91cd\u542f`sshd`\uff0c\u8ba9\u914d\u7f6e\u751f\u6548\u3002\\n\\n```bash\\nsudo systemctl restart sshd\\n```\\n\\n## \u6d4b\u8bd5\u914d\u7f6e\u662f\u5426\u751f\u6548\\n\\n\u4f7f\u7528`ssh`\u547d\u4ee4\u8fde\u63a5\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u4f7f\u7528`-i`\u53c2\u6570\u4f20\u9012\u79c1\u94a5\u6587\u4ef6\u3002\\n\\n```bash\\nssh -i .\\\\centos7\\\\.vagrant\\\\machines\\\\default\\\\virtualbox\\\\private_key vagrant@192.168.33.12\\n```\\n\\n## \u53c2\u8003\u8d44\u6599\\n\\n- [How To Configure SSH Key-Based Authentication on a Linux Server | DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-configure-ssh-key-based-authentication-on-a-linux-server)\\n- [14.3. Using OpenSSH Certificate Authentication Red Hat Enterprise Linux 6 | Red Hat Customer Portal](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/sec-using_openssh_certificate_authentication)\\n\\n[^1]: [SSH \u5bc6\u94a5\u767b\u5f55 - SSH \u6559\u7a0b - \u7f51\u9053](https://wangdoc.com/ssh/key.html)\\n[^2]: [Download PuTTY: latest release (0.76)](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)"},{"id":"/deploy-vuepress-project-to-github-pages-with-github-actions","metadata":{"permalink":"/blog/deploy-vuepress-project-to-github-pages-with-github-actions","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/deploy-vuepress-project-to-github-pages-with-github-actions.md","source":"@site/blog/deploy-vuepress-project-to-github-pages-with-github-actions.md","title":"\u5229\u7528 Github Actions \u90e8\u7f72 Vuepress \u9879\u76ee\u5230 Github Pages","description":"\u524d\u8a00","date":"2021-08-24T00:00:00.000Z","formattedDate":"2021\u5e748\u670824\u65e5","tags":[],"truncated":true,"authors":[],"frontMatter":{"date":"2021-08-24T00:00:00.000Z"},"prevItem":{"title":"SSH \u5bc6\u94a5\u767b\u5f55","permalink":"/blog/ssh-certificate-authentication"},"nextItem":{"title":"\u4f7f\u7528 Vant Weapp \u81ea\u5b9a\u4e49\u5fae\u4fe1\u5c0f\u7a0b\u5e8f TabBar","permalink":"/blog/customize-wechat-mini-program-tabbar-with-vant-weapp"}},"content":"## \u524d\u8a00\\n\\nVuepress[^1] \u662f\u4e00\u4e2a\u57fa\u4e8e Vue \u7684\u9759\u6001\u7f51\u7ad9\u751f\u6210\u5668\uff1bGithub Pages[^2] \u662f Github \u63d0\u4f9b\u7684\u514d\u8d39\u7684\u9759\u6001\u7f51\u7ad9\u6258\u7ba1\u670d\u52a1\uff1bGithub Actions[^3] \u662f Github \u4ed3\u5e93\u4e2d\u96c6\u6210\u7684 CI/CD[^4] \u670d\u52a1\u3002\\n\\nVuepress \u662f\u4e00\u4e2a Node.js \u9879\u76ee\uff0c\u5b83\u53ef\u4ee5\u6839\u636e\u914d\u7f6e\u5c06 Markdown \u6587\u4ef6\u8f6c\u4e3a HTML \u6587\u4ef6\u3002\u4f60\u53ef\u4ee5\u5c06\u8f93\u51fa\u7684\u9759\u6001\u6587\u4ef6\u6258\u7ba1\u5728 Github Pages \u4e2d\uff0c\u8fd9\u6837\u4f60\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a\u53ef\u4ee5\u8bbf\u95ee\u7684\u57df\u540d\u6765\u5c55\u793a\u8fd9\u4e9b\u9759\u6001\u7684 HTML \u6587\u4ef6\u3002\\n\\n\u4f20\u7edf\u7684\u505a\u6cd5\u662f\u5728\u672c\u5730\u5b89\u88c5\u597d Noed.js \u73af\u5883\uff0c\u81ea\u5df1\u624b\u52a8\u6784\u5efa\u9879\u76ee\u4e4b\u540e\u5c06\u6784\u5efa\u4ea7\u7269\u4e0a\u4f20\u5230 Github \u4ed3\u5e93\uff0c\u4ece\u800c\u89e6\u53d1 Github Pages \u7684\u6784\u5efa\u3002\u73b0\u5728\u53ef\u4ee5\u5229\u7528 Github Actions \u6765\u4ee3\u66ff\u624b\u5de5\u52b3\u52a8\uff0cGithub Actions \u53ef\u4ee5\u81ea\u52a8\u88ab\u89e6\u53d1\uff0c\u5b83\u8fd0\u884c\u5728 Github \u63d0\u4f9b\u7684\u865a\u62df\u73af\u5883\u4e2d\uff0c\u53ef\u4ee5\u6267\u884c\u4e00\u7cfb\u5217\u4efb\u52a1\u4ece\u800c\u4ee3\u66ff\u91cd\u590d\u67af\u71e5\u7684\u624b\u52a8\u6784\u5efa\u548c\u90e8\u7f72\u7684\u6b65\u9aa4\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u521b\u5efa Github \u4ed3\u5e93\\n\\n\u5728\u521b\u5efa\u7684 Github \u4ed3\u5e93\u65f6\u8981\u6ce8\u610f\u4ed3\u5e93\u540d\u79f0\uff0c\u5047\u5982\u4f60\u7684\u7528\u6237\u540d\u662f foo\u3002\\n\\n\u5982\u679c\u4f60\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3a`foo.github.io`\u7684\u4ed3\u5e93\uff0c\u4f60\u5c06\u53ef\u4ee5\u901a\u8fc7`https://foo.github.io`\u6765\u8bbf\u95ee\u6b64\u4ed3\u5e93\u7684 Github Pages \u5185\u5bb9\uff1b\\n\\n\u5982\u679c\u4f60\u521b\u5efa\u5176\u4ed6\u540d\u79f0\u7684\u4ed3\u5e93\u5982`bar`\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7`https://foo.github.io/bar/`\u6765\u8bbf\u95ee\u6b64\u4ed3\u5e93\u7684 Github Pages \u5185\u5bb9\u3002\\n\\n\u4f60\u53ef\u4ee5\u6839\u636e\u4f60\u671f\u671b\u7684\u8bbf\u95ee\u65b9\u5f0f\u6765\u9009\u62e9\u4ed3\u5e93\u540d\u79f0\u3002\\n\\n## \u914d\u7f6e Github Actions\\n\\nGithub Actions \u7684\u914d\u7f6e\u6587\u4ef6\u5e94\u8be5\u653e\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u7684`.github/workflows/`\u6587\u4ef6\u5939\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\u914d\u7f6e\u591a\u4e2a Actions\u3002\u914d\u7f6e\u6587\u4ef6\u662f YAML \u683c\u5f0f\uff0c\u6587\u4ef6\u540d\u5f62\u5982`*.yml`\u3002\\n\\n\u6bcf\u4e00\u4e2a Action \u4e2d\u53ef\u4ee5\u5305\u62ec\u591a\u4e2a job\uff0c\u6bcf\u4e2a job \u53ef\u4ee5\u5305\u62ec\u591a\u4e2a step\u3002\u5728 step \u4e2d\u4f60\u53ef\u4ee5\u76f4\u63a5\u8fd0\u884c\u547d\u4ee4\uff0c\u6216\u8005\u5f15\u7528\u5176\u4ed6\u4eba\u7f16\u5199\u597d\u7684 Action \u811a\u672c\u3002\u5728\u672c\u6587\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6211\u4eec\u5f15\u7528\u4e86 github-pages-deploy-action[^5] \u6765\u5b8c\u6210 Github Pages \u90e8\u7f72\uff0c\u800c\u4e0d\u7528\u5173\u7cfb\u5176\u5b9e\u73b0\u7ec6\u8282\u3002\\n\\n\u5b8c\u6210\u672c\u6587\u76ee\u6807\u7684 Github Actions \u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u3002\\n\\n```yaml\\nname: \\"github actions build and deploy gh-pages\\"\\non:\\n  push:\\n    branches:\\n      - master\\njobs:\\n  build-and-deploy:\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: Checkout\\n        uses: actions/checkout@v2.3.1\\n        with:\\n          persist-credentials: false\\n      - name: install and build\\n        run: |\\n          npm install\\n          npm run build\\n      - name: Deploy\\n        uses: JamesIves/github-pages-deploy-action@4.1.4\\n        with:\\n          BRANCH: gh-pages\\n          FOLDER: docs/.vuepress/dist\\n```\\n\\n\u5176\u4e2d\u7684\u4e00\u4e9b\u5173\u952e\u914d\u7f6e\u89e3\u91ca\u5982\u4e0b\u3002\\n\\n- `on.push.branches`\uff0c\u5728\u63a8\u9001\u5230`master`\u5206\u652f\u65f6\u89e6\u53d1\u6b64 Action\uff1b\\n- `jobs.build-and-deploy`\uff0c\u5728\u4e00\u4e2a Action \u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a job\uff0c\u8fd9\u662f\u5176\u4e2d\u7684\u4e00\u4e2a\uff0c\u540d\u79f0\u662f\u81ea\u5df1\u53d6\u7684\uff1b\u6bcf\u4e2a\u4efb\u52a1\u53ef\u4ee5\u6709\u591a\u4e2a step\uff1b\\n- `jobs.build-and-deploy.steps[0]`\uff0c\u7528`actions/checkout`\u68c0\u51fa\u4ed3\u5e93\u5185\u5bb9\uff1b\\n- `jobs.build-and-deploy.steps[1]`\uff0c\u6267\u884c`npm`\u547d\u4ee4\u5b89\u88c5\u5f00\u53d1\u73af\u5883\uff1b\\n- `jobs.build-and-deploy.steps[2]`\uff0c\u7528`JamesIves/github-pages-deploy-action`\u90e8\u7f72`docs/.vuepress/dist`\u6587\u4ef6\u5939\u4e2d\u7684\u5185\u5bb9\u5230`gh-pages`\u5206\u652f\u4e2d\u3002\\n\\n\u5728\u7f16\u5199\u597d\u914d\u7f6e\u6587\u4ef6\u540e\u53ef\u4ee5\u63d0\u4ea4\u5e76\u63a8\u9001\u6587\u4ef6\u81f3 master \u5206\u652f\uff0c\u8fd9\u4f1a\u81ea\u52a8\u89e6\u53d1 Action \u7684\u6267\u884c\uff0c\u5e76\u4e14\u4f60\u53ef\u4ee5\u5728 Actions \u680f\u76ee\u4e2d\u67e5\u770b\u6267\u884c\u65e5\u5fd7\u3002\\n\\n![image-20210824225724791](./deploy-vuepress-project-to-github-pages-with-github-actions.assets/image-20210824225724791.png)\\n\\n## \u914d\u7f6e Github Pages\\n\\n\u6211\u4eec\u7684\u6784\u5efa\u4ea7\u7269\u653e\u5728 gh-pages \u5206\u652f\uff0c\u6211\u4eec\u9700\u8981\u544a\u8bc9 Github Pages \u6e90\u6587\u4ef6\u4f4d\u7f6e\u3002\\n\\n\u5728 Github \u4ed3\u5e93\u7684 Settings \u680f\u76ee\u4e2d\uff0c\u4ece\u5de6\u4fa7\u7684\u8bbe\u7f6e\u5bfc\u822a\u680f\u627e\u5230 Pages \u8bbe\u7f6e\u3002\u5728\u8fd9\u91cc\u4f60\u53ef\u4ee5\u8bbe\u7f6e gh-pages \u4e3a\u6570\u636e\u6e90\u3002\\n\\n![image-20210824230246146](./deploy-vuepress-project-to-github-pages-with-github-actions.assets/image-20210824230246146.png)\\n\\n\u5982\u679c\u6ca1\u51fa\u9519\u7684\u8bdd\uff0c\u5728\u914d\u7f6e\u5b8c\u6210\u4e4b\u540e\u4f60\u5c31\u53ef\u4ee5\u901a\u8fc7 Github Pages \u7ed9\u4f60\u63d0\u4f9b\u7684\u57df\u540d\u6765\u8bbf\u95ee\u4f60\u7684\u9759\u6001\u7f51\u7ad9\u4e86\u3002\\n\\n[^1]: [\u9996\u9875 | VuePress](https://v2.vuepress.vuejs.org/zh/)\\n[^2]: [GitHub Pages | Websites for you and your projects, hosted directly from your GitHub repository. Just edit, push, and your changes are live.](https://pages.github.com/)\\n[^3]: [Learn GitHub Actions - GitHub Docs](https://docs.github.com/en/actions/learn-github-actions)\\n[^4]: [\u4ec0\u4e48\u662f CI/CD\uff1f\u4e00\u6587\u5e26\u4f60\u7406\u89e3 CI \u6301\u7eed\u96c6\u6210\u548c CD \u6301\u7eed\u4ea4\u4ed8/\u90e8\u7f72 - \u7ea2\u5e3d](https://www.redhat.com/zh/topics/devops/what-is-ci-cd)\\n[^5]: [JamesIves/github-pages-deploy-action: Automatically deploy your project to GitHub Pages using GitHub Actions. This action can be configured to push your production-ready code into any branch you\'d like.](https://github.com/JamesIves/github-pages-deploy-action)"},{"id":"/customize-wechat-mini-program-tabbar-with-vant-weapp","metadata":{"permalink":"/blog/customize-wechat-mini-program-tabbar-with-vant-weapp","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/customize-wechat-mini-program-tabbar-with-vant-weapp.md","source":"@site/blog/customize-wechat-mini-program-tabbar-with-vant-weapp.md","title":"\u4f7f\u7528 Vant Weapp \u81ea\u5b9a\u4e49\u5fae\u4fe1\u5c0f\u7a0b\u5e8f TabBar","description":"\u524d\u8a00","date":"2020-12-08T00:00:00.000Z","formattedDate":"2020\u5e7412\u67088\u65e5","tags":[],"truncated":true,"authors":[],"frontMatter":{"date":"2020-12-08T00:00:00.000Z"},"prevItem":{"title":"\u5229\u7528 Github Actions \u90e8\u7f72 Vuepress \u9879\u76ee\u5230 Github Pages","permalink":"/blog/deploy-vuepress-project-to-github-pages-with-github-actions"},"nextItem":{"title":"\u89e3\u51b3 IntelliJ IDEA \u4e2d Tomcat \u65e5\u5fd7\u8f93\u51fa\u4e71\u7801\u7684\u95ee\u9898","permalink":"/blog/solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea"}},"content":"## \u524d\u8a00\\n\\n\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u539f\u751f\u7684 TabBar \u867d\u7136\u8bbe\u7f6e\u7b80\u5355\uff0c\u4f46\u662f\u6837\u5f0f\u4e0d\u597d\u770b\uff0c\u4e5f\u4e0d\u80fd\u4f7f\u7528\u5b57\u4f53\u56fe\u6807\uff0c\u4f46\u662f\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u6709\u81ea\u5b9a\u4e49 TabBar \u7684\u673a\u5236\u3002\\n\\nVant WeApp[^1] \u662f\u6709\u8d5e\u51fa\u54c1\u7684\u9488\u5bf9\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u4e00\u5957\u5f00\u6e90\u7ec4\u4ef6\u5e93\uff0c\u7ed3\u5408 van-tabbar[^2] \u548c\u5fae\u4fe1\u7684\u81ea\u5b9a\u4e49 TabBar \u673a\u5236 [^3] \u53ef\u4ee5\u5b9e\u73b0\u4e00\u5957\u6bd4\u8f83\u597d\u770b\u7684 TabBar\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u65b0\u5efa custom-tab-bar \u7ec4\u4ef6\\n\\n\u5982\u56fe\u6240\u793a\uff0c\u5728\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5de5\u7a0b\u6587\u4ef6\u5939\u6839\u76ee\u5f55\u4e0b\u65b0\u5efa\u4e00\u4e2a\u540d\u4e3a `custom-tab-bar` \u7684\u7ec4\u4ef6\u3002\\n\\n![img](./customize-wechat-mini-program-tabbar-with-vant-weapp.assets/image-5.png)\\n\\n\u5176\u4e2d\u5404\u4e2a\u6587\u4ef6\u4e2d\u7684\u4ee3\u7801\u5982\u4e0b\uff1a\\n\\n```json\\n{\\n  \\"component\\": true,\\n  \\"usingComponents\\": {\\n    \\"van-tabbar\\": \\"@vant/weapp/tabbar/index\\",\\n    \\"van-tabbar-item\\": \\"@vant/weapp/tabbar-item/index\\"\\n  }\\n}\\n```\\n\\n```javascript\\n// custom-tab-bar/index.js\\nComponent({\\n  /**\\n   * \u7ec4\u4ef6\u7684\u5c5e\u6027\u5217\u8868\\n   */\\n  properties: {},\\n\\n  /**\\n   * \u7ec4\u4ef6\u7684\u521d\u59cb\u6570\u636e\\n   */\\n  data: {\\n    active: -1,\\n    list: [{\\n        icon: \\"search\\",\\n        text: \\"\u641c\u7d22\\",\\n        url: \\"/pages/index/index\\",\\n      },\\n      {\\n        icon: \\"question-o\\",\\n        text: \\"\u7b54\u9898\\",\\n        url: \\"/pages/question/index\\",\\n      },\\n      {\\n        icon: \\"ellipsis\\",\\n        text: \\"\u5173\u4e8e\\",\\n        url: \\"/pages/user/index\\",\\n      },\\n    ],\\n  },\\n\\n  /**\\n   * \u7ec4\u4ef6\u7684\u65b9\u6cd5\u5217\u8868\\n   */\\n  methods: {\\n    onChange(event) {\\n      wx.switchTab({\\n        url: this.data.list[event.detail].url,\\n      });\\n    },\\n\\n    init() {\\n      const {\\n        route\\n      } = getCurrentPages().pop();\\n      const active = this.data.list.findIndex(\\n        (item) => item.url === `/${route}`\\n      );\\n      console.log(\\"active:\\", active);\\n      this.setData({\\n        active,\\n      });\\n    },\\n  },\\n});\\n```\\n\\n```xml\\n\x3c!-- custom-tab-bar/index.wxml --\x3e\\n<van-tabbar active=\\"{{ active }}\\" bind:change=\\"onChange\\">\\n    <van-tabbar-item wx:for=\\"{{list}}\\" wx:key=\\"index\\" icon=\\"{{item.icon}}\\">\\n        {{item.text}}\\n    </van-tabbar-item>\\n</van-tabbar>\\n```\\n\\n## \u542f\u7528\u81ea\u5b9a\u4e49 TabBar \u8bbe\u7f6e\\n\\n\u4fee\u6539 `app.js` \u4e2d `tabBar` \u8bbe\u7f6e\uff0c\u8bbe\u7f6e `custom` \u4e3a `true`\u3002\u5176\u4e2d `list` \u4e2d\u7684\u5bf9\u8c61\u53ea\u9700\u4fdd\u7559 `path` \u5c5e\u6027\u3002\\n\\n![img](./customize-wechat-mini-program-tabbar-with-vant-weapp.assets/image-6-668x1024.png)\\n\\n## \u5728\u6bcf\u4e2a Tab \u9875\u4e2d\u914d\u7f6e\\n\\n\u5728\u5f00\u542f\u4e86\u81ea\u5b9a\u4e49 TabBar \u8bbe\u7f6e\u540e\uff0c\u53ef\u4ee5\u5728\u6bcf\u4e2a\u9875\u9762\u4e2d\u901a\u8fc7 `getTabBar()` \u83b7\u53d6 TabBar \u7ec4\u4ef6\u5b9e\u4f8b\u3002\\n\\n\u73b0\u5728\u9700\u8981\u5728\u6bcf\u4e2a Tab \u9875\u4e2d\u8bbe\u7f6e\u5f53\u524d Tab \u9875\u56fe\u6807\u9ad8\u4eae\u3002\\n\\n\u53ef\u4ee5\u5728\u6bcf\u4e2a Tab \u9875\u7684 `onShow()` \u751f\u547d\u5468\u671f\u65b9\u6cd5\u4e2d\u8c03\u7528 TabBar \u7684 `init()` \u65b9\u6cd5\uff0c\u4fee\u6539\u5f53\u524d\u6fc0\u6d3b\u9875\uff0c\u6765\u9ad8\u4eae\u5f53\u524d Tab \u9875\u7684\u56fe\u6807\u3002\\n\\n```javascript\\n/**\\n* \u751f\u547d\u5468\u671f\u51fd\u6570 -- \u76d1\u542c\u9875\u9762\u663e\u793a\\n*/\\nonShow: function () {\\n  this.getTabBar().init();\\n},\\n```\\n\\n[^1]: [Vant - \u8f7b\u91cf\u3001\u53ef\u9760\u7684\u79fb\u52a8\u7aef\u7ec4\u4ef6\u5e93 (gitee.io)](https://vant-contrib.gitee.io/vant/#/zh-CN/)\\n[^2]: [Tabbar \u6807\u7b7e\u680f - Vant Weapp](https://vant-contrib.gitee.io/vant-weapp/#/tabbar)\\n[^3]: [\u81ea\u5b9a\u4e49 tabBar | \u5fae\u4fe1\u5f00\u653e\u6587\u6863](https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html)"},{"id":"/solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea","metadata":{"permalink":"/blog/solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea.md","source":"@site/blog/solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea.md","title":"\u89e3\u51b3 IntelliJ IDEA \u4e2d Tomcat \u65e5\u5fd7\u8f93\u51fa\u4e71\u7801\u7684\u95ee\u9898","description":"\u524d\u8a00","date":"2020-12-08T00:00:00.000Z","formattedDate":"2020\u5e7412\u67088\u65e5","tags":[],"truncated":true,"authors":[],"frontMatter":{"date":"2020-12-08T00:00:00.000Z"},"prevItem":{"title":"\u4f7f\u7528 Vant Weapp \u81ea\u5b9a\u4e49\u5fae\u4fe1\u5c0f\u7a0b\u5e8f TabBar","permalink":"/blog/customize-wechat-mini-program-tabbar-with-vant-weapp"},"nextItem":{"title":"\u7528 Windows Terminal \u548c oh-my-posh \u6253\u9020\u4e00\u4e2a\u597d\u7528\u7684\u7ec8\u7aef","permalink":"/blog/build-a-decent-terminal-with-windows-terminal-and-oh-my-posh"}},"content":"## \u524d\u8a00\\n\\n\u5728\u7528 IntelliJ IDEA \u8fd0\u884c Java Web \u9879\u76ee\u65f6\uff0c\u5728 Tomcat \u7684\u65e5\u5fd7\u8f93\u51fa\u533a\u57df\u4f1a\u51fa\u73b0\u4e71\u7801\uff0c\u6548\u679c\u5982\u4e0b\u56fe\u6240\u793a\u3002\\n\\n\u5728\u7f51\u7edc\u4e0a\u67e5\u4e86\u4e00\u4e9b\u8d44\u6599 [^1]\uff0c\u8bb0\u5f55\u4e0b\u89e3\u51b3\u529e\u6cd5\u3002\\n\\n![Tomcat \u65e5\u5fd7\u51fa\u73b0\u4e71\u7801](./solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea.assets/image-1024x475.png)\\n\\n\x3c!-- more --\x3e\\n\\n## \u539f\u56e0\u5206\u6790\\n\\n\u53ef\u80fd\u662f\u56e0\u4e3a IDEA \u63a7\u5236\u53f0\u4e2d\u6240\u91c7\u7528\u7684\u5b57\u7b26\u7f16\u7801\u4e0e Tomcat \u8f93\u51fa\u6240\u91c7\u7528\u7684\u5b57\u7b26\u7f16\u7801\u4e0d\u4e00\u81f4\uff0c\u5bfc\u81f4\u4e86\u51fa\u73b0\u4e71\u7801\u3002\\n\\nIDEA \u63a7\u5236\u53f0\u8f93\u51fa\u91c7\u7528\u7684\u662f GBK \u7f16\u7801\uff0cTomcat \u8f93\u51fa\u91c7\u7528\u7684\u662f UTF-8 \u7f16\u7801\u3002\\n\\n## \u89e3\u51b3\u529e\u6cd5\\n\\n### \u6cd5\u4e00\uff1a\u4fee\u6539 IDEA \u63a7\u5236\u53f0\u8f93\u51fa\u7f16\u7801\u4e3a UTF-8\\n\\n\u5728 IDEA \u7684\u4e0a\u65b9\u5de5\u5177\u680f\u4e2d\uff0c\u4f9d\u6b21\u9009\u62e9`Help`->`Edit Custome VM Options...`\u3002\\n\\n![img](./solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea.assets/image-1.png)\\n\\n\u5728`vmoptions`\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4e00\u884c\u53c2\u6570\uff0c\u4e4b\u540e\u91cd\u542f IDEA\u3002\\n\\n```bash\\n-Dfile.encoding=UTF-8\\n```\\n\\n\u8be5\u6587\u4ef6\u5b9e\u9645\u4f4d\u4e8e`C:\\\\Users\\\\<\u7528\u6237\u540d>\\\\AppData\\\\Roaming\\\\JetBrains\\\\IntelliJIdea2020.3\\\\idea64.exe.vmoptions`\uff0c\u6240\u4ee5\u76f4\u63a5\u4fee\u6539\u6b64\u6587\u4ef6\u5e94\u8be5\u4e5f\u53ef\u884c\u3002\\n\\n![img](./solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea.assets/image-2.png)\\n\\n### \u6cd5\u4e8c\uff1a\u4fee\u6539 Tomcat \u8f93\u51fa\u7f16\u7801\u4e3a GBK\\n\\n\u5728 Tomcat \u5b89\u88c5\u4f4d\u7f6e\u4e0b\u7684 conf \u6587\u4ef6\u4e2d\u5b58\u5728`logging.properties`\u914d\u7f6e\u6587\u4ef6\u3002\\n\\n\u4fee\u6539\u5176\u4e2d\u7684\u914d\u7f6e\uff0c\u5c06`java.util.logging.ConsoleHandler.encoding`\u7684\u5c5e\u6027\u7531`UTF-8`\u6539\u4e3a`GBK`\u3002\\n\\n\u4fdd\u5b58\u4e4b\u540e\u91cd\u542f Tomcat \u5373\u53ef\u3002\\n\\n![img](./solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea.assets/image-4-1024x907.png)\\n\\n## \u7ed3\u679c\\n\\n\u4e24\u79cd\u65b9\u6cd5\u5747\u53ef\u4ee5\u89e3\u51b3\u95ee\u9898\u3002\\n\\n![img](./solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea.assets/image-3-1024x491.png)\\n\\n[^1]: [idea tomcat \u4e71\u7801\u95ee\u9898\u7684\u89e3\u51b3\u53ca\u76f8\u5173\u8bbe\u7f6e - \u884c\u800c\u601d - \u535a\u5ba2\u56ed](https://www.cnblogs.com/shej123/p/10312806.html)"},{"id":"/build-a-decent-terminal-with-windows-terminal-and-oh-my-posh","metadata":{"permalink":"/blog/build-a-decent-terminal-with-windows-terminal-and-oh-my-posh","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/build-a-decent-terminal-with-windows-terminal-and-oh-my-posh.md","source":"@site/blog/build-a-decent-terminal-with-windows-terminal-and-oh-my-posh.md","title":"\u7528 Windows Terminal \u548c oh-my-posh \u6253\u9020\u4e00\u4e2a\u597d\u7528\u7684\u7ec8\u7aef","description":"\u8865\u5145","date":"2020-02-24T00:00:00.000Z","formattedDate":"2020\u5e742\u670824\u65e5","tags":[{"label":"windows-terminal","permalink":"/blog/tags/windows-terminal"},{"label":"powershell","permalink":"/blog/tags/powershell"},{"label":"oh-my-posh","permalink":"/blog/tags/oh-my-posh"}],"truncated":true,"authors":[],"frontMatter":{"date":"2020-02-24T00:00:00.000Z","tags":["windows-terminal","powershell","oh-my-posh"]},"prevItem":{"title":"\u89e3\u51b3 IntelliJ IDEA \u4e2d Tomcat \u65e5\u5fd7\u8f93\u51fa\u4e71\u7801\u7684\u95ee\u9898","permalink":"/blog/solve-the-problem-of-tomcat-log-output-messy-code-in-intellij-idea"},"nextItem":{"title":"\u4e3a\u300a\u6c42\u751f\u4e4b\u8def 2\u300b\u5236\u4f5c\u52a8\u6001\u55b7\u6f06","permalink":"/blog/making-dynamic-spray-paint-for-left-4-dead-2"}},"content":"## \u8865\u5145\\n\\noh-my-posh \u9879\u76ee\u5df2\u88ab\u91cd\u6784\uff0c\u73b0\u5728\u7531 Go \u8bed\u8a00\u5b9e\u73b0\uff0c\u8be6\u60c5\u89c1 [Github](https://github.com/JanDeDobbeleer/oh-my-posh)\u3002\\n\\n\u6587\u7ae0\u4e2d\u6240\u4f7f\u7528\u7684\u7248\u672c\u73b0\u5df2\u88ab\u91cd\u547d\u540d\u4e3a oh-my-posh2\uff0c\u7531 PowerShell \u5b9e\u73b0\uff0c\u8be6\u60c5\u89c1 [Github](https://github.com/JanDeDobbeleer/oh-my-posh2)\u3002\\n\\noh-my-posh3 \u7684\u5b89\u88c5\u8bf7\u53c2\u8003 [Windows Terminal + PWSH + oh my posh3 + PSReadLine \u6253\u9020\u4e00\u4e2a\u597d\u7528\u7684\u7ec8\u7aef](use-pwsh-and-oh-my-posh3-on-windows.md)\uff0c**\u4e0b\u9762\u7684\u5185\u5bb9\u5df2\u8fc7\u65f6**\u3002\\n\\n## \u524d\u8a00\\n\\nWindows \u4e2d\u81ea\u5e26\u7684\u7ec8\u7aef\u4f7f\u7528\u4f53\u9a8c\u786e\u5b9e\u8bf4\u4e0d\u4e0a\u597d\uff0c\u5c1d\u8bd5\u4e86\u8bb8\u591a\u7ec4\u5408\u4e5f\u611f\u89c9\u90fd\u4e0d\u987a\u624b\u3002\u8fd9\u6b21\u8bd5\u8bd5\u5fae\u8f6f\u4eb2\u81ea\u51fa\u7684 Windows Terminal[^1]\uff0c\u518d\u52a0\u4e0a oh-my-posh[^2] \u63d2\u4ef6\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u6b63\u6587\\n\\n### \u5b89\u88c5 Windows Terminal\\n\\nWindows Terminal \u63d0\u4f9b\u591a\u79cd\u5b89\u88c5\u65b9\u5f0f\uff0c\u4f60\u53ef\u4ee5\u5728 Microsoft Store \u4e2d\u5b89\u88c5\uff1b\u53ef\u4ee5\u81ea\u884c\u5728\u8be5\u9879\u76ee\u7684 Github \u4ed3\u5e93 [^1] \u4e2d\u4e0a\u4e0b\u8f7d\u5b89\u88c5\u7a0b\u5e8f\uff1b\u867d\u7136\u5b98\u65b9\u6587\u6863\u672a\u63d0\u53ca\uff0c\u4f46\u662f\u4f60\u4e5f\u53ef\u4ee5\u7528 Scoop[^3] \u5b89\u88c5\uff1a\\n\\n```powershell\\nscoop install windows-terminal\\n```\\n\\n### \u5b89\u88c5 oh-my-posh\\n\\noh-my-posh \u662f\u9488\u5bf9 Windows PowerShell \u8bbe\u8ba1\u7684\u4e3b\u9898\u5f15\u64ce\uff0c\u7c7b\u4f3c\u4e8e zsh \u548c Oh My Zsh \u7684\u5173\u7cfb\u3002\u5b83\u53ef\u4ee5\u8ba9\u4f60\u7684\u547d\u4ee4\u884c\u66f4\u5f3a\u5927\u3002\\n\\n\u6253\u5f00 PowerShell\uff0c\u8f93\u5165\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a\\n\\n```powershell\\nInstall-Module posh-git -Scope CurrentUser\\nInstall-Module oh-my-posh -Scope CurrentUser\\n```\\n\\n\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\u8fd8\u66f4\u6539 PowerShell \u7684\u7528\u6237\u914d\u7f6e\uff0c\u8ba9\u5b83\u6bcf\u6b21\u542f\u52a8\u7684\u65f6\u5019\u81ea\u52a8\u52a0\u8f7d oh-my-posh \u63d2\u4ef6\uff1b\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\\n\\n```powershell\\nif (!(Test-Path -Path $PROFILE )) { New-Item -Type File -Path $PROFILE -Force }\\nnotepad $PROFILE\\n```\\n\\n\u4e0d\u51fa\u610f\u5916\u7684\u8bdd\u63a5\u4e0b\u6765\u4f1a\u51fa\u73b0\u8bb0\u4e8b\u672c\uff0c\u4f60\u9700\u8981\u5728\u91cc\u9762\u5199\u4e0a\u4ee5\u4e0b\u5185\u5bb9\uff1a\\n\\n```powershell\\nImport-Module posh-git\\nImport-Module oh-my-posh\\nSet-Theme Paradox\\n```\\n\\n\u4fdd\u5b58\u8be5\u6587\u4ef6\uff0c\u91cd\u65b0\u6253\u5f00 PowerShell \u4f60\u5c31\u80fd\u770b\u5230\u4e00\u4e2a\u53d1\u751f\u6539\u53d8\u4e86\u7684 PowerShell \u3002\\n\\n![img](./build-a-decent-terminal-with-windows-terminal-and-oh-my-posh.assets/vMcBOyiREC-1024x523.png)\\n\\noh-my-posh \u63d0\u4f9b\u4e86\u51e0\u7ec4\u9884\u8bbe\u7684\u4e3b\u9898\u4f9b\u4f60\u9009\u62e9\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 `Set-Theme` \u547d\u4ee4\u6765\u66f4\u6539\u5f53\u524d\u4e3b\u9898\uff0c\u53ef\u9009\u7684\u503c\u6709 `Agnoster`/`Paradox`/`Sorin`/`Darkblood`/`Avit`/`Honukai`/`Fish`/`Robbyrussell`\u3002\\n\\n![img](./build-a-decent-terminal-with-windows-terminal-and-oh-my-posh.assets/sA8iXJPC2j.png)\\n\\n\u8fd9\u4e2a\u4e3b\u9898\u8bbe\u7f6e\u53ea\u5728\u5f53\u524d\u4f1a\u8bdd\u751f\u6548\uff0c\u4e3a\u4e86\u6bcf\u6b21\u542f\u52a8 PowerShell \u7684\u65f6\u5019\u90fd\u80fd\u52a0\u8f7d\u4f60\u60f3\u8981\u7684\u4e3b\u9898\uff0c\u4f60\u8fd8\u9700\u8981\u4fee\u6539\u4ee5\u4e0b\u7528\u6237\u914d\u7f6e\u6587\u4ef6\uff0c\u5c31\u50cf\u4e0a\u4e00\u4e2a\u6b65\u9aa4\u4e2d\u505a\u7684\u4e00\u6837\uff0c\u53ea\u9700\u8981\u4fee\u6539 `Set-Theme` \u547d\u4ee4\u7684\u90e8\u5206\u5373\u53ef\u3002\\n\\n### \u7528\u4e0a\u5fae\u8f6f\u7684 Cascadia Code \u5b57\u4f53\\n\\n\u6216\u8bb8\u4f60\u5df2\u7ecf\u53d1\u73b0\u4e86\u6709\u4e9b\u5b57\u7b26\u663e\u793a\u4e0d\u6b63\u5e38\uff0c\u90a3\u662f\u56e0\u4e3a\u9ed8\u8ba4\u7684\u5b57\u4f53\u6ca1\u6709\u5185\u5d4c\u8fd9\u4e9b\u5b57\u7b26\u7684\u5f62\u72b6\uff0c\u4f60\u8fd8\u9700\u8981\u6362\u4e00\u4e2a\u5b57\u4f53\u3002\\n\\n\u5fae\u8f6f\u7684\u53e6\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0cCascadia Code[^4] \u5c31\u662f\u4e00\u6b3e\u9002\u7528\u4e8e\u7ec8\u7aef\u548c\u4ee3\u7801\u5c55\u793a\u7684\u5b57\u4f53\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 Scoop \u6765\u5b89\u88c5\u5b83\uff1b\u5b89\u88c5\u5b57\u4f53\u7684\u65f6\u5019\u9700\u8981\u4f7f\u7528\u5230\u7ba1\u7406\u5458\u6743\u9650\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 `sudo` \u547d\u4ee4\uff0c\u6216\u8005\u7528\u7ba1\u7406\u5458\u6743\u9650\u91cd\u65b0\u6253\u5f00 PowerShell\uff0c\u518d\u6267\u884c\u5b89\u88c5\u3002\\n\\n\u5728\u5b89\u88c5\u4e4b\u524d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u6dfb\u52a0\u4e00\u4e0b `nerd-fonts` \u4ed3\u5e93\uff0c\u56e0\u4e3a\u5b57\u4f53\u8f6f\u4ef6\u7684\u5143\u4fe1\u606f\u90fd\u5b58\u653e\u4e8e\u8fd9\u4e2a\u4ed3\u5e93\u4e2d\u3002\\n\\n```powershell\\nscoop bucket add nerd-fonts\\n```\\n\\n\u5728 Scoop \u7684\u4ed3\u5e93\u4e2d\u5b58\u5728\u7740\u597d\u51e0\u4e2a\u7248\u672c\u7684 Cascadia Code\uff0c\u5176\u4e2d\uff1a\\n\\n- `Cascadia-Code`\u662f\u539f\u7248\u4e0d\u5e26 Powerline \u5b57\u7b26\u7684\uff1b\\n- `Cascadia-PL`\u662f\u5fae\u8f6f\u51fa\u54c1\u7684\uff0c\u81ea\u5e26 Powerline \u5b57\u7b26\u7684\uff1b\\n- `CascadiaCode-NF`\u662f Nerd Fonts[^5] \u9879\u76ee\u51fa\u54c1\u7684\uff0c\u540e\u671f\u8865\u4e01\u4e86\u5927\u91cf Powerline \u5b57\u7b26\u3002\\n\\n\u6ca1\u6709\u7279\u6b8a\u9700\u6c42\u7684\u8bdd\u53ef\u4ee5\u9009\u62e9\u5b98\u65b9\u51fa\u7684\u8f7b\u91cf\u7ea7\u7684 `Cascadia-PL`\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\\n\\n```powershell\\nsudo scoop install Cascadia-PL\\n```\\n\\n\u5b89\u88c5\u5b8c\u6210\u4e4b\u540e\u8fd8\u9700\u8bbe\u7f6e\u4ee5\u4e0b\uff0c\u6307\u5b9a Windows Terminal \u4f7f\u7528\u8be5\u5b57\u4f53\u3002\\n\\n\u76ee\u524d Windows Terminal \u6ca1\u6709\u4e13\u95e8\u7684\u8bbe\u7f6e\u754c\u9762\uff0c\u6240\u6709\u7684\u914d\u7f6e\u9879\u90fd\u5728 `profiles.json` \u914d\u7f6e\u6587\u4ef6\u91cc\uff1b\u5728\u914d\u7f6e\u6587\u4ef6\u7684\u5bf9\u5e94\u5730\u65b9\u8bbe\u7f6e `fontFace` \u7684\u503c\u4e3a `Cascadia Code PL`\uff1a\\n\\n```json\\n// ...\\n\\"defaults\\":\\n{\\n    // Put settings here that you want to apply to all profiles\\n    \\"fontFace\\": \\"Cascadia Code PL\\"\\n},\\n// ...\\n```\\n\\n\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u540e\u5c31\u80fd\u4f7f\u914d\u7f6e\u6587\u4ef6\u751f\u6548\uff1b\u6b64\u65f6\u6240\u6709\u5b57\u7b26\u5e94\u8be5\u80fd\u6b63\u5e38\u663e\u793a\u4e86\u3002\\n\\n![img](./build-a-decent-terminal-with-windows-terminal-and-oh-my-posh.assets/vjPXgPO7AB-1024x523.png)\\n\\n### \u96c6\u6210 Git Bash\\n\\n\u9996\u5148\u5c06 Git \u5b89\u88c5\u76ee\u5f55\u4e0b\u7684 `bin` \u76ee\u5f55\u52a0\u5165 `Path` \u73af\u5883\u53d8\u91cf\uff0c\u5982\u679c\u4f60\u662f\u7528 Scoop \u5b89\u88c5\u7684 Git\uff0c\u5219\u53ef\u4ee5\u5ffd\u7565\u6b64\u6b65\u9aa4\uff0c\u56e0\u4e3a Scoop \u5df2\u7ecf\u5e2e\u4f60\u5b8c\u6210\u4e86\u8fd9\u4e2a\u5de5\u4f5c\uff1b\u7136\u540e\u4fee\u6539 Windows Terminal \u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5728 `profiles`->`list` \u4e2d\u65b0\u589e\u4e00\u6761\u914d\u7f6e\uff1a\\n\\n```json\\n// ...\\n\\"list\\":\\n[\\n\\n    {\\n        \\"guid\\": \\"{61c54bbd-c2c6-5271-96e7-009a87ff4411}\\",\\n        \\"name\\": \\"Git Bash\\",\\n        \\"commandline\\": \\"bash.exe\\",\\n        \\"hidden\\": false,\\n        \\"startingDirectory\\" : \\"%USERPROFILE%\\"\\n    }\\n]\\n// ...\\n```\\n\\n\u6ce8\u610f JSON \u7684\u8bed\u6cd5\u683c\u5f0f\uff0c\u5728\u5217\u8868\u4e2d\u4e0d\u8981\u5c11\u52a0\u6216\u8005\u591a\u52a0\u9017\u53f7\u3002\u4fdd\u5b58\u914d\u7f6e\u6587\u4ef6\u4e4b\u540e\u5c31\u80fd\u5728 Windows Terminal \u4e2d\u5feb\u6377\u542f\u52a8 Git Bash \u4e86\u3002\\n\\n![img](./build-a-decent-terminal-with-windows-terminal-and-oh-my-posh.assets/SI7S9fkaKG-1024x523.png)\\n\\n## \u540e\u8bb0\\n\\n\u65b0\u7684 Windows Terminal \u4f7f\u7528\u4f53\u9a8c\u8fd8\u662f\u633a\u4e0d\u9519\u7684\uff0c\u989c\u503c\u4e5f OK\uff0c\u6298\u817e\u4e00\u4e0b\u4e5f\u633a\u597d\u7528\u7684\u3002\\n\\n[^1]: [microsoft/terminal: The new Windows Terminal and the original Windows console host, all in the same place!](https://github.com/microsoft/terminal)\\n[^2]: [JanDeDobbeleer/oh-my-posh2: A prompt theming engine for Powershell](https://github.com/JanDeDobbeleer/oh-my-posh2)\\n[^3]: [lukesampson/scoop: A command-line installer for Windows.](https://github.com/lukesampson/scoop)\\n[^4]: [microsoft/cascadia-code: This is a fun, new monospaced font that includes programming ligatures and is designed to enhance the modern look and feel of the Windows Terminal.](https://github.com/microsoft/cascadia-code)\\n[^5]: [ryanoasis/nerd-fonts: Iconic font aggregator, collection, & patcher. 3,600+ icons, 50+ patched fonts: Hack, Source Code Pro, more. Glyph collections: Font Awesome, Material Design Icons, Octicons, & more](https://github.com/ryanoasis/nerd-fonts)"},{"id":"/making-dynamic-spray-paint-for-left-4-dead-2","metadata":{"permalink":"/blog/making-dynamic-spray-paint-for-left-4-dead-2","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/making-dynamic-spray-paint-for-left-4-dead-2.md","source":"@site/blog/making-dynamic-spray-paint-for-left-4-dead-2.md","title":"\u4e3a\u300a\u6c42\u751f\u4e4b\u8def 2\u300b\u5236\u4f5c\u52a8\u6001\u55b7\u6f06","description":"\u524d\u8a00","date":"2017-08-25T00:00:00.000Z","formattedDate":"2017\u5e748\u670825\u65e5","tags":[],"truncated":true,"authors":[],"frontMatter":{"date":"2017-08-25T00:00:00.000Z"},"prevItem":{"title":"\u7528 Windows Terminal \u548c oh-my-posh \u6253\u9020\u4e00\u4e2a\u597d\u7528\u7684\u7ec8\u7aef","permalink":"/blog/build-a-decent-terminal-with-windows-terminal-and-oh-my-posh"},"nextItem":{"title":"\u83b7\u53d6\u5929\u7ffc\u5149\u732b F412 \u8d85\u7ea7\u7ba1\u7406\u5458\u5e10\u53f7\u5bc6\u7801","permalink":"/blog/get-super-admin-password-of-f412"}},"content":"## \u524d\u8a00\\n\\n![img](./making-dynamic-spray-paint-for-left-4-dead-2.assets/kana.gif)\\n\\n\u52a8\u6001\u7684\u55b7\u6f06\u4e5f\u662f\u8fd9\u4e2a\u6e38\u620f\u7684\u4e50\u8da3\u4e4b\u4e00\uff0c\u5c1d\u8bd5\u81ea\u5df1\u5236\u4f5c\u4e00\u4e0b\u52a8\u6001\u55b7\u6f06\uff0c\u5c06 GIF \u56fe\u7247\u8f6c\u6362\u4e3a\u53ef\u4ee5\u5728\u6e38\u620f\u4e2d\u4f7f\u7528\u7684\u52a8\u6001\u55b7\u6d82\u6587\u4ef6\u3002\\n\\n\u6587\u4e2d\u4f7f\u7528\u7684\u5de5\u5177\u548c\u6210\u54c1\u53ef\u4ee5\u4ece [\u8fd9\u91cc](https://zfile.iuok.me/directlink/1/articles/making-dynamic-spray-paint-for-left-4-dead-2/tools.zip) \u4e0b\u8f7d\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u51c6\u5907\u5de5\u4f5c\\n\\n1. \u4e00\u5f20 GIF \u56fe\u7247\uff1b\\n2. GIF \u56fe\u7247\u5206\u89e3\u5de5\u5177\uff0c\u7528\u4e8e\u628a\u52a8\u6001\u56fe\u7684\u6bcf\u4e00\u5e27\u5206\u89e3\u51fa\u6765\uff0c\u6587\u4e2d\u4f7f\u7528\u7684\u662f GifSplitter[^1]\uff1b\\n3. VTFEdit[^2]\uff0c\u6838\u5fc3\u5de5\u5177\uff0c\u7528\u4e8e\u5236\u4f5c VTF \u683c\u5f0f\u7684\u52a8\u6001\u56fe\u3002\\n\\n## \u5206\u89e3 GIF\\n\\n\u8fd9\u91cc\u4f7f\u7528\u7684\u662f GifSplitter\uff0c\u76ee\u7684\u662f\u5c06 GIF \u56fe\u7247\u7684\u6bcf\u4e00\u5e27\u90fd\u5206\u89e3\u51fa\u6765\uff1b\u5176\u4ed6\u529f\u80fd\u7c7b\u4f3c\u7684\u8f6f\u4ef6\u548c\u5728\u7ebf\u5de5\u5177\u90fd\u53ef\u4ee5\u3002\\n\\n![img](./making-dynamic-spray-paint-for-left-4-dead-2.assets/gifsplitter.png)\\n\\n## \u5236\u4f5c VTF\\n\\n\u6253\u5f00 VTFEdit\uff0c\u70b9\u51fb\u5de6\u4e0a\u89d2\u7684\u300c\u5bfc\u5165\u300d\u6309\u94ae\uff0c\u9009\u62e9\u5e76\u5bfc\u5165\u4e0a\u4e00\u6b65\u4e2d\u5206\u79bb\u51fa\u6765\u7684\u6240\u6709\u56fe\u7247\u3002\\n\\n![img](./making-dynamic-spray-paint-for-left-4-dead-2.assets/import.png)\\n\\n\u63a5\u4e0b\u6765\u8bbe\u7f6e\u8d34\u56fe\u5c3a\u5bf8\uff0c\u9009\u4e2d\u300c\u9650\u5b9a\u8d34\u56fe\u5c3a\u5bf8\u300d\uff0c\u9ad8\u5ea6\u548c\u5bbd\u5ea6\u90fd\u8bbe\u7f6e\u4e3a 128\uff0c\u5176\u4ed6\u8bbe\u7f6e\u4fdd\u6301\u9ed8\u8ba4\u3002\\n\\n![img](./making-dynamic-spray-paint-for-left-4-dead-2.assets/options.png)\\n\\n\u518d\u5207\u6362\u5230\u300c\u4fe1\u606f\u300d\u9875\u4e2d\uff0c\u67e5\u770b\u6587\u4ef6\u5927\u5c0f\uff1b**\u8981\u786e\u4fdd\u5176\u5c0f\u4e8e 512KB\uff0c\u5426\u5219\u65e0\u6cd5\u55b7\u51fa**\u3002\u5982\u679c\u6587\u4ef6\u592a\u5927\u7684\u8bdd\uff0c\u5c31\u628a\u8981\u5bfc\u5165\u7684\u56fe\u7247\u5220\u9664\u4e00\u4e9b\uff0c\u518d\u91cd\u590d\u8fd9\u4e9b\u6b65\u9aa4\uff0c\u76f4\u81f3\u6ee1\u8db3\u6761\u4ef6\u3002\\n\\n\u518d\u6ee1\u8db3\u6761\u4ef6\u4e4b\u540e\u5c31\u53ef\u4ee5\u4fdd\u5b58\u4e86\uff0c\u4fdd\u5b58\u7684\u65f6\u5019\u6ce8\u610f**\u4e0d\u8981\u4f7f\u7528\u4e2d\u6587\u6587\u4ef6\u540d**\uff0c\u4e0d\u7136\u5728\u6e38\u620f\u91cc\u6d4f\u89c8\u6587\u4ef6\u7684\u65f6\u5019\u4e2d\u6587\u540d\u4f1a\u4e71\u7801\u3002\\n\\n![img](./making-dynamic-spray-paint-for-left-4-dead-2.assets/save.png)\\n\\n## \u5728\u6e38\u620f\u4e2d\u5bfc\u5165\\n\\n\u6253\u5f00\u6e38\u620f\uff0c\u5728\u6e38\u620f\u8bbe\u7f6e\u4e2d\u4f9d\u6b21\u627e\u5230\u300c\u5bfc\u5165\u55b7\u6f06\u56fe\u6848\u300d\uff0c\u9009\u62e9\u4e0a\u4e00\u6b65\u4e2d\u5236\u4f5c\u597d\u7684 VTF \u6587\u4ef6\u3002\\n\\n![img](./making-dynamic-spray-paint-for-left-4-dead-2.assets/import-to-game.png)\\n\\n## \u540e\u8bb0\\n\\n\u6574\u4e2a\u5236\u4f5c\u8fc7\u7a0b\u4e5f\u4e0d\u590d\u6742\uff0c\u6838\u5fc3\u5de5\u5177\u662f VTFEdit\uff1b\u81f3\u4e8e\u5206\u89e3 GIF \u7684\u5de5\u5177\u5c31\u5f88\u591a\u4e86\uff0c\u53ef\u4ee5\u5f88\u7075\u6d3b\u5730\u9009\u62e9\u5176\u4ed6\u8f6f\u4ef6\u6765\u5b8c\u6210\u8fd9\u4e2a\u4efb\u52a1\u3002\\n\\n\u6700\u91cd\u8981\u7684\u662f\u63a7\u5236\u6587\u4ef6\u5927\u5c0f\uff0c\u4e0d\u80fd\u8d85\u8fc7\u9650\u5236\uff0c\u4e0d\u7136\u5728\u6e38\u620f\u4e2d\u65e0\u6cd5\u4f7f\u7528\u3002\u5982\u679c\u6587\u4ef6\u5927\u5c0f\u592a\u5927\u7684\u8bdd\u53ef\u4ee5\u8003\u8651\u5728\u5206\u89e3\u51fa\u7684\u56fe\u7247\u4e2d\u5220\u9664\u4e00\u4e9b\u56fe\u7247\uff0c\u6765\u8fbe\u5230\u51cf\u5c0f\u6587\u4ef6\u5927\u5c0f\u7684\u76ee\u7684\u3002\u6bd4\u5982\u53ef\u4ee5\u9694\u5e27\u5220\u9664\uff0c\u6bcf\u9694\u4e00\u5f20\u56fe\u7247\u5c31\u5220\u9664\u4e00\u5f20\u56fe\u7247\uff0c\u5e94\u8be5\u4f1a\u5f88\u6709\u6548\u3002\\n\\n[^1]: [GifSplitter - Break GIF animation down into individual image frames](https://www.xoyosoft.com/gs/)\\n[^2]: [VTFEdit - Valve Developer Community](https://developer.valvesoftware.com/wiki/VTFEdit)"},{"id":"/get-super-admin-password-of-f412","metadata":{"permalink":"/blog/get-super-admin-password-of-f412","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/get-super-admin-password-of-f412.md","source":"@site/blog/get-super-admin-password-of-f412.md","title":"\u83b7\u53d6\u5929\u7ffc\u5149\u732b F412 \u8d85\u7ea7\u7ba1\u7406\u5458\u5e10\u53f7\u5bc6\u7801","description":"\u5f00\u542f telnet \u670d\u52a1","date":"2017-06-17T00:00:00.000Z","formattedDate":"2017\u5e746\u670817\u65e5","tags":[],"truncated":true,"authors":[],"frontMatter":{"date":"2017-06-17T00:00:00.000Z"},"prevItem":{"title":"\u4e3a\u300a\u6c42\u751f\u4e4b\u8def 2\u300b\u5236\u4f5c\u52a8\u6001\u55b7\u6f06","permalink":"/blog/making-dynamic-spray-paint-for-left-4-dead-2"},"nextItem":{"title":"\u91cd\u7f6e MySQL root \u5bc6\u7801","permalink":"/blog/reset-mysql-root-password"}},"content":"## \u5f00\u542f telnet \u670d\u52a1\\n\\n\u63a7\u5236\u9762\u677f -> \u6240\u6709\u63a7\u5236\u9762\u677f\u9879 -> \u7a0b\u5e8f\u548c\u529f\u80fd -> \u542f\u7528\u6216\u5173\u95ed Windows \u529f\u80fd\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u83b7\u53d6\u5e10\u53f7\u5bc6\u7801\\n\\n1. \u6253\u5f00 cmd\uff0c\u8f93\u5165\u547d\u4ee4\uff1a`telnet 192.168.1.1`\\n2. \u767b\u5f55\u5e10\u53f7\uff1a`root`\\n3. \u767b\u5f55\u5bc6\u7801\uff1a`Zte521`\\n4. \u8f93\u5165\u547d\u4ee4\uff1a`sendcmd 1 DB p UserInfo`"},{"id":"/reset-mysql-root-password","metadata":{"permalink":"/blog/reset-mysql-root-password","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/reset-mysql-root-password.md","source":"@site/blog/reset-mysql-root-password.md","title":"\u91cd\u7f6e MySQL root \u5bc6\u7801","description":"\u524d\u8a00","date":"2017-01-14T00:00:00.000Z","formattedDate":"2017\u5e741\u670814\u65e5","tags":[{"label":"mysql","permalink":"/blog/tags/mysql"}],"truncated":true,"authors":[],"frontMatter":{"date":"2017-01-14T00:00:00.000Z","tags":["mysql"]},"prevItem":{"title":"\u83b7\u53d6\u5929\u7ffc\u5149\u732b F412 \u8d85\u7ea7\u7ba1\u7406\u5458\u5e10\u53f7\u5bc6\u7801","permalink":"/blog/get-super-admin-password-of-f412"},"nextItem":{"title":"CentOS \u7f51\u7edc\u914d\u7f6e","permalink":"/blog/configuring-centos-network"}},"content":"## \u524d\u8a00\\n\\n\u6ce8\u610f\uff1a\u5982\u679c\u4f60\u7684\u6570\u636e\u5e93\u4e2d\u5b58\u6709\u91cd\u8981\u6570\u636e\uff0c\u8bf7\u5728\u4fdd\u8bc1\u673a\u5668\u79bb\u7ebf\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u4ee5\u4e0b\u7684\u64cd\u4f5c\uff0c\u6700\u7a33\u59a5\u7684\u529e\u6cd5\u5c31\u662f\u62d4\u6389\u7f51\u7ebf\uff01\\n\\n\x3c!-- more --\x3e\\n\\n## \u65b9\u6cd5\u4e00\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\\n\\n### \u5f00\u542f\u5b89\u5168\u6a21\u5f0f\\n\\n\u4fee\u6539 MySQL \u7684\u914d\u7f6e\u6587\u4ef6\u3002\\n\\n```bash\\nvi /etc/my.cnf\\n```\\n\\n\u5728`[mysqld]`\u6bb5\u91cc\u52a0\u4e0a\u4e00\u884c`skip-grant-tables`\uff0c\u4fdd\u5b58\u5e76\u9000\u51fa\u3002\\n\\n### \u91cd\u65b0\u542f\u52a8 MySQL\\n\\n```bash\\nservice mysqld restart\\n```\\n\\n### \u4fee\u6539\u5bc6\u7801\\n\\n```bash\\nmysql -uroot\\nuse mysql;\\nupdate user set Password=password(\'newpass\') where User=\'root\';\\nflush privileges;\\nexit;\\n```\\n\\n### \u5173\u95ed\u5b89\u5168\u6a21\u5f0f\\n\\n\u5c06\u7b2c\u4e00\u6b65\u5728 MySQL \u914d\u7f6e\u6587\u4ef6\u91cc\u52a0\u5165\u7684`skip-grant-tables`\u5220\u6389\u3002\\n\\n### \u5b8c\u6210\\n\\n\u91cd\u542f MySQL \u4e4b\u540e\u5c31\u53ef\u4ee5\u7528\u65b0\u5bc6\u7801\u767b\u5f55\u4e86\u3002\\n\\n```bash\\nservice mysqld restart\\n```\\n\\n## \u65b9\u6cd5\u4e8c\uff1a\u901a\u8fc7\u547d\u4ee4\u884c\u4f20\u9012\u53c2\u6570\\n\\n### \u505c\u6b62 MySQL\\n\\n```bash\\nservice mysqld stop\\n```\\n\\n### \u4ee5\u4e0d\u68c0\u67e5\u6743\u9650\u7684\u65b9\u5f0f\u542f\u52a8 MySQL\\n\\n```bash\\nmysqld --skip-grant-tables &\\n```\\n\\n### \u4fee\u6539\u5bc6\u7801\\n\\n```bash\\nmysql -uroot\\n```\\n\\n```sql\\nuse mysql;\\nupdate user set Password=password(\'newpass\') where User=\'root\';\\nflush privileges;\\nexit;\\n```\\n\\n### \u5b8c\u6210\\n\\n\u7528\u6b63\u5e38\u7684\u65b9\u5f0f\u91cd\u542f MySQL \u4e4b\u540e\u5c31\u53ef\u4ee5\u7528\u65b0\u5bc6\u7801\u767b\u5f55\u4e86\u3002\\n\\n```bash\\nservice mysqld restart\\n```"},{"id":"/configuring-centos-network","metadata":{"permalink":"/blog/configuring-centos-network","editUrl":"https://github.com/bobo2334/bobo2334.github.io/edit/master/blog/configuring-centos-network.md","source":"@site/blog/configuring-centos-network.md","title":"CentOS \u7f51\u7edc\u914d\u7f6e","description":"\u524d\u8a00","date":"2016-12-21T00:00:00.000Z","formattedDate":"2016\u5e7412\u670821\u65e5","tags":[{"label":"linux","permalink":"/blog/tags/linux"}],"truncated":true,"authors":[],"frontMatter":{"date":"2016-12-21T00:00:00.000Z","tags":["linux"]},"prevItem":{"title":"\u91cd\u7f6e MySQL root \u5bc6\u7801","permalink":"/blog/reset-mysql-root-password"}},"content":"## \u524d\u8a00\\n\\n\u6bcf\u6b21\u88c5 CentOS \u540e\u65e0\u6cd5\u4e0a\u7f51\u90fd\u8981\u53bb\u641c\u6559\u7a0b\uff0c\u73b0\u5728\u8bb0\u4e0b\u6765\u4ee5\u540e\u5c31\u4e0d\u7528\u5230\u5904\u53bb\u641c\u4e86\uff08\u6ed1\u7a3d\uff09\u3002\\n\\n\x3c!-- more --\x3e\\n\\n## \u542f\u7528\u7f51\u5361\\n\\n```bash\\nifconfig eth0 up\\n```\\n\\n\u987a\u4fbf\u4e00\u63d0\uff0c\u5173\u95ed\u7f51\u5361\u7684\u547d\u4ee4\u662f`ifconfig eth0 down`\u3002\\n\\n## \u7f16\u8f91\u7f51\u7edc\u914d\u7f6e\u6587\u4ef6\\n\\n```bash\\nvi /etc/sysconfig/network-scripts/ifcfg-eth0\\n```\\n\\n\u6309<kbd>i</kbd>\u8fdb\u5165\u7f16\u8f91\u6a21\u5f0f\uff0c\u6309<kbd>ESC</kbd>\u8fdb\u5165\u547d\u4ee4\u6a21\u5f0f\u3002\u547d\u4ee4\u6a21\u5f0f\u4e2d\u8f93\u5165`:w`\u4fdd\u5b58\uff0c`:q`\u9000\u51fa\uff0c`:wq`\u5373\u4e3a\u9000\u51fa\u5e76\u4fdd\u5b58\u3002\\n\\n\u6253\u5f00\u5e94\u8be5\u662f\u4e0b\u9762\u8fd9\u4e2a\u6837\u5b50\u3002\\n\\n```ini\\nDEVICE=eth0\\nHWADDR=08:00:27:A6:5D:89\\nTYPE=Ethernet\\nUUID=db391271-1cdf-4df2-b040-12f259d5e361\\nONBOOT=no\\nNM_CONTROLLED=yes\\nBOOTPROTO=dhcp\\n```\\n\\n- `ONBOOT`\u4e3a\u662f\u5426\u5f00\u673a\u542f\u52a8\uff0c\u503c\u53ef\u4e3a `yse`/`no`\uff1b\\n- `BOOTPROTO`\u4e3a\u83b7\u53d6 IP \u5730\u5740\u7684\u65b9\u5f0f\uff0c\u503c\u53ef\u4e3a `dhcp`/`static`/`bootp`\uff1b\\n\\n`ONBOOT`\u4fee\u6539\u4e3a`yes`\uff0c`BOOTPROTO`\u6309\u9700\u4fee\u6539\uff0c\u5176\u4ed6\u7684\u4e0d\u9700\u8981\u4fee\u6539\uff0c\u4e0b\u9762\u662f\u793a\u4f8b\u3002\\n\\n## \u4e24\u79cd\u83b7\u53d6 IP \u7684\u65b9\u5f0f\\n\\n### \u52a8\u6001\u83b7\u53d6 IP\uff08dhcp\uff09\\n\\n```ini\\nDEVICE=eth0\\nHWADDR=08:00:27:A6:5D:89\\nTYPE=Ethernet\\nUUID=db391271-1cdf-4df2-b040-12f259d5e361\\nONBOOT=yes #\u5f00\u673a\u542f\u52a8\\nNM_CONTROLLED=yes\\nBOOTPROTO=dhcp #\u52a8\u6001\\n```\\n\\n### \u9759\u6001\u83b7\u53d6 IP\uff08static\uff09\\n\\n```ini\\nDEVICE=eth0\\nHWADDR=08:00:27:A6:5D:89\\nTYPE=Ethernet\\nUUID=db391271-1cdf-4df2-b040-12f259d5e361\\nONBOOT=yes #\u5f00\u673a\u542f\u52a8\\nNM_CONTROLLED=yes\\nBOOTPROTO=static #\u9759\u6001\\nIPADDR=192.168.233.234 #IP \u5730\u5740\\nNETMASK=255.255.255.0 #\u5b50\u7f51\u63a9\u7801\\nGATEWAY=192.168.233.1 #\u7f51\u5173\\n```\\n\\nstatic \u65b9\u5f0f\u8fd8\u8981\u624b\u52a8\u8bbe\u7f6e DNS\u3002\\n\\n```bash\\nvi /etc/resolv.conf\\n```\\n\\n## \u91cd\u542f\u7f51\u7edc\u670d\u52a1\\n\\n```bash\\nservice network restart\\n```"}]}')}}]);