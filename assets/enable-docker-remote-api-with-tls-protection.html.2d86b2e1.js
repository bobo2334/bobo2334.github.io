import{r as s,o as n,c as e,a,b as l,F as t,e as r}from"./app.009b5e4f.js";const c={},o=a("h1",{id:"开启-docker-remote-api-并启用-tls",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#开启-docker-remote-api-并启用-tls","aria-hidden":"true"},"#"),r(" 开启 Docker Remote API 并启用 TLS")],-1),i=a("h2",{id:"前言",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),r(" 前言")],-1),p=a("p",null,[r("Portainer"),a("sup",{class:"footnote-ref"},[a("a",{href:"#footnote1"},"[1]"),a("a",{class:"footnote-anchor",id:"footnote-ref1"})]),r(" 是一款 Docker 可视化管理面板，它不仅可以管理本地的 Docker 实例，还可以通过 Docker Remote API 访问管理远程 Docker 资源。Docker Remote API 就是通过 HTTP 协议暴露 Docker 资源，启用 TLS 可以实现远程访问鉴权。")],-1),b=a("p",null,[r("Docker 的官方文档提供了详细的开启 Docker Remote API 和开启 TLS 的教程"),a("sup",{class:"footnote-ref"},[a("a",{href:"#footnote2"},"[2]"),a("a",{class:"footnote-anchor",id:"footnote-ref2"})]),r("。但是在签发证书的过程中涉及到的命令比较多，且繁琐，我就从网络上寻找到了别人写好的签发证书的脚本"),a("sup",{class:"footnote-ref"},[a("a",{href:"#footnote3"},"[3]"),a("a",{class:"footnote-anchor",id:"footnote-ref3"})]),r("，可以很方便地替代纯手工操作。")],-1),k=a("p",null,"本文中的操作都在 CentOS 7 中完成。",-1),m=a("h2",{id:"签发证书",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#签发证书","aria-hidden":"true"},"#"),r(" 签发证书")],-1),u=a("p",null,[r("将脚本命名为 "),a("code",null,"auto-tls-certs.sh"),r(" 。其中需要配置的内容有：")],-1),d=a("ol",null,[a("li",null,[a("code",null,"CODE"),r(" ，作为文件名的后缀，用于区分文件；")]),a("li",null,[a("code",null,"IP"),r(" ，机器的公网 IP 地址；")]),a("li",null,[a("code",null,"PASSWORD"),r(" ，证书密码。")])],-1),f=a("p",null,"脚本内容如下：",-1),g=a("div",{class:"language-bash ext-sh line-numbers-mode"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token shebang important"},"#!/bin/bash"),r("\n"),a("span",{class:"token comment"},"#"),r("\n"),a("span",{class:"token comment"},"# -------------------------------------------------------------"),r("\n"),a("span",{class:"token comment"},"# 自动创建 Docker TLS 证书"),r("\n"),a("span",{class:"token comment"},"# -------------------------------------------------------------"),r("\n\n"),a("span",{class:"token comment"},"# 以下是配置信息"),r("\n"),a("span",{class:"token comment"},"# --[BEGIN]------------------------------"),r("\n\n"),a("span",{class:"token assign-left variable"},"CODE"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"tx"'),r("\n"),a("span",{class:"token assign-left variable"},"IP"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"1.1.1.1"'),r("\n"),a("span",{class:"token assign-left variable"},"PASSWORD"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"pass"'),r("\n\n"),a("span",{class:"token assign-left variable"},"COUNTRY"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"CN"'),r("\n"),a("span",{class:"token assign-left variable"},"STATE"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"BEIJING"'),r("\n"),a("span",{class:"token assign-left variable"},"CITY"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"BEIJING"'),r("\n"),a("span",{class:"token assign-left variable"},"ORGANIZATION"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"Org"'),r("\n"),a("span",{class:"token assign-left variable"},"ORGANIZATIONAL_UNIT"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"Dev"'),r("\n"),a("span",{class:"token assign-left variable"},"COMMON_NAME"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},[r('"'),a("span",{class:"token variable"},"$IP"),r('"')]),r("\n"),a("span",{class:"token assign-left variable"},"EMAIL"),a("span",{class:"token operator"},"="),a("span",{class:"token string"},'"."'),r("\n\n"),a("span",{class:"token comment"},"# --[END]--"),r("\n\n"),a("span",{class:"token comment"},"# Generate CA key"),r("\nopenssl genrsa -aes256 -passout "),a("span",{class:"token string"},[r('"pass:'),a("span",{class:"token variable"},"$PASSWORD"),r('"')]),r(" -out "),a("span",{class:"token string"},[r('"ca-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token number"},"4096"),r("\n"),a("span",{class:"token comment"},"# Generate CA"),r("\nopenssl req -new -x509 -days "),a("span",{class:"token number"},"365"),r(" -key "),a("span",{class:"token string"},[r('"ca-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -sha256 -out "),a("span",{class:"token string"},[r('"ca-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -passin "),a("span",{class:"token string"},[r('"pass:'),a("span",{class:"token variable"},"$PASSWORD"),r('"')]),r(" -subj "),a("span",{class:"token string"},[r('"/C='),a("span",{class:"token variable"},"$COUNTRY"),r("/ST="),a("span",{class:"token variable"},"$STATE"),r("/L="),a("span",{class:"token variable"},"$CITY"),r("/O="),a("span",{class:"token variable"},"$ORGANIZATION"),r("/OU="),a("span",{class:"token variable"},"$ORGANIZATIONAL_UNIT"),r("/CN="),a("span",{class:"token variable"},"$COMMON_NAME"),r("/emailAddress="),a("span",{class:"token variable"},"$EMAIL"),r('"')]),r("\n"),a("span",{class:"token comment"},"# Generate Server key"),r("\nopenssl genrsa -out "),a("span",{class:"token string"},[r('"server-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token number"},"4096"),r("\n\n"),a("span",{class:"token comment"},"# Generate Server Certs."),r("\nopenssl req -subj "),a("span",{class:"token string"},[r('"/CN='),a("span",{class:"token variable"},"$COMMON_NAME"),r('"')]),r(" -sha256 -new -key "),a("span",{class:"token string"},[r('"server-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -out server.csr\n\n"),a("span",{class:"token builtin class-name"},"echo"),r(),a("span",{class:"token string"},[r('"subjectAltName = IP:'),a("span",{class:"token variable"},"$IP"),r(',IP:127.0.0.1"')]),r(),a("span",{class:"token operator"},">>"),r(" extfile.cnf\n"),a("span",{class:"token builtin class-name"},"echo"),r(),a("span",{class:"token string"},'"extendedKeyUsage = serverAuth"'),r(),a("span",{class:"token operator"},">>"),r(" extfile.cnf\n\nopenssl x509 -req -days "),a("span",{class:"token number"},"365"),r(" -sha256 -in server.csr -passin "),a("span",{class:"token string"},[r('"pass:'),a("span",{class:"token variable"},"$PASSWORD"),r('"')]),r(" -CA "),a("span",{class:"token string"},[r('"ca-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -CAkey "),a("span",{class:"token string"},[r('"ca-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -CAcreateserial -out "),a("span",{class:"token string"},[r('"server-cert-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -extfile extfile.cnf\n\n\n"),a("span",{class:"token comment"},"# Generate Client Certs."),r("\n"),a("span",{class:"token function"},"rm"),r(" -f extfile.cnf\n\nopenssl genrsa -out "),a("span",{class:"token string"},[r('"key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token number"},"4096"),r("\nopenssl req -subj "),a("span",{class:"token string"},"'/CN=client'"),r(" -new -key "),a("span",{class:"token string"},[r('"key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -out client.csr\n"),a("span",{class:"token builtin class-name"},"echo"),r(" extendedKeyUsage "),a("span",{class:"token operator"},"="),r(" clientAuth "),a("span",{class:"token operator"},">>"),r(" extfile.cnf\nopenssl x509 -req -days "),a("span",{class:"token number"},"365"),r(" -sha256 -in client.csr -passin "),a("span",{class:"token string"},[r('"pass:'),a("span",{class:"token variable"},"$PASSWORD"),r('"')]),r(" -CA "),a("span",{class:"token string"},[r('"ca-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -CAkey "),a("span",{class:"token string"},[r('"ca-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -CAcreateserial -out "),a("span",{class:"token string"},[r('"cert-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" -extfile extfile.cnf\n\n"),a("span",{class:"token function"},"rm"),r(" -vf client.csr server.csr\n\n"),a("span",{class:"token function"},"chmod"),r(" -v 0400 "),a("span",{class:"token string"},[r('"ca-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"server-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r("\n"),a("span",{class:"token function"},"chmod"),r(" -v 0444 "),a("span",{class:"token string"},[r('"ca-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"server-cert-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"cert-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r("\n\n"),a("span",{class:"token comment"},"# 打包客户端证书"),r("\n"),a("span",{class:"token function"},"mkdir"),r(" -p "),a("span",{class:"token string"},[r('"tls-client-certs-'),a("span",{class:"token variable"},"$CODE"),r('"')]),r("\n"),a("span",{class:"token function"},"cp"),r(" -f "),a("span",{class:"token string"},[r('"ca-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"cert-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"tls-client-certs-'),a("span",{class:"token variable"},"$CODE"),r('/"')]),r("\n"),a("span",{class:"token builtin class-name"},"cd"),r(),a("span",{class:"token string"},[r('"tls-client-certs-'),a("span",{class:"token variable"},"$CODE"),r('"')]),r("\n"),a("span",{class:"token function"},"tar"),r(" zcf "),a("span",{class:"token string"},[r('"tls-client-certs-'),a("span",{class:"token variable"},"$CODE"),r('.tar.gz"')]),r(" *\n"),a("span",{class:"token function"},"mv"),r(),a("span",{class:"token string"},[r('"tls-client-certs-'),a("span",{class:"token variable"},"$CODE"),r('.tar.gz"')]),r(),a("span",{class:"token punctuation"},".."),r("/\n"),a("span",{class:"token builtin class-name"},"cd"),r(),a("span",{class:"token punctuation"},".."),r("\n"),a("span",{class:"token function"},"rm"),r(" -rf "),a("span",{class:"token string"},[r('"tls-client-certs-'),a("span",{class:"token variable"},"$CODE"),r('"')]),r("\n\n"),a("span",{class:"token comment"},"# 拷贝服务端证书"),r("\n"),a("span",{class:"token function"},"mkdir"),r(" -p /etc/docker/certs.d\n"),a("span",{class:"token function"},"cp"),r(),a("span",{class:"token string"},[r('"ca-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"server-cert-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(),a("span",{class:"token string"},[r('"server-key-'),a("span",{class:"token variable"},"$CODE"),r('.pem"')]),r(" /etc/docker/certs.d/\n")])]),a("div",{class:"line-numbers"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br"),a("span",{class:"line-number"},"3"),a("br"),a("span",{class:"line-number"},"4"),a("br"),a("span",{class:"line-number"},"5"),a("br"),a("span",{class:"line-number"},"6"),a("br"),a("span",{class:"line-number"},"7"),a("br"),a("span",{class:"line-number"},"8"),a("br"),a("span",{class:"line-number"},"9"),a("br"),a("span",{class:"line-number"},"10"),a("br"),a("span",{class:"line-number"},"11"),a("br"),a("span",{class:"line-number"},"12"),a("br"),a("span",{class:"line-number"},"13"),a("br"),a("span",{class:"line-number"},"14"),a("br"),a("span",{class:"line-number"},"15"),a("br"),a("span",{class:"line-number"},"16"),a("br"),a("span",{class:"line-number"},"17"),a("br"),a("span",{class:"line-number"},"18"),a("br"),a("span",{class:"line-number"},"19"),a("br"),a("span",{class:"line-number"},"20"),a("br"),a("span",{class:"line-number"},"21"),a("br"),a("span",{class:"line-number"},"22"),a("br"),a("span",{class:"line-number"},"23"),a("br"),a("span",{class:"line-number"},"24"),a("br"),a("span",{class:"line-number"},"25"),a("br"),a("span",{class:"line-number"},"26"),a("br"),a("span",{class:"line-number"},"27"),a("br"),a("span",{class:"line-number"},"28"),a("br"),a("span",{class:"line-number"},"29"),a("br"),a("span",{class:"line-number"},"30"),a("br"),a("span",{class:"line-number"},"31"),a("br"),a("span",{class:"line-number"},"32"),a("br"),a("span",{class:"line-number"},"33"),a("br"),a("span",{class:"line-number"},"34"),a("br"),a("span",{class:"line-number"},"35"),a("br"),a("span",{class:"line-number"},"36"),a("br"),a("span",{class:"line-number"},"37"),a("br"),a("span",{class:"line-number"},"38"),a("br"),a("span",{class:"line-number"},"39"),a("br"),a("span",{class:"line-number"},"40"),a("br"),a("span",{class:"line-number"},"41"),a("br"),a("span",{class:"line-number"},"42"),a("br"),a("span",{class:"line-number"},"43"),a("br"),a("span",{class:"line-number"},"44"),a("br"),a("span",{class:"line-number"},"45"),a("br"),a("span",{class:"line-number"},"46"),a("br"),a("span",{class:"line-number"},"47"),a("br"),a("span",{class:"line-number"},"48"),a("br"),a("span",{class:"line-number"},"49"),a("br"),a("span",{class:"line-number"},"50"),a("br"),a("span",{class:"line-number"},"51"),a("br"),a("span",{class:"line-number"},"52"),a("br"),a("span",{class:"line-number"},"53"),a("br"),a("span",{class:"line-number"},"54"),a("br"),a("span",{class:"line-number"},"55"),a("br"),a("span",{class:"line-number"},"56"),a("br"),a("span",{class:"line-number"},"57"),a("br"),a("span",{class:"line-number"},"58"),a("br"),a("span",{class:"line-number"},"59"),a("br"),a("span",{class:"line-number"},"60"),a("br"),a("span",{class:"line-number"},"61"),a("br"),a("span",{class:"line-number"},"62"),a("br"),a("span",{class:"line-number"},"63"),a("br"),a("span",{class:"line-number"},"64"),a("br")])],-1),h=a("p",null,[r("使用 "),a("code",null,"sh auto-tls-certs.sh"),r(" 命令来生成证书，并且生成好的证书会被自动打包为 "),a("code",null,".tar.gz"),r(" 归档，非常方便。下面的图片展示了执行脚本后生成的文件列表。")],-1),C=a("p",null,[a("img",{src:"/assets/image-20210816222131111-16291236956091.a0e8b195.png",alt:"image-20210816222131111-16291236956091"})],-1),E=a("h2",{id:"配置-docker",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#配置-docker","aria-hidden":"true"},"#"),r(" 配置 Docker")],-1),v=a("p",null,[r("只需关注 "),a("code",null,".pem"),r(" 文件，把证书找个专门的位置存放。")],-1),I=a("div",{class:"language-bash ext-sh line-numbers-mode"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token function"},"mkdir"),r(" /etc/.docker\n"),a("span",{class:"token function"},"cp"),r(" ~/docker-cert/*.pem /etc/.docker/\n")])]),a("div",{class:"line-numbers"},[a("span",{class:"line-number"},"1"),a("br"),a("span",{class:"line-number"},"2"),a("br")])],-1),A=a("p",null,"修改 Docker 启动文件。",-1),D=a("div",{class:"language-bash ext-sh line-numbers-mode"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token function"},"nano"),r(" /lib/systemd/system/docker.service\n")])]),a("div",{class:"line-numbers"},[a("span",{class:"line-number"},"1"),a("br")])],-1),O=a("p",null,[r("修改 "),a("code",null,"Service"),r(" 下的 "),a("code",null,"ExecStart"),r(" 配置。")],-1),N=a("div",{class:"language-conf ext-conf line-numbers-mode"},[a("pre",{class:"language-conf"},[a("code",null,"ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -D -H tcp://0.0.0.0:2376 --tlsverify --tlscacert=/etc/.docker/ca-tx.pem --tlscert=/etc/.docker/server-cert-tx.pem --tlskey=/etc/.docker/server-key-tx.pem\n")]),a("div",{class:"line-numbers"},[a("span",{class:"line-number"},"1"),a("br")])],-1),x=a("p",null,[a("img",{src:"/assets/image-20210816222434122-16291238760702.e2f63f4b.png",alt:"image-20210816222434122-16291238760702"})],-1),y=a("p",null,"重启 Docker。",-1),S=a("div",{class:"language-bash ext-sh line-numbers-mode"},[a("pre",{class:"language-bash"},[a("code",null,"systemctl daemon-reloadservice docker restart\n")]),a("div",{class:"line-numbers"},[a("span",{class:"line-number"},"1"),a("br")])],-1),P=a("h2",{id:"开放端口",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#开放端口","aria-hidden":"true"},"#"),r(" 开放端口")],-1),R=a("p",null,"在防火墙、安全组中放行 2376 端口。",-1),G=a("h2",{id:"测试",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#测试","aria-hidden":"true"},"#"),r(" 测试")],-1),T=a("p",null,[r("把证书的压缩包 "),a("code",null,"tls-client-certs-tx.tar.gz"),r(" 下载到本机，解压得到证书文件。")],-1),M=a("p",null,[a("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ0AAABiCAYAAABKx4YzAAAOeUlEQVR4nO2d32sbZ7rHP9Nmly2F7sXmDzBGsmhIwDmHnAsJTOAUjJRdMHsgSvYmbsFSc3oh3YRg1kcXxuATciOxCUUKtEov2spXgh5LGHJxMMi9KSRsfVpkqcbNZpcmSwrJbrslJ553L2Y0mpFGlib+IY/zfGCMNfPOzOPB+up5nhl9X+2LL75QCIIgDIimlBLREIbG5uZm17rR0dEhRCIMyrGNjY1hxyC8pIyNjQ07BOEFeGXYAQiC4C+O7bTx8ZOnPH76lL/9+CN/+/FHAF5/7TV++frr/OqNN/jVL984kCAFQTg8uGYaPz17RuPBA/74zTfcf/iQi7/5NbpSPN/e5snf/879hw/54zff0HjwgJ+ePTvomAVBGCJdovHTs2c0H/yZb797yLauA/B/jSbvXojzyivt4du6zrffPaT54M8ehWOVTCjD6q5DdzneVpF4KE5xa88OLghCB12i8adHj/ju++8d6779y18AePdCHE3THNu++/57/vTo0T6GKAjCYcIhGo+fPOXBo792DWqJBsDlixe6hOPBo7/y+MnTHqfYohgPkdm71KI3I9OU6iWmR3ZzkAOMd1fnepF9D/JvOwiqJLUIueYAQ5s5IpqGpiWpAtWkRrK63/EdTRyN0MdPn1olCcB//u6i606XL17g/U8+pfWIx7au8/jpU2mMCgdIlaQWowAQ1Eh3bA1nG9RSAZq5CMH0GpCgohRRMASkkGAuf9AxHw0cmcaTH35wbHz/k0977nj54gXH6859W2RCkyzeg9JMiFC8SGe7YasYJxQKmUu/XscqGWtsiHhn82KrSNxxjF7jV8mE4hSLmY5tq33j7R9Lr/WtT3lzezxO3OVcg12P7jhXi3HH+NVMiJAjpejxt20Vidvibe/SGa/btbD/reb1dP07zGWPUpxmLoKmxaCiUKpjaWQJh7PcTgUACKRqKNUgG7b2JncpzRoFYpqGZlsiA6UsgiPT+OEf/3BsVErx/iefWgKhK0X+0xJuD5F27ttivr7CaHySzffqzE8A9rfBVpGriyFu1UtM9A11lUxohvrsCnVH/XF/h/E3GV2pUx8B400wSWa0Fcc9Fjffo16fN944k1cpni25xOslln7nhNLMHW7V68zT3m6da6tIfKDrMeES5zS3NkPcLL7DxOgHzNRnWSlN9Nlni+IHcK1eZwRgNUNoJsNb9Xnr/M54u68Bt+rUW8eKTwKzAIxMl6hPt4ZmCN0cZaX3BR2YZi5CcOk8DVWjkYyQC9Yw9QGqSbSFEzRqKYxVTXKRIOk1c7tWMH9JUFF5I+uwdtUojwUQ+uMQjbOnx10H2Z8a/fd//Ze9O/vIKCEWmQnVmV2x9yKMf8gSAOPGtvt3KI3PsjJow2L1DiXuwWSIRdvq8c0tjHfEOLPvmP/EI2eJjvcqcD3E0vecEL8131sQvFwPl8swMX+LO6FJQowzuzJP/ys1wvT8tJEVLN4z18UdI3rGu2peA2vjCNPvxVm82TFuq0h8Bm7VpweIpz+BVA2VMn/Pz1HWNJIVxVRZI0YFVbNLQYBUTZGiSlIrM6XyRKmSywWJYgjQJW5TO7fMwnqW21KuDIRDNN5+++1dHezDDz/0uMcE8/U682YqHLrXekO01tvolVDsxPgsKyW3f1YvB/MYS89zDnIf2MP12Au2isQnF2F2hXp9xHzd/V2QF2eVzGSV6MogmeSLEOVKNkwwphmlSrTHsGqZAgUK2jrZRo1UqmN7IEWtti8BHkkcPQ1d17uWWq1mLW6v7YtntooUVwFGmC6tMDt+j81eb8iJt4jfW+QDq7pZpbjTAxld42E1s0fPh/SKZbfn9HI9XFjNGCXTyiwsXrX3LHo8u3J/k3vjs1wz05at/61yz2WYPT7rWF1/6xbFmyX7YIrxGbi127tZ7lSTRh8iaNYehViv/kSTXBkS4QQVNcdXl3I0q0k069ZJg1xE7qR4wSEaz58/dyyff/45Z86csZbnz59bv7uNd2eEs9Fx98biyDSjd1qNskkWQ7d26CNMML8yS32mNf4Oozv+N3aOD3HnrR1Kg0Hi7RuL13N2nMvT9XDuW8yEmKkbAjAyfY1ZFpnsajx2nG/iHWOcGevVzRDuBeog1+AqRNulzWrG1nTdw0ZoSywW1sOEs43uRqhSqErCGt/MXWLpxBQnAIiSr41xPQaVfCstCZKqVSA24K1bAa1er1tdzXjcWc/evXuX06dPc/fuXQBOnz7tWN9JqVTqWie8RLQanq7lWTdjY2Mv/NV4qx+RcmleVpNENq5QSwWoJpOQv8JG5DpjtStsRIJ8NafIRzuO0dVEFXqxY6bRWnfq1Cnr97t373Lq1Kmusb0zDeFoskUx3nF7e6bEePTsnjQ8B2EtHXSUJNYSK1hjonn7XRKjMZp3631E8ygRjIFwNEI73/hvvvkmX3/9ddf2L7/80touvKyMMH1tlHgoxIy5Znx2hdJ+NDB60HqAq4tqkshONjHVpCUsiYrIhFcc5cm5c+d2dbDl5eVdByS8POymPBGGhyPTkDe9IAj9EOcuQRA8cUx8GgVB8IJkGoIgeEJEQxAET4hoCILgCRENQRA8IaIhCIIndpz3RBAOGx9//DG6UihdRymFriuU0q11ulK89otfEI1GOX78+LDDPZKIaAi+QleK311se9cq64fB0lKJ8fFx/md5mV+fOyfCsQ9IeSL4CmX6tmzrOtvbOtvb22xvb/PcXACOHz/Ov505w2effTbMUI8skmkIvsLyp1Wg6PSqNV5/9NFHABz7+c8PMLKXBxENwVfouiEMlmAoR3XCb3/7Hyjg2KuvcuNmp2GpsBdIeSL4CqX0tkh0CEbna129gAXlwDRfWptAEQ3BV+jKVIZOwXAUK2Y2ondPtSHsHhENwVe0GqGdgmFPP6y2h8v8PAZVkm4mxNbUjcbSO4uoktSM+VQKMQ0tkqOai1hTPoLpZdp1gFZ24jy/c1iP2FpTUFbbMSaN+SUPfLInEQ3BV+iWELTSDUMk7CWLNdbVId+YznHdZkpsuH81yV2H2zZz4kKsLQJOouTNWdsSFYWqpYimalQSBRZyTagmia1nabj6CkIhVmbK9TxVktoCJxotk+QG55eCNlFZI71gxlhJGIJVnrJmliN9vUe8e4uIhuArjJJDtfTCWZIoZ4nimmlUyxRs0za2CZDKpyAX6fIZdX7693Ytj+YrnEwH0WLrZG/39htNVGy+pdErZMMFylUzNtZIB1vnMrKZ9Y3WCcPt40anSBAme8U8UmCMk6yzcQDJhoiG4Ct0sxHa1c9wZBuGeHhqhJqlySVut+eEtTZGyVtTJNimgdwPwlkaHVMyuPqgDhERDcFXtJ/TaJUm7R5Ga7tVwLg1QqNTJNbSXLfy+Cq5XBMaX7Fmy0Cay0usde+9I9WkUfY0spC+lKMJphg5s5NCuV1ENHOXSK8lmIq6xQbVZK8SaXiIaAi+QteV1ffszjaca3TXRmiUfCPLujUjW5mxVMAoE0gTNMuQS1+dtGUabgQ4dz5sNUJzSY3YuiE6gdRt41g9OqkJylbzMpg+aZuMujM2jfKUc6Lqw4CmereYBWHf8epG/ocbN7j87mX+vzXdhup+LhTgZz87xn9fu8Z//f73exTpXmDMYt+arMmvyBOhgq/QlUKhOHbs1f5j5TmNfUFEQ/AVSlf84cYNlK7Mr8abX5FXOkpXhqgo3fzKvIjGfiDliTBUZLIk/yGNUEEQPCGiIQiCJ0Q0BEHwhIiGIAiekLsngq8QY+HhI6Ih+AoxFh4+Up4IvkKMhYePZBqCrxBj4eEjoiH4CjEWHj5Sngi+wl/GwkfTfFhEQ/AVYiw8fEQ0BF+xr8bCPdd3GAJHIkQ6jIW7XfaOrvmwiIbgK/bPWLifqa/NELhWo9ZhLNxtyHd0zYelESr4CoexsHNLx7qdjYUbnb6bpqkvQY20bXV4o0nLOsthCNx9YJJaDMOOOEy24e4lGs1XKGtBNMJkG3kP5sNBytU8UfrF2Wk+vM4Jh/nwEhtNiO7CdlREQ/AVOxkLt1++gLEwGKa+rlnDICm9YT6c93bGF6NnnI2DOLuUJ4K/2Ddj4QMy9T0K5sMiGoKv2DdjYc+mvk5jYfdc5GiaD4tzlzBUXi5j4UE4/ObD0tMQfIUYCw8fEQ3BV4ix8PCR8kQYKmIs7D+kESoIgidENARB8ISIhiAInhDREATBE3L3RPAVYiw8fEQ0BF8hxsLDR8oTwVeIsfDwkUxD8BW7NxY+/I9pH3ZENARfIcbCw0fKE8FXHB5j4Z04mobCLUQ0BF8hxsLDR0RD8BV7Yyxso2ma8FppgZtpr5E5OEx5q8mXzlC4hYiG4Ct2byxso5pECy5xvqFQ+Si9TXsDpOYSrC0tWyJRLRdIzL1chsItRDQEX+EwFu4wEnYa8vT5anw5iRaDirIZAJvmwulg69PcyBjWN1p2gEssNwGqlAum/Z7j099p2Wcnmq9wMh1Ei623jX9d6DYULlCu9okN6DYUDpN1GAqvs7FHyYaIhuArdjIWbmcb/Y2FC+vrhN3eSOEsDct71D7FQZQrWVhabtLMLVBITLXt96yx7g7ke0bP2A4WEQ3BV+zaWNgkMVej1jjPUtDWN+hj2hs4dx6WrnN9ifan+IAcBUPhFvKchuAr7MbCTjqmMaCXsbCNQIqaGjPKCxJUVJ58I0skqKGZQxIV27QEgRRzJw1z4MaOH/CGoXA6plEIZ8meTJNez9LIBwhwm+xSkGByDHWle0/DUDhmveo0FO4Z2wEizl3CUPGbsXA1qbFworEPZYF/nlSVTEPwFUM1Fm7mWCgkmFMH30c4TIhoCL5iWMbC1aRGrGCUBIc8Edh3pDwRhooYC/sPuXsiCIInRDQEQfCEiIYgCJ4Q0RAEwRMiGoIgeEJEQxAET4hoCILgCRENQRA8IaIhCIInRDQEQfCEiIYgCJ74JzycZ0I/vCTsAAAAAElFTkSuQmCC",alt:"image-20210816222527037"})],-1),j=a("p",null,[r("用 "),a("code",null,"curl"),r(" 命令测试，如果有 JSON 格式的信息输出则配置成功。")],-1),L=a("div",{class:"language-bash ext-sh line-numbers-mode"},[a("pre",{class:"language-bash"},[a("code",null,[a("span",{class:"token function"},"curl"),r(" https://你的IP/info --cert cert-tx.pem --key key-tx.pem --cacert ca-tx.pem\n")])]),a("div",{class:"line-numbers"},[a("span",{class:"line-number"},"1"),a("br")])],-1),Q=a("p",null,[a("img",{src:"/assets/image-20210816222600935-16291239626163.691c82a7.png",alt:"image-20210816222600935-16291239626163"})],-1),V=a("h2",{id:"用-portainer-连接",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#用-portainer-连接","aria-hidden":"true"},"#"),r(" 用 Portainer 连接")],-1),U=a("p",null,"Portainer 是一款非常好用的 Docker 可视化管理工具，通过暴露 Docker Remote API 可以远程连接并管理 Docker 资源。",-1),W=a("p",null,[r("在 "),a("code",null,"Endpoints"),r(" 页面中点击 "),a("code",null,"Add endpoint"),r(" ， "),a("code",null,"Environment type"),r(" 选择 "),a("code",null,"Docker"),r(" 。")],-1),q=a("p",null,"在对应的输入框中填写 IP 地址和端口号，开启 TLS，选择三个对应的证书文件。",-1),z=a("p",null,[a("img",{src:"/assets/image-20210816222733033-16291240547284.03df6b5c.png",alt:"image-20210816222733033-16291240547284"})],-1),Y=a("hr",{class:"footnotes-sep"},null,-1),w={class:"footnotes"},H={class:"footnotes-list"},B={id:"footnote1",class:"footnote-item"},F={href:"https://documentation.portainer.io/",target:"_blank",rel:"noopener noreferrer"},X=r("Documentation"),J=r(),K=a("a",{href:"#footnote-ref1",class:"footnote-backref"},"↩︎",-1),Z={id:"footnote2",class:"footnote-item"},$={href:"https://docs.docker.com/engine/security/protect-access/",target:"_blank",rel:"noopener noreferrer"},_=r("Protect the Docker daemon socket | Docker Documentation"),ss=r(),ns=a("a",{href:"#footnote-ref2",class:"footnote-backref"},"↩︎",-1),es={id:"footnote3",class:"footnote-item"},as={href:"https://www.gaoyaxuan.net/blog/324.html",target:"_blank",rel:"noopener noreferrer"},ls=r("Docker 开启 TLS 访问，更加安全 - 实用教程 - 高亚轩的 BLOG"),ts=r(),rs=a("a",{href:"#footnote-ref3",class:"footnote-backref"},"↩︎",-1);c.render=function(r,c){const cs=s("OutboundLink");return n(),e(t,null,[o,i,p,b,k,m,u,d,f,g,h,C,E,v,I,A,D,O,N,x,y,S,P,R,G,T,M,j,L,Q,V,U,W,q,z,Y,a("section",w,[a("ol",H,[a("li",B,[a("p",null,[a("a",F,[X,l(cs)]),J,K])]),a("li",Z,[a("p",null,[a("a",$,[_,l(cs)]),ss,ns])]),a("li",es,[a("p",null,[a("a",as,[ls,l(cs)]),ts,rs])])])])],64)};export{c as default};
