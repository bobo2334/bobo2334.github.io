import{r as e,o as n,c as a,a as s,b as t,F as l,e as o}from"./app.af09c0fa.js";const r={},i=s("h1",{id:"ssh-密钥登录",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#ssh-密钥登录","aria-hidden":"true"},"#"),o(" SSH 密钥登录")],-1),c=s("h2",{id:"前言",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),o(" 前言")],-1),u=s("blockquote",null,[s("p",null,[o("SSH 默认采用密码登录，这种方法有很多缺点，简单的密码不安全，复杂的密码不容易记忆，每次手动输入也很麻烦。密钥登录是比密码登录更好的解决方案。"),s("sup",{class:"footnote-ref"},[s("a",{href:"#footnote1"},"[1]"),s("a",{class:"footnote-anchor",id:"footnote-ref1"})])])],-1),d=s("h2",{id:"生成秘钥",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#生成秘钥","aria-hidden":"true"},"#"),o(" 生成秘钥")],-1),h=s("p",null,[o("可以用 OpenSSH 中的 "),s("code",null,"ssh-keygen"),o(" 命令行工具来生成秘钥。 "),s("code",null,"-t"),o(" 参数指定了加密方式，通常为 "),s("code",null,"ras"),o(" 或 "),s("code",null,"dsa"),o(" 。")],-1),p=s("div",{class:"language-bash ext-sh line-numbers-mode"},[s("pre",{class:"language-bash"},[s("code",null,"ssh-keygen -t rsa\n")]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br")])],-1),f=s("p",null,[o("生成的密钥文件默认就会是 "),s("code",null,"~/.ssh/id_rsa"),o(" （私钥）和 "),s("code",null,"~/.ssh/id_rsa.pub"),o(" （公钥）。")],-1),b=s("p",null,[o("也可以用 PuTTY 中提供的 PuTTY Key Generator（puttygen.exe）"),s("sup",{class:"footnote-ref"},[s("a",{href:"#footnote2"},"[2]"),s("a",{class:"footnote-anchor",id:"footnote-ref2"})]),o("来用可视化用户界面来生成秘钥文件。")],-1),m=s("p",null,[s("img",{src:"/assets/image-20210816230720070.01f6a3a0.png",alt:"image-20210816230720070"})],-1),g=s("h2",{id:"把公钥放在服务器上",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#把公钥放在服务器上","aria-hidden":"true"},"#"),o(" 把公钥放在服务器上")],-1),k=s("p",null,[o("用户公钥保存在 "),s("code",null,"~/.ssh/authorized_keys"),o(" 文件中，如果该文件不存在，你可以手动创建一个。")],-1),x=s("p",null,"然后将公钥的文本内容放入其中，每行一个。",-1),y=s("h2",{id:"关闭密码登录",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#关闭密码登录","aria-hidden":"true"},"#"),o(" 关闭密码登录")],-1),_=s("p",null,[o("编辑 "),s("code",null,"/etc/ssh/sshd_config"),o(" 文件，找到对应的配置项并修改。")],-1),S=s("div",{class:"language-conf ext-conf line-numbers-mode"},[s("pre",{class:"language-conf"},[s("code",null,"# 不允许密码直接登录\nPasswordAuthentication no\n# 不允许空密码登录\nPermitEmptyPasswords\n# 不允许交互式密码登录\nChallengeResponseAuthentication no\n# 不允许root用户使用密码登录\nPermitRootLogin prohibit-password\n# 使用秘钥登录\nPubkeyAuthentication yes\n")]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br")])],-1),v=s("p",null,[o("重启 "),s("code",null,"sshd"),o(" ，让配置生效。")],-1),w=s("div",{class:"language-bash ext-sh line-numbers-mode"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"sudo"),o(" systemctl restart sshd\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br")])],-1),H=s("h2",{id:"测试配置是否生效",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#测试配置是否生效","aria-hidden":"true"},"#"),o(" 测试配置是否生效")],-1),P=s("p",null,[o("使用 "),s("code",null,"ssh"),o(" 命令连接远程服务器，使用 "),s("code",null,"-i"),o(" 参数传递私钥文件。")],-1),T=s("div",{class:"language-bash ext-sh line-numbers-mode"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"ssh"),o(" -i ."),s("span",{class:"token punctuation"},"\\"),o("centos7"),s("span",{class:"token punctuation"},"\\"),o(".vagrant"),s("span",{class:"token punctuation"},"\\"),o("machines"),s("span",{class:"token punctuation"},"\\"),o("default"),s("span",{class:"token punctuation"},"\\"),o("virtualbox"),s("span",{class:"token punctuation"},"\\"),o("private_key vagrant@192.168.33.12\n")])]),s("div",{class:"line-numbers"},[s("span",{class:"line-number"},"1"),s("br")])],-1),A=s("h2",{id:"参考资料",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#参考资料","aria-hidden":"true"},"#"),o(" 参考资料")],-1),C={href:"https://www.digitalocean.com/community/tutorials/how-to-configure-ssh-key-based-authentication-on-a-linux-server",target:"_blank",rel:"noopener noreferrer"},L=o("How To Configure SSH Key-Based Authentication on a Linux Server | DigitalOcean"),O={href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/sec-using_openssh_certificate_authentication",target:"_blank",rel:"noopener noreferrer"},R=o("14.3. Using OpenSSH Certificate Authentication Red Hat Enterprise Linux 6 | Red Hat Customer Portal"),Y=s("hr",{class:"footnotes-sep"},null,-1),D={class:"footnotes"},E={class:"footnotes-list"},K={id:"footnote1",class:"footnote-item"},j={href:"https://wangdoc.com/ssh/key.html",target:"_blank",rel:"noopener noreferrer"},q=o("SSH 密钥登录 - SSH 教程 - 网道"),z=o(),B=s("a",{href:"#footnote-ref1",class:"footnote-backref"},"↩︎",-1),F={id:"footnote2",class:"footnote-item"},G={href:"https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html",target:"_blank",rel:"noopener noreferrer"},U=o("Download PuTTY: latest release (0.76)"),I=o(),J=s("a",{href:"#footnote-ref2",class:"footnote-backref"},"↩︎",-1);r.render=function(o,r){const M=e("OutboundLink");return n(),a(l,null,[i,c,u,d,h,p,f,b,m,g,k,x,y,_,S,v,w,H,P,T,A,s("ul",null,[s("li",null,[s("a",C,[L,t(M)])]),s("li",null,[s("a",O,[R,t(M)])])]),Y,s("section",D,[s("ol",E,[s("li",K,[s("p",null,[s("a",j,[q,t(M)]),z,B])]),s("li",F,[s("p",null,[s("a",G,[U,t(M)]),I,J])])])])],64)};export{r as default};
