<!doctype html>
<html class="docs-version-current" lang="zh-cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="我的学习笔记 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="我的学习笔记 Atom Feed">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><title data-react-helmet="true">MySQL | 我的学习笔记</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://iuok.me/docs/notes/database/mysql"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-cn"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="msapplication-TileColor" contnet="#da532c"><meta data-react-helmet="true" name="theme-color" contnet="#25c2a0"><meta data-react-helmet="true" property="og:title" content="MySQL | 我的学习笔记"><meta data-react-helmet="true" name="description" content="参考资料"><meta data-react-helmet="true" property="og:description" content="参考资料"><link data-react-helmet="true" rel="icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://iuok.me/docs/notes/database/mysql"><link data-react-helmet="true" rel="alternate" href="https://iuok.me/docs/notes/database/mysql" hreflang="zh-cn"><link data-react-helmet="true" rel="alternate" href="https://iuok.me/docs/notes/database/mysql" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a4b7a038.css">
<link rel="preload" href="/assets/js/runtime~main.9c317ce6.js" as="script">
<link rel="preload" href="/assets/js/main.15263d31.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/android-chrome-512x512.png" alt="Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/android-chrome-512x512.png" alt="Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">我的学习笔记</b></a><a class="navbar__item navbar__link" href="/docs/bookmarks/interesting-projects">笔记</a><a class="navbar__item navbar__link" href="/blog/">文章</a><a class="navbar__item navbar__link" href="/blog/archive">文章归档</a><a class="navbar__item navbar__link" href="/blog/tags">文章标签</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bobo2334/bobo2334.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/bookmarks/interesting-projects">书签</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/drafts/backing-up-tools">草稿</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/notes/c/">学习笔记</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" tabindex="0" href="/docs/notes/c/">c</a><button aria-label="Toggle the collapsible sidebar category &#x27;c&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/docs/notes/database/mysql">database</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/notes/database/mysql">MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes/database/redis">Redis</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_VCh3" tabindex="0" href="/docs/notes/java/">java</a><button aria-label="Toggle the collapsible sidebar category &#x27;java&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/notes/javascript/typescript">javascript</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/notes/message-queuing/rocketmq">message-queuing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" tabindex="0" href="/docs/notes/utility/editorconfig">utility</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>MySQL</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="参考资料">参考资料<a class="hash-link" href="#参考资料" title="Direct link to heading">​</a></h2><ul><li><a href="https://www.bilibili.com/video/BV1iq4y1u7vj" target="_blank" rel="noopener noreferrer">【宋红康】MySQL 数据库（mysql 安装/基础/高级/优化）_哔哩哔哩_bilibili</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="数据库的作用">数据库的作用<a class="hash-link" href="#数据库的作用" title="Direct link to heading">​</a></h2><ol><li>实现数据持久化</li><li>使用完整的管理系统统一管理</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="名词解释">名词解释<a class="hash-link" href="#名词解释" title="Direct link to heading">​</a></h2><ul><li>DB（Database），数据库，它保存了一系列有组织的数据</li><li>DBMS（Database Management System），数据库管理系统，简称数据库软件，可以对数据库进行操作</li><li>DBA（Database Administrator），数据库管理员</li><li>SQL（Structure Query Language），结构化查询语言</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="关系型数据库">关系型数据库<a class="hash-link" href="#关系型数据库" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="概念">概念<a class="hash-link" href="#概念" title="Direct link to heading">​</a></h3><ul><li><p>关系型数据库的典型数据结构就是<code>数据表</code>，这些数据表的组成都是结构化的（Structured）。</p></li><li><p>将数据放到表中，表再放到库中。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="关系">关系<a class="hash-link" href="#关系" title="Direct link to heading">​</a></h3><ul><li>一对一</li><li>一对多</li><li>多对多</li><li>自我引用</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="命令行">命令行<a class="hash-link" href="#命令行" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mysql -h localhost -P </span><span class="token number" style="color:#36acaa">3306</span><span class="token plain"> -u root -proot</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li><code>-P</code>指定端口</li><li><code>-p</code>指定密码，密码可以不写在命令中，只指定参数而不写密码的话会在交互式命令行中输入密码，不会在密码历史或屏幕中暴露密码</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="默认数据库">默认数据库<a class="hash-link" href="#默认数据库" title="Direct link to heading">​</a></h2><p>// TODO Mysql 默认带的几个数据库的作用</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="sql">SQL<a class="hash-link" href="#sql" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="sql-概念">SQL 概念<a class="hash-link" href="#sql-概念" title="Direct link to heading">​</a></h3><p>结构化查询语言（Structured Query Language），是一种规范，用来操作关系型数据库。但是每种数据库在实现上有略微不同，称为「方言」；</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="分类">分类<a class="hash-link" href="#分类" title="Direct link to heading">​</a></h3><ol><li>DDL（Data Definition Language）数据定义语言：用于操作数据库对象，如数据库、表、字段等。关键字：<code>create</code>、<code>drop</code>、<code>alter</code>、<code>rename</code>、<code>truncate</code> ；</li><li>DML（Data Manipulation Language）数据操作语言：用于操作数据本身。关键字 <code>insert</code>、<code>delete</code>、<code>update</code>、<code>select</code> ；</li><li>DCL（Data Control Language）数据控制语言：用户操作数据库 的访问权限和安全级别，以及管理用户，关键字 <code>grant</code>、<code>revoke</code>、<code>commit</code>、<code>rollback</code>、<code>savepoint</code>。</li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="规则">规则<a class="hash-link" href="#规则" title="Direct link to heading">​</a></h3><ul><li><p>SQL 可以写在一行或者多行。为了提高可读性，各子句分行写，必要时使用缩进</p></li><li><p>每条命令以<code>;</code>或 <code>\g</code>或<code>\G</code>结束</p><ul><li><code>\g</code>和<code>\G</code>只能在命令行中使用</li><li><code>\g</code>和<code>;</code>的效果一样</li><li><code>\G</code>会将结果表转置，行列转换</li></ul></li><li><p>关键字不能被缩写也不能分行</p></li><li><p>关于标点符号</p><ul><li>必须保证所有的<code>()</code>、<code>单引号</code>、<code>双引号</code>是成对结束的</li><li>必须使用<strong>英文</strong>状态下的<strong>半角</strong>输入方式</li><li>字符串型和日期时间类型的数据可以使用单引号表示</li><li>列的别名，尽量使用双引号，而且不建议省略<code>as</code></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="规范">规范<a class="hash-link" href="#规范" title="Direct link to heading">​</a></h3><p>这是建议遵守的，不强制。</p><ul><li>MySQL 在 Windows 环境下是大小写不敏感的</li><li>MySQL 在 Linux 环境下是大小写敏感的<ul><li>数据库名、表名、表的别名、变量名是严格区分大小写的</li><li>关键字、函数名、列名（或字段名）、列的别名（字段的别名）是忽略大小写的。</li></ul></li><li>推荐采用统一的书写规范<ul><li>数据库名、表名、表别名、字段名、字段别名等都小写</li><li>SQL 关键字、函数名、绑定变量等都大写</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="注释">注释<a class="hash-link" href="#注释" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- 单行注释</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 单行注释</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  多行注释</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="select-语句">SELECT 语句<a class="hash-link" href="#select-语句" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">distinct</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> 字段列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> 表名列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> 条件列表</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> 分组条件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">having</span><span class="token plain"> 分组之后的条件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> 排序</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">limit</span><span class="token plain"> 分页条件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">escape</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;转义字符&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="去除重复行">去除重复行<a class="hash-link" href="#去除重复行" title="Direct link to heading">​</a></h3><p>使用关键字<code>DISTINCT</code>去除重复行。</p><ol><li><code>DISTINCT</code>需要放到所有列名的前面</li><li><code>DISTINCT</code>是对后面所有列名的组合进行去重</li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="字段名和关键字冲突">字段名和关键字冲突<a class="hash-link" href="#字段名和关键字冲突" title="Direct link to heading">​</a></h3><p>在表名或字段名和关键字冲突时可能会造成歧义，这是使用着重号包裹字段名来避免歧义。</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">`</span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="转义字符">转义字符<a class="hash-link" href="#转义字符" title="Direct link to heading">​</a></h3><p>默认的转义字符是<code>\</code>。</p><p>比如在使用<code>like</code>进行模糊查询的时候使用<code>_</code>作为单个字符的通配符，如果此时就是需要查询含有下划线的行，则需对其进行转义，如<code>_\__</code>，中间的下划线就被转义了。</p><p>使用<code>ESCAPE</code>来自定义转义字符，如<code>ESCAPE &#x27;&amp;&#x27;</code>，意为使用<code>$</code>作为转义字符，此查询语句中的转义字符不再是<code>\</code>了。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="运算符">运算符<a class="hash-link" href="#运算符" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="算数运算符">算数运算符<a class="hash-link" href="#算数运算符" title="Direct link to heading">​</a></h3><p><img alt="image-20220403174226537" src="/assets/images/image-20220403174226537-57a777ce72596b87ce1893e59ca6e6db.png" width="1221" height="433"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="比较运算符">比较运算符<a class="hash-link" href="#比较运算符" title="Direct link to heading">​</a></h3><p><img alt="image-20220403174250419" src="/assets/images/image-20220403174250419-d8b28fcf04c6a8e8ef33c984f13aec93.png" width="1219" height="204"></p><p><img alt="image-20220403174256832" src="/assets/images/image-20220403174256832-a19217e09b83f4dc38f4fa7ca67d0d74.png" width="1529" height="777"></p><ul><li>如果等号两边的值、字符串或表达式都为字符串，则 MySQL 会按照字符串进行比较，其比较的是每个字符串中字符的 ANSI 编码是否相等。</li><li>如果等号两边的值一个是整数，另一个是字符串，则 MySQL 会将字符串转化为数字进行比较。</li><li>如果等号两边的值、字符串或表达式中有一个为 NULL，则比较结果为 NULL。</li></ul><p><img alt="image-20220403174433605" src="/assets/images/image-20220403174433605-83432244fdd50b446e7632a89a91580d.png" width="1536" height="808"></p><p><img alt="image-20220403174441243" src="/assets/images/image-20220403174441243-ee1d9ea9418d1ae35d136385564e77d7.png" width="1534" height="300"></p><p>LIKE 运算符通常使用如下通配符。</p><ul><li><code>%</code>匹配 0 个或多个字符。</li><li><code>_</code>只能匹配一个字符。</li></ul><p><code>REGEXP</code>和<code>RLIKE</code>均表示用正则表达式进行匹配。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="逻辑运算符">逻辑运算符<a class="hash-link" href="#逻辑运算符" title="Direct link to heading">​</a></h3><p><img alt="image-20220403174952781" src="/assets/images/image-20220403174952781-22c1827d3b761f995b12d9d49ba7a050.png" width="1668" height="408"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="位运算符">位运算符<a class="hash-link" href="#位运算符" title="Direct link to heading">​</a></h3><p><img alt="image-20220403175006134" src="/assets/images/image-20220403175006134-70fa194a3f6a9515658ff3fa2bf15d91.png" width="1668" height="441"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="运算符的优先级">运算符的优先级<a class="hash-link" href="#运算符的优先级" title="Direct link to heading">​</a></h3><p>下图中数字编号越大，优先级越高。</p><p><img alt="image-20220403175025333" src="/assets/images/image-20220403175025333-759e1e3595c2e78e1a313c29f0537bfb.png" width="1337" height="106"></p><p><img alt="image-20220403175029538" src="/assets/images/image-20220403175029538-89b0c36304f0a8dad2a5147a217c2072.png" width="1548" height="806"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="null参与运算"><code>NULL</code>参与运算<a class="hash-link" href="#null参与运算" title="Direct link to heading">​</a></h3><p>所有运算符或列值遇到<code>null</code>值，运算的结果都为<code>null</code>。</p><p>使用下面的方法安全处理<code>null</code>值。</p><ol><li><code>&lt;=&gt;</code></li><li><code>is null</code></li><li><code>is not null</code></li><li><code>isnull()</code></li><li><code>ifnull()</code></li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="排序">排序<a class="hash-link" href="#排序" title="Direct link to heading">​</a></h2><p>使用<code>ORDER BY</code>子句排序。</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> 表 </span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> 字段 </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 字段 </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">asc</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">desc</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li><code>ASC</code>（Ascend），升序，默认排序方式</li><li><code>DESC</code>（Descend），降序</li></ul><p>可以多字段同时排序，在前面字段相同的情况下会比较后面的字段。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="分页">分页<a class="hash-link" href="#分页" title="Direct link to heading">​</a></h2><p>使用<code>LIMIT</code>进行分页。</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> 表 </span><span class="token keyword" style="color:#00009f">limit</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">offset</span><span class="token punctuation" style="color:#393A34">,</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">rows</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li><code>offset</code>表示从第几行之后开始，最小值为<code>0</code>，可省略，默认为<code>0</code></li><li><code>rows</code>表示查询出多少行</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="多表查询">多表查询<a class="hash-link" href="#多表查询" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="内连接">内连接<a class="hash-link" href="#内连接" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> a </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">inner</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> b </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>只会显示两表的交集，结果集的行必须出现在两个表中。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="外连接">外连接<a class="hash-link" href="#外连接" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> a </span><span class="token keyword" style="color:#00009f">left</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">right</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">outer</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> b </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><ul><li>左外连接：结果集中的行不仅包含符合连接条件的行，同时还包括左表中的不符合连接条件的行，这些行中来自副表的字段内容都是<code>NULL</code>。</li><li>右外连接：同理。</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="全链接">全链接<a class="hash-link" href="#全链接" title="Direct link to heading">​</a></h3><p>MySQL 没有全连接，可以使用<code>UNION</code>来实现。</p><ul><li><code>UNION</code>操作符返回两个查询的结果集的并集，去除重复记录。</li><li><code>UNION ALL</code>不除重复记录。</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="sql99-语法新特性">SQL99 语法新特性<a class="hash-link" href="#sql99-语法新特性" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="自然连接">自然连接<a class="hash-link" href="#自然连接" title="Direct link to heading">​</a></h4><p>使用<code>NATURAL JOIN</code>来简化多表查询操作，此时会自动将两表中所有同名字段进行等值连接。</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="using连接"><code>USING</code>连接<a class="hash-link" href="#using连接" title="Direct link to heading">​</a></h4><p>使用<code>USING</code>来简化<code>ON</code>子句，如果连接条件中的字段名称相同的话可以使用。</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> a </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> b </span><span class="token keyword" style="color:#00009f">on</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> a </span><span class="token keyword" style="color:#00009f">join</span><span class="token plain"> b </span><span class="token keyword" style="color:#00009f">using</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="单行函数">单行函数<a class="hash-link" href="#单行函数" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="数值函数">数值函数<a class="hash-link" href="#数值函数" title="Direct link to heading">​</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>ABS(x)</td><td>返回 x 的绝对值</td></tr><tr><td>SIGN(X)</td><td>返回 X 的符号。正数返回 1，负数返回-1，0 返回 0</td></tr><tr><td>PI()</td><td>返回圆周率的值</td></tr><tr><td>CEIL(x)，CEILING(x)</td><td>返回大于或等于某个值的最小整数</td></tr><tr><td>FLOOR(x)</td><td>返回小于或等于某个值的最大整数</td></tr><tr><td>LEAST(e1,e2,e3…)</td><td>返回列表中的最小值</td></tr><tr><td>GREATEST(e1,e2,e3…)</td><td>返回列表中的最大值</td></tr><tr><td>MOD(x,y)</td><td>返回 X 除以 Y 后的余数</td></tr><tr><td>RAND()</td><td>返回 0~1 的随机值</td></tr><tr><td>RAND(x)</td><td>返回 0~1 的随机值，其中 x 的值用作种子值，相同的 X 值会产生相同的随机数</td></tr><tr><td>ROUND(x)</td><td>返回一个对 x 的值进行四舍五入后，最接近于 X 的整数</td></tr><tr><td>ROUND(x,y)</td><td>返回一个对 x 的值进行四舍五入后最接近 X 的值，并保留到小数点后面 Y 位</td></tr><tr><td>TRUNCATE(x,y)</td><td>返回数字 x 截断为 y 位小数的结果</td></tr><tr><td>SQRT(x)</td><td>返回 x 的平方根。当 X 的值为负数时，返回 NULL</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mojV" id="角度与弧度互换函数">角度与弧度互换函数<a class="hash-link" href="#角度与弧度互换函数" title="Direct link to heading">​</a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>RADIANS(x)</td><td>将角度转化为弧度，其中，参数 x 为角度值</td></tr><tr><td>DEGREES(x)</td><td>将弧度转化为角度，其中，参数 x 为弧度值</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mojV" id="三角函数">三角函数<a class="hash-link" href="#三角函数" title="Direct link to heading">​</a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>SIN(x)</td><td>返回 x 的正弦值，其中，参数 x 为弧度值</td></tr><tr><td>ASIN(x)</td><td>返回 x 的反正弦值，即获取正弦为 x 的值。如果 x 的值不在-1 到 1 之间，则返回 NULL</td></tr><tr><td>COS(x)</td><td>返回 x 的余弦值，其中，参数 x 为弧度值</td></tr><tr><td>ACOS(x)</td><td>返回 x 的反余弦值，即获取余弦为 x 的值。如果 x 的值不在-1 到 1 之间，则返回 NULL</td></tr><tr><td>TAN(x)</td><td>返回 x 的正切值，其中，参数 x 为弧度值</td></tr><tr><td>ATAN(x)</td><td>返回 x 的反正切值，即返回正切值为 x 的值</td></tr><tr><td>ATAN2(m,n)</td><td>返回两个参数的反正切值</td></tr><tr><td>COT(x)</td><td>返回 x 的余切值，其中，X 为弧度值</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mojV" id="指数与对数">指数与对数<a class="hash-link" href="#指数与对数" title="Direct link to heading">​</a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>POW(x,y)，POWER(X,Y)</td><td>返回 x 的 y 次方</td></tr><tr><td>EXP(X)</td><td>返回 e 的 X 次方，其中 e 是一个常数，2.718281828459045</td></tr><tr><td>LN(X)，LOG(X)</td><td>返回以 e 为底的 X 的对数，当 X &lt;= 0 时，返回的结果为 NULL</td></tr><tr><td>LOG10(X)</td><td>返回以 10 为底的 X 的对数，当 X &lt;= 0 时，返回的结果为 NULL</td></tr><tr><td>LOG2(X)</td><td>返回以 2 为底的 X 的对数，当 X &lt;= 0 时，返回 NULL</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_mojV" id="进制间的转换">进制间的转换<a class="hash-link" href="#进制间的转换" title="Direct link to heading">​</a></h4><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>BIN(x)</td><td>返回 x 的二进制编码</td></tr><tr><td>HEX(x)</td><td>返回 x 的十六进制编码</td></tr><tr><td>OCT(x)</td><td>返回 x 的八进制编码</td></tr><tr><td>CONV(x,f1,f2)</td><td>返回 f1 进制数变成 f2 进制数</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="字符串函数">字符串函数<a class="hash-link" href="#字符串函数" title="Direct link to heading">​</a></h3><p>MySQL 中，字符串的位置是从 1 开始的。</p><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>ASCII(S)</td><td>返回字符串 S 中的第一个字符的 ASCII 码值</td></tr><tr><td>CHAR_LENGTH(s)</td><td>返回字符串 s 的字符数。作用与 CHARACTER_LENGTH(s) 相同</td></tr><tr><td>LENGTH(s)</td><td>返回字符串 s 的字节数，和字符集有关</td></tr><tr><td>CONCAT(s1,s2,......,sn)</td><td>连接 s1,s2,......,sn 为一个字符串</td></tr><tr><td>CONCAT_WS(x, s1,s2,......,sn)</td><td>同 CONCAT(s1,s2,...) 函数，但是每个字符串之间要加上 x</td></tr><tr><td>INSERT(str, idx, len, replacestr)</td><td>将字符串 str 从第 idx 位置开始，len 个字符长的子串替换为字符串 replacestr</td></tr><tr><td>REPLACE(str, a, b)</td><td>用字符串 b 替换字符串 str 中所有出现的字符串 a</td></tr><tr><td>UPPER(s) 或 UCASE(s)</td><td>将字符串 s 的所有字母转成大写字母</td></tr><tr><td>LOWER(s)  或 LCASE(s)</td><td>将字符串 s 的所有字母转成小写字母</td></tr><tr><td>LEFT(str,n)</td><td>返回字符串 str 最左边的 n 个字符</td></tr><tr><td>RIGHT(str,n)</td><td>返回字符串 str 最右边的 n 个字符</td></tr><tr><td>LPAD(str, len, pad)</td><td>用字符串 pad 对 str 最左边进行填充，直到 str 的长度为 len 个字符</td></tr><tr><td>RPAD(str ,len, pad)</td><td>用字符串 pad 对 str 最右边进行填充，直到 str 的长度为 len 个字符</td></tr><tr><td>LTRIM(s)</td><td>去掉字符串 s 左侧的空格</td></tr><tr><td>RTRIM(s)</td><td>去掉字符串 s 右侧的空格</td></tr><tr><td>TRIM(s)</td><td>去掉字符串 s 开始与结尾的空格</td></tr><tr><td>TRIM(s1 FROM s)</td><td>去掉字符串 s 开始与结尾的 s1</td></tr><tr><td>TRIM(LEADING s1 FROM s)</td><td>去掉字符串 s 开始处的 s1</td></tr><tr><td>TRIM(TRAILING s1 FROM s)</td><td>去掉字符串 s 结尾处的 s1</td></tr><tr><td>REPEAT(str, n)</td><td>返回 str 重复 n 次的结果</td></tr><tr><td>SPACE(n)</td><td>返回 n 个空格</td></tr><tr><td>STRCMP(s1,s2)</td><td>比较字符串 s1,s2 的 ASCII 码值的大小</td></tr><tr><td>SUBSTR(s,index,len)</td><td>返回从字符串 s 的 index 位置其 len 个字符，作用与 SUBSTRING(s,n,len)、MID(s,n,len) 相同</td></tr><tr><td>LOCATE(substr,str)</td><td>返回字符串 substr 在字符串 str 中首次出现的位置，作用于 POSITION(substr IN str)、INSTR(str,substr) 相同。未找到，返回 0</td></tr><tr><td>ELT(m,s1,s2,…,sn)</td><td>返回指定位置的字符串，如果 m=1，则返回 s1，如果 m=2，则返回 s2，如果 m=n，则返回 sn</td></tr><tr><td>FIELD(s,s1,s2,…,sn)</td><td>返回字符串 s 在字符串列表中第一次出现的位置</td></tr><tr><td>FIND_IN_SET(s1,s2)</td><td>返回字符串 s1 在字符串 s2 中出现的位置。其中，字符串 s2 是一个以逗号分隔的字符串</td></tr><tr><td>REVERSE(s)</td><td>返回 s 反转后的字符串</td></tr><tr><td>NULLIF(value1,value2)</td><td>比较两个字符串，如果 value1 与 value2 相等，则返回 NULL，否则返回 value1</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="日期和时间函数">日期和时间函数<a class="hash-link" href="#日期和时间函数" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_mojV" id="流程控制函数">流程控制函数<a class="hash-link" href="#流程控制函数" title="Direct link to heading">​</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>IF(value,value1,value2)</td><td>如果 value 的值为 TRUE，返回 value1，否则返回 value2</td></tr><tr><td>IFNULL(value1, value2)</td><td>如果 value1 不为 NULL，返回 value1，否则返回 value2</td></tr><tr><td>CASE WHEN 条件 1 THEN 结果 1 WHEN 条件 2 THEN 结果 2 .... <!-- -->[ELSE resultn]<!-- --> END</td><td>相当于 Java 的 if...else if...else...</td></tr><tr><td>CASE  expr WHEN 常量值 1 THEN 值 1 WHEN 常量值 1 THEN 值 1 .... <!-- -->[ELSE 值 n]<!-- --> END</td><td>相当于 Java 的 switch...case...</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="加密与解密函数">加密与解密函数<a class="hash-link" href="#加密与解密函数" title="Direct link to heading">​</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>PASSWORD(str)</td><td>返回字符串 str 的加密版本，41 位长的字符串。加密结果<code>不可逆</code>，常用于用户的密码加密</td></tr><tr><td>MD5(str)</td><td>返回字符串 str 的 md5 加密后的值，也是一种加密方式。若参数为 NULL，则会返回 NULL</td></tr><tr><td>SHA(str)</td><td>从原明文密码 str 计算并返回加密后的密码字符串，当参数为 NULL 时，返回 NULL。<code>SHA 加密算法比 MD5 更加安全</code>。</td></tr><tr><td>ENCODE(value,password_seed)</td><td>返回使用 password_seed 作为加密密码加密 value</td></tr><tr><td>DECODE(value,password_seed)</td><td>返回使用 password_seed 作为加密密码解密 value</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="mysql-信息函数">MySQL 信息函数<a class="hash-link" href="#mysql-信息函数" title="Direct link to heading">​</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>VERSION()</td><td>返回当前 MySQL 的版本号</td></tr><tr><td>CONNECTION_ID()</td><td>返回当前 MySQL 服务器的连接数</td></tr><tr><td>DATABASE()，SCHEMA()</td><td>返回 MySQL 命令行当前所在的数据库</td></tr><tr><td>USER()，CURRENT_USER()、SYSTEM_USER()，SESSION_USER()</td><td>返回当前连接 MySQL 的用户名，返回结果格式为“主机名 @用户名”</td></tr><tr><td>CHARSET(value)</td><td>返回字符串 value 自变量的字符集</td></tr><tr><td>COLLATION(value)</td><td>返回字符串 value 的比较规则</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="其他函数">其他函数<a class="hash-link" href="#其他函数" title="Direct link to heading">​</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>FORMAT(value,n)</td><td>返回对数字 value 进行格式化后的结果数据。n 表示<code>四舍五入</code>后保留到小数点后 n 位</td></tr><tr><td>INET_ATON(ipvalue)</td><td>将以点分隔的 IP 地址转化为一个数字</td></tr><tr><td>INET_NTOA(value)</td><td>将数字形式的 IP 地址转化为以点分隔的 IP 地址</td></tr><tr><td>BENCHMARK(n,expr)</td><td>将表达式 expr 重复执行 n 次。用于测试 MySQL 处理 expr 表达式所耗费的时间</td></tr><tr><td>CONVERT(value USING char_code)</td><td>将 value 所使用的字符编码修改为 char_code</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="聚合函数">聚合函数<a class="hash-link" href="#聚合函数" title="Direct link to heading">​</a></h2><p>聚合函数作用于一组数据，并对一组数据返回一个值。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="avg-和-sum-函数">AVG 和 SUM 函数<a class="hash-link" href="#avg-和-sum-函数" title="Direct link to heading">​</a></h3><p>可以对<strong>数值型数据</strong>使用<code>AVG</code>和<code>SUM</code>函数。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="min-和-max-函数">MIN 和 MAX 函数<a class="hash-link" href="#min-和-max-函数" title="Direct link to heading">​</a></h3><p>可以对<strong>任意数据类型</strong>的数据使用<code>MIN</code>和<code>MAX</code>函数。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="count-函数">COUNT 函数<a class="hash-link" href="#count-函数" title="Direct link to heading">​</a></h3><ul><li><p><code>COUNT(*)</code>返回表中记录总数，适用于<strong>任意数据类型</strong>。</p></li><li><p><code>COUNT(expr)</code>返回<strong>expr 不为空</strong>的记录总数。</p></li><li><p><strong>问题：用<code>count(*)</code>，<code>count(1)</code>，<code>count(列名)</code>谁好呢？</strong></p><p>其实，对于 MyISAM 引擎的表是没有区别的。这种引擎内部有一计数器在维护着行数。</p><p>Innodb 引擎的表用<code>count(*)</code>,<code>count(1)</code>直接读行数，复杂度是 O(n)，因为 innodb 真的要去数一遍。但好于具体的<code>count(列名)</code>。</p></li><li><p><strong>问题：能不能使用<code>count(列名)</code>替换<code>count(*)</code>?</strong></p><p>不要使用 count(列名) 来替代 <code>count(*)</code>，<code>count(*)</code>是 SQL92 定义的标准统计行数的语法，跟数据库无关，跟 NULL 和非 NULL 无关。</p><p>说明：<code>count(*)</code>会统计值为 NULL 的行，而<code>count(列名)</code>不会统计此列为 NULL 值的行。</p></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="group-by">GROUP BY<a class="hash-link" href="#group-by" title="Direct link to heading">​</a></h3><p>可以使用<code>GROUP BY</code>子句将表中的数据分成若干组。</p><p>在<code>SELECT</code>列表中的字段都必须出现在<code>GROUP BY</code>子句中，除了在聚合函数中的字段。如果不遵守的话在 MySQL 中不会提示错误，但是这个字段在行中是无意义的。</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain">   department_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">salary</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain">     employees</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> department_id </span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>包含在<code>GROUP BY</code>子句中的列不必包含在<code>SELECT</code>列表中。</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain">   </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">salary</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain">     employees</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> department_id </span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><code>GROUP BY</code>后可以有多个列，此时按这些列的各个组合进行分组。</p><p>使用<code>WITH ROLLUP</code>关键字之后，在所有查询出的分组记录之后增加一条记录，就是将所有组的数据代入到聚合函数中。没有使用聚合函数的列显示为 NULL。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="having">HAVING<a class="hash-link" href="#having" title="Direct link to heading">​</a></h3><ol><li><code>HAVING</code>不能单独使用，必须要跟<code>GROUP BY</code>一起使用。</li><li>用来过滤分组结果，满足条件的分组行才会被查询出来。</li><li>在之后可以使用聚合函数。</li></ol><p><code>WHERE</code>和<code>HAVING</code>的对比。</p><ol><li><code>WHERE</code>跟在<code>FROM</code>后面，<code>HAVING</code>跟在<code>GROUP BY</code>后面；</li><li><code>WHERE</code>后面不能使用聚合函数，<code>HAVING</code>可以；</li><li><code>WHERE</code>在分组前筛选，<code>HAVING</code>在分组后筛选；</li><li>在多表查询中<code>WHERE</code>的效率更高，所以不涉及到聚合函数的条件写在<code>WHERE</code>中更好。</li></ol><h2 class="anchor anchorWithStickyNavbar_mojV" id="select-的执行过程">SELECT 的执行过程<a class="hash-link" href="#select-的执行过程" title="Direct link to heading">​</a></h2><p>在 SELECT 语句执行这些步骤的时候，每个步骤都会产生一个<code>虚拟表</code>，然后将这个虚拟表传入下一个步骤中作为输入。需要注意的是，这些步骤隐含在 SQL 的执行过程中，对于我们来说是不可见的。</p><div class="codeBlockContainer_I0IT language-sql theme-code-block"><div class="codeBlockContent_wNvx sql"><pre tabindex="0" class="prism-code language-sql codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DISTINCT</span><span class="token plain"> player_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> player_name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">count</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> num </span><span class="token comment" style="color:#999988;font-style:italic"># 顺序 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> player </span><span class="token keyword" style="color:#00009f">JOIN</span><span class="token plain"> team </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">team_id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> team</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">team_id </span><span class="token comment" style="color:#999988;font-style:italic"># 顺序 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> height </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.80</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 顺序 2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> player</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">team_id </span><span class="token comment" style="color:#999988;font-style:italic"># 顺序 3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">HAVING</span><span class="token plain"> num </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 顺序 4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> num </span><span class="token keyword" style="color:#00009f">DESC</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 顺序 6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">LIMIT</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># 顺序 7</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="子查询">子查询<a class="hash-link" href="#子查询" title="Direct link to heading">​</a></h2><p>子查询指一个查询语句嵌套在另一个查询语句内部的查询。</p><ul><li>子查询要包含在括号内</li><li>将子查询放在比较条件的右侧</li><li>单行操作符对应单行子查询，多行操作符对应多行子查询</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/notes/c/cmake"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">CMake</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/notes/database/redis"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redis</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#参考资料" class="table-of-contents__link toc-highlight">参考资料</a></li><li><a href="#数据库的作用" class="table-of-contents__link toc-highlight">数据库的作用</a></li><li><a href="#名词解释" class="table-of-contents__link toc-highlight">名词解释</a></li><li><a href="#关系型数据库" class="table-of-contents__link toc-highlight">关系型数据库</a><ul><li><a href="#概念" class="table-of-contents__link toc-highlight">概念</a></li><li><a href="#关系" class="table-of-contents__link toc-highlight">关系</a></li></ul></li><li><a href="#命令行" class="table-of-contents__link toc-highlight">命令行</a></li><li><a href="#默认数据库" class="table-of-contents__link toc-highlight">默认数据库</a></li><li><a href="#sql" class="table-of-contents__link toc-highlight">SQL</a><ul><li><a href="#sql-概念" class="table-of-contents__link toc-highlight">SQL 概念</a></li><li><a href="#分类" class="table-of-contents__link toc-highlight">分类</a></li><li><a href="#规则" class="table-of-contents__link toc-highlight">规则</a></li><li><a href="#规范" class="table-of-contents__link toc-highlight">规范</a></li><li><a href="#注释" class="table-of-contents__link toc-highlight">注释</a></li></ul></li><li><a href="#select-语句" class="table-of-contents__link toc-highlight">SELECT 语句</a><ul><li><a href="#去除重复行" class="table-of-contents__link toc-highlight">去除重复行</a></li><li><a href="#字段名和关键字冲突" class="table-of-contents__link toc-highlight">字段名和关键字冲突</a></li><li><a href="#转义字符" class="table-of-contents__link toc-highlight">转义字符</a></li></ul></li><li><a href="#运算符" class="table-of-contents__link toc-highlight">运算符</a><ul><li><a href="#算数运算符" class="table-of-contents__link toc-highlight">算数运算符</a></li><li><a href="#比较运算符" class="table-of-contents__link toc-highlight">比较运算符</a></li><li><a href="#逻辑运算符" class="table-of-contents__link toc-highlight">逻辑运算符</a></li><li><a href="#位运算符" class="table-of-contents__link toc-highlight">位运算符</a></li><li><a href="#运算符的优先级" class="table-of-contents__link toc-highlight">运算符的优先级</a></li><li><a href="#null参与运算" class="table-of-contents__link toc-highlight"><code>NULL</code>参与运算</a></li></ul></li><li><a href="#排序" class="table-of-contents__link toc-highlight">排序</a></li><li><a href="#分页" class="table-of-contents__link toc-highlight">分页</a></li><li><a href="#多表查询" class="table-of-contents__link toc-highlight">多表查询</a><ul><li><a href="#内连接" class="table-of-contents__link toc-highlight">内连接</a></li><li><a href="#外连接" class="table-of-contents__link toc-highlight">外连接</a></li><li><a href="#全链接" class="table-of-contents__link toc-highlight">全链接</a></li><li><a href="#sql99-语法新特性" class="table-of-contents__link toc-highlight">SQL99 语法新特性</a><ul><li><a href="#自然连接" class="table-of-contents__link toc-highlight">自然连接</a></li><li><a href="#using连接" class="table-of-contents__link toc-highlight"><code>USING</code>连接</a></li></ul></li></ul></li><li><a href="#单行函数" class="table-of-contents__link toc-highlight">单行函数</a><ul><li><a href="#数值函数" class="table-of-contents__link toc-highlight">数值函数</a><ul><li><a href="#角度与弧度互换函数" class="table-of-contents__link toc-highlight">角度与弧度互换函数</a></li><li><a href="#三角函数" class="table-of-contents__link toc-highlight">三角函数</a></li><li><a href="#指数与对数" class="table-of-contents__link toc-highlight">指数与对数</a></li><li><a href="#进制间的转换" class="table-of-contents__link toc-highlight">进制间的转换</a></li></ul></li><li><a href="#字符串函数" class="table-of-contents__link toc-highlight">字符串函数</a></li><li><a href="#日期和时间函数" class="table-of-contents__link toc-highlight">日期和时间函数</a></li><li><a href="#流程控制函数" class="table-of-contents__link toc-highlight">流程控制函数</a></li><li><a href="#加密与解密函数" class="table-of-contents__link toc-highlight">加密与解密函数</a></li><li><a href="#mysql-信息函数" class="table-of-contents__link toc-highlight">MySQL 信息函数</a></li><li><a href="#其他函数" class="table-of-contents__link toc-highlight">其他函数</a></li></ul></li><li><a href="#聚合函数" class="table-of-contents__link toc-highlight">聚合函数</a><ul><li><a href="#avg-和-sum-函数" class="table-of-contents__link toc-highlight">AVG 和 SUM 函数</a></li><li><a href="#min-和-max-函数" class="table-of-contents__link toc-highlight">MIN 和 MAX 函数</a></li><li><a href="#count-函数" class="table-of-contents__link toc-highlight">COUNT 函数</a></li><li><a href="#group-by" class="table-of-contents__link toc-highlight">GROUP BY</a></li><li><a href="#having" class="table-of-contents__link toc-highlight">HAVING</a></li></ul></li><li><a href="#select-的执行过程" class="table-of-contents__link toc-highlight">SELECT 的执行过程</a></li><li><a href="#子查询" class="table-of-contents__link toc-highlight">子查询</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.9c317ce6.js"></script>
<script src="/assets/js/main.15263d31.js"></script>
</body>
</html>