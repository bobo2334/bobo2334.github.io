<!doctype html>
<html class="docs-version-current" lang="zh-cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="æˆ‘çš„å­¦ä¹ ç¬”è®° RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="æˆ‘çš„å­¦ä¹ ç¬”è®° Atom Feed">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><title data-react-helmet="true">RocketMQ | æˆ‘çš„å­¦ä¹ ç¬”è®°</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://bobo2334.github.io/docs/notes/message-queuing/rocketmq"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-cn"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="msapplication-TileColor" contnet="#da532c"><meta data-react-helmet="true" name="theme-color" contnet="#25c2a0"><meta data-react-helmet="true" property="og:title" content="RocketMQ | æˆ‘çš„å­¦ä¹ ç¬”è®°"><meta data-react-helmet="true" name="description" content="MQ"><meta data-react-helmet="true" property="og:description" content="MQ"><link data-react-helmet="true" rel="shortcut icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://bobo2334.github.io/docs/notes/message-queuing/rocketmq"><link data-react-helmet="true" rel="alternate" href="https://bobo2334.github.io/docs/notes/message-queuing/rocketmq" hreflang="zh-cn"><link data-react-helmet="true" rel="alternate" href="https://bobo2334.github.io/docs/notes/message-queuing/rocketmq" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.202caeb0.css">
<link rel="preload" href="/assets/js/runtime~main.67d7c23d.js" as="script">
<link rel="preload" href="/assets/js/main.93cebfe0.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/android-chrome-512x512.png" alt="Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/android-chrome-512x512.png" alt="Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">æˆ‘çš„å­¦ä¹ ç¬”è®°</b></a><a class="navbar__item navbar__link" href="/docs/bookmarks/interesting-projects">ç¬”è®°</a><a class="navbar__item navbar__link" href="/blog/archive">æ–‡ç« </a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bobo2334/bobo2334.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ä¹¦ç­¾</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">è‰ç¨¿</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">å­¦ä¹ ç¬”è®°</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">c</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">java</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">javascript</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">message-queuing</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/notes/message-queuing/rocketmq">RocketMQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">utilities</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RocketMQ</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="mq">MQ<a aria-hidden="true" class="hash-link" href="#mq" title="Direct link to heading">â€‹</a></h2><p>MQï¼ˆMessage Queueï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œæ˜¯ä¸€ç§ FIFO çš„é˜Ÿåˆ—ã€‚</p><p>å®ƒçš„ä½œç”¨æœ‰ï¼š</p><ol><li>å¼‚æ­¥</li><li>è§£è€¦</li><li>å‰Šå³°</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="rocketmq-ä»‹ç»">RocketMQ ä»‹ç»<a aria-hidden="true" class="hash-link" href="#rocketmq-ä»‹ç»" title="Direct link to heading">â€‹</a></h2><p>RcoketMQ æ˜¯ä¸€æ¬¾ä½å»¶è¿Ÿã€é«˜å¯é ã€å¯ä¼¸ç¼©ã€æ˜“äºä½¿ç”¨çš„æ¶ˆæ¯ä¸­é—´ä»¶ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="nameserver">NameServer<a aria-hidden="true" class="hash-link" href="#nameserver" title="Direct link to heading">â€‹</a></h3><p>æ³¨å†Œä¸­å¿ƒï¼Œå¯ä»¥é›†ç¾¤ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="broker">Broker<a aria-hidden="true" class="hash-link" href="#broker" title="Direct link to heading">â€‹</a></h3><p>çœŸæ­£è´Ÿè´£æ¶ˆæ¯æ”¶å‘å’Œå­˜å‚¨çš„å®ä½“ï¼Œå¯ä»¥ä¸»ä»ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å•æœºéƒ¨ç½²">å•æœºéƒ¨ç½²<a aria-hidden="true" class="hash-link" href="#å•æœºéƒ¨ç½²" title="Direct link to heading">â€‹</a></h2><p>å¯ä»¥ä½¿ç”¨ Docker Compose æ¥å¿«é€Ÿéƒ¨ç½² RocketMQã€‚</p><p>RockerMQ åˆ†ä¸º NameServer<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup> å’Œ Broker<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup>ï¼Œå‰è€…ç±»ä¼¼äºæ³¨å†Œä¸­å¿ƒï¼Œåè€…æ‰æ˜¯è¿›è¡Œå­˜å‚¨æ¶ˆæ¯çš„æœåŠ¡ã€‚è¿˜æœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹æœåŠ¡<code>rocket-mq-console-ng</code><sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup><sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup>ï¼Œæ˜¯ RocketMQ çš„ç½‘é¡µæ§åˆ¶å°ã€‚</p><p>RocketMQ çš„ NameServer å’Œ Broker æ˜¯åŒä¸€å¥—ä»£ç ï¼Œåªæ˜¯å¯åŠ¨çš„æ—¶å€™å‚æ•°ä¸ä¸€æ ·ã€‚<code>apacherocketmq/rocketmq-nameserver</code>å’Œ</p><p><code>apacherocketmq/rocketmq-broker</code>åœ¨å¯åŠ¨å‚æ•°ä¸Šæœ‰ä¸åŒã€‚</p><p>RocketMQ çš„æ•°æ®å­˜å‚¨åœ¨<code>user.home</code>ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è®¾ç½®<code>user.home</code>ç¯å¢ƒå˜é‡æ¥è‡ªå®šä¹‰å­˜å‚¨è·¯å¾„ã€‚åœ¨è¿™ä¸¤ä¸ª Docker é•œåƒä¸­ï¼Œè¯¥ç¯å¢ƒå˜é‡çš„å€¼ä¸º<code>/opt</code>ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nameserver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apacherocketmq/rocketmq</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">nameserver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">4.5.0</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nameserver_logs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/root/logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 9876</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">9876</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">JAVA_OPT_EXT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; -Xms128m -Xmx128m -Xmn128m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sh mqnamesrv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">broker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apacherocketmq/rocketmq</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">broker</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">4.5.0</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> broker_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/root/store</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> broker_logs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/root/logs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /root/docker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">compose/rocketmq/broker.conf</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/home/rocketmq/broker.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 10909</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10909</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 10911</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10911</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 10912</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10912</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">JAVA_OPT_EXT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; -Xms128m -Xmx128m -Xmn128m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sh mqbroker </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">c /home/rocketmq/broker.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">console</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apacherocketmq/rocketmq</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">console</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">2.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">depends_on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> nameserver</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> broker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> 8088</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">LOGGIN_LEVEL_ROOT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ROCKETMQ_CONFIG_NAMESRVADDR</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nameserver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">9876</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">JAVA_OPTS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot; -Xms128m -Xmx128m -Xmn128m&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">nameserver_logs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">broker_data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  broker_logs</span><span class="token punctuation" style="color:#393A34">:</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ ¹æ®ä¸Šé¢çš„æ–‡ä»¶ä¸­çš„é…ç½®å†…å®¹ï¼Œä½ è¿˜éœ€è¦ä¸º Broker æä¾›é…ç½®æ–‡ä»¶ï¼Œä½äº<code>/root/docker-compose/rocketmq/broker.conf</code>ã€‚</p><p>éœ€è¦é…ç½® Broker çš„å¤–éƒ¨ IPï¼Œä¸ç„¶å®¢æˆ·ç«¯è¿æ¥ä¸ä¸Šã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI properties"><pre tabindex="0" class="prism-code language-properties codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">brokerClusterName = DefaultCluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brokerName = broker-a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brokerId = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deleteWhen = 04</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fileReservedTime = 48</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brokerRole = ASYNC_MASTER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flushDiskType = ASYNC_FLUSH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namesrvAddr=nameserver:9876</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brokerIP1=192.168.229.129</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">defaultTopicQueueNums=4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autoCreateTopicEnable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">autoCreateSubscriptionGroup=true</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ¥ç€ä½¿ç”¨<code>docker compose up -d</code>å°±å¯ä»¥å¯åŠ¨å®¹å™¨äº†ï¼Œå®¹å™¨åå­—éƒ½ä¼šåŠ ä¸Šå½“å‰æ–‡ä»¶å¤¹åä½œä¸ºå‰ç¼€ã€‚</p><p>å¯ä»¥ä½¿ç”¨<code>docker compose ps</code>æŸ¥çœ‹å®¹å™¨çš„è¿è¡ŒçŠ¶æ€ã€‚</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="é›†ç¾¤éƒ¨ç½²">é›†ç¾¤éƒ¨ç½²<a aria-hidden="true" class="hash-link" href="#é›†ç¾¤éƒ¨ç½²" title="Direct link to heading">â€‹</a></h2><p>// TODO è¿˜æ²¡å­¦ï¼Œå­¦äº†å†å†™</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å¼€å‘">å¼€å‘<a aria-hidden="true" class="hash-link" href="#å¼€å‘" title="Direct link to heading">â€‹</a></h2><p>é¦–å…ˆä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œå®šä¹‰äº†ä¸€äº›å¸¸é‡ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">public class MQConstant {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String NAMESERVER_ADDR = &quot;192.168.229.129:9876&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="åŸç”Ÿ-api">åŸç”Ÿ API<a aria-hidden="true" class="hash-link" href="#åŸç”Ÿ-api" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ¶ˆè´¹è€…æ¨é€">æ¶ˆè´¹è€…ï¼ˆæ¨é€ï¼‰<a aria-hidden="true" class="hash-link" href="#æ¶ˆè´¹è€…æ¨é€" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package example.sync;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Consumer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String CONSUMER_GROUP = &quot;sync_message_consumer&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(CONSUMER_GROUP);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.setNamesrvAddr(MQConstant.NAMESERVER_ADDR);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_LAST_OFFSET);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.subscribe(MQTopicConstant.PRACTISE, MQTagConstant.PRACTISE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.registerMessageListener((MessageListenerOrderly) (msgs, context) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            msgs.forEach(messageExt -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log.info(&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š{}&quot;, messageExt);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log.info(&quot;æ¶ˆæ¯ä½“ï¼š{}&quot;, new String(messageExt.getBody()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return ConsumeOrderlyStatus.SUCCESS;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;Consumer å·²å¯åŠ¨&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Runtime.getRuntime().addShutdownHook(new Thread(() -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info(&quot;ç¨‹åºæ­£åœ¨é€€å‡º&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            consumer.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç”Ÿäº§è€…åŒæ­¥å‘é€">ç”Ÿäº§è€…ï¼ˆåŒæ­¥å‘é€ï¼‰<a aria-hidden="true" class="hash-link" href="#ç”Ÿäº§è€…åŒæ­¥å‘é€" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package example.sync;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Producer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String PRODUCER_GROUP = &quot;sync_message_producer&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultMQProducer producer = new DefaultMQProducer(PRODUCER_GROUP);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        producer.setNamesrvAddr(MQConstant.NAMESERVER_ADDR);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        producer.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Stream.generate(RandomUtil::randomInt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .limit(10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .map(i -&gt; new Message(MQTopicConstant.PRACTISE, MQTagConstant.PRACTISE, StrUtil.format(&quot;Hello RocketMQ: {}&quot;, i).getBytes(StandardCharsets.UTF_8)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .forEach(message -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        SendResult result = producer.send(message, 10000);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        log.info(&quot;æ¶ˆæ¯å·²å‘é€ï¼š{}&quot;, result);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        log.error(&quot;æ¶ˆæ¯å‘é€å¤±è´¥&quot;, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        producer.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç”Ÿäº§è€…å¼‚æ­¥å‘é€">ç”Ÿäº§è€…ï¼ˆå¼‚æ­¥å‘é€ï¼‰<a aria-hidden="true" class="hash-link" href="#ç”Ÿäº§è€…å¼‚æ­¥å‘é€" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package example.producer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AsyncMessageProducer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String PRODUCER_GROUP = &quot;async_message_producer&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final int count = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultMQProducer producer = new DefaultMQProducer(PRODUCER_GROUP);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        producer.setNamesrvAddr(MQConstant.NAMESERVER_ADDR);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        producer.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        CountDownLatch countDownLatch = new CountDownLatch(count);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Stream.generate(RandomUtil::randomInt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .limit(count)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .map(i -&gt; new Message(MQTopicConstant.PRACTISE, MQTagConstant.PRACTISE, StrUtil.format(&quot;Hello RocketMQ: {}&quot;, i).getBytes(StandardCharsets.UTF_8)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .forEach(message -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        producer.send(message, new SendCallback() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            public void onSuccess(SendResult sendResult) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                log.info(&quot;æ¶ˆæ¯å‘é€æˆåŠŸï¼š{}&quot;, sendResult);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                countDownLatch.countDown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            public void onException(Throwable e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                log.error(&quot;æ¶ˆæ¯å‘é€å¤±è´¥&quot;, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                countDownLatch.countDown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        log.info(&quot;æ¶ˆæ¯å·²å‘é€ï¼š{}&quot;, message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    } catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        log.error(&quot;æ¶ˆæ¯å‘é€å¤±è´¥&quot;, e);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        countDownLatch.await();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        producer.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç”Ÿäº§è€…å•å‘å‘é€">ç”Ÿäº§è€…ï¼ˆå•å‘å‘é€ï¼‰<a aria-hidden="true" class="hash-link" href="#ç”Ÿäº§è€…å•å‘å‘é€" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.client.producer.DefaultMQProducer#sendOneway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void sendOneway(Message msg)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ¶ˆè´¹è€…æ‹‰å–">æ¶ˆè´¹è€…ï¼ˆæ‹‰å–ï¼‰<a aria-hidden="true" class="hash-link" href="#æ¶ˆè´¹è€…æ‹‰å–" title="Direct link to heading">â€‹</a></h4><p>ä¸»åŠ¨æ‹‰å–å¯ä»¥æ›´çµæ´»åœ°æ¶ˆè´¹æ¶ˆæ¯ã€‚</p><p>// TODO è¿˜éœ€è¦æ˜ç™½ä¸»åŠ¨æ‹‰å–åçš„æ¶ˆè´¹ç¡®è®¤æœºåˆ¶</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package example.consumer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PullConsumer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String CONSUMER_GROUP = &quot;pull_message_consumer&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        DefaultLitePullConsumer consumer = new DefaultLitePullConsumer(CONSUMER_GROUP);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_LAST_OFFSET);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.setNamesrvAddr(MQConstant.NAMESERVER_ADDR);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.subscribe(MQTopicConstant.PRACTISE, MQTagConstant.ALL);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        consumer.start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (true) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;MessageExt&gt; messages = consumer.poll();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (CollUtil.isEmpty(messages)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            messages.forEach(messageExt -&gt; log.info(&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š{}&quot;, messageExt));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Runtime.getRuntime().addShutdownHook(new Thread(consumer::shutdown));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="é¡ºåºæ¶ˆè´¹">é¡ºåºæ¶ˆè´¹<a aria-hidden="true" class="hash-link" href="#é¡ºåºæ¶ˆè´¹" title="Direct link to heading">â€‹</a></h4><p>é¡ºåºæ¶ˆè´¹è¦åšåˆ°éœ€è¦é¡ºåºæ¶ˆè´¹çš„ä¸€ç»„æ¶ˆæ¯éƒ½å‘é€åˆ°åŒä¸€ä¸ªé˜Ÿåˆ—ä¸Šã€‚æ¶ˆè´¹è€…åœ¨æ¶ˆè´¹çš„æ—¶å€™ä½¿ç”¨ä¸²è¡Œæ¶ˆè´¹è€Œä¸æ˜¯å¹¶å‘æ¶ˆè´¹ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.client.producer.DefaultMQProducer#send</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public SendResult send(Message msg, MessageQueueSelector selector, Object arg)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>MessageQueueSelector</code>å¯ä»¥é€‰æ‹©å‘é€æ¶ˆæ¯åˆ°å“ªä¸ªé˜Ÿåˆ—ä¸Šã€‚</p><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¯ä»¥åŠ¨æ€åœ°é€‰æ‹©é˜Ÿåˆ—æ¥å®ç°è´Ÿè½½å‡è¡¡ï¼Œåªè¦ä¿è¯éœ€è¦é¡ºåºæ¶ˆè´¹çš„åŒä¸€ç»„æ¶ˆæ¯å‘é€åˆ°åŒä¸€ä¸ªé˜Ÿåˆ—ä¸Šå³å¯ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">SendResult sendResult = producer.send(message, (mqs, msg, arg) -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    int i = (Integer) arg % mqs.size();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return mqs.get(i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }, pair.getKey());</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å¹¿æ’­æ¶ˆæ¯">å¹¿æ’­æ¶ˆæ¯<a aria-hidden="true" class="hash-link" href="#å¹¿æ’­æ¶ˆæ¯" title="Direct link to heading">â€‹</a></h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„åœ¨æ¶ˆè´¹æ¶ˆæ¯æ—¶æœ‰ç«äº‰å…³ç³»ã€‚åœ¨æ¶ˆè´¹æ¶ˆæ¯çš„æ—¶å€™è®¾ç½®æ¶ˆè´¹è€…ä¸ºå¹¿æ’­æ¨¡å¼å°±å¯ä»¥è®©æ¶ˆè´¹è€…å»æ‰ç«äº‰å±æ€§ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.client.consumer.DefaultMQPushConsumer#setMessageModel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void setMessageModel(MessageModel messageModel)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>MessageModel</code>é»˜è®¤ä¸º<code>CLUSTERING</code>ï¼Œéœ€è¦è®¾ç½®ä¸º<code>BROADCASTING</code>ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">consumer.setMessageModel(MessageModel.BROADCASTING);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å»¶è¿Ÿæ¶ˆæ¯">å»¶è¿Ÿæ¶ˆæ¯<a aria-hidden="true" class="hash-link" href="#å»¶è¿Ÿæ¶ˆæ¯" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.common.message.Message#setDelayTimeLevel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void setDelayTimeLevel(int level)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯ä»¥ç»™<code>Message</code>è®¾ç½®<code>delayLevel</code>ï¼Œå»¶è¿Ÿçº§åˆ«åˆ†åˆ«ä¸º<code>1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h</code>ï¼Œä» 1 å¼€å§‹æ•°ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ‰¹é‡æ¶ˆæ¯">æ‰¹é‡æ¶ˆæ¯<a aria-hidden="true" class="hash-link" href="#æ‰¹é‡æ¶ˆæ¯" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.client.producer.DefaultMQProducer#send</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public SendResult send(Collection&lt;Message&gt; msgs)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¯ä»¥ç®€å•åœ°æŠŠæ¶ˆæ¯å°è£…ä¸º<code>Collection&lt;Message&gt;</code>ï¼Œä¸€èµ·å‘å‡ºå»ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="è¿‡æ»¤æ¶ˆæ¯">è¿‡æ»¤æ¶ˆæ¯<a aria-hidden="true" class="hash-link" href="#è¿‡æ»¤æ¶ˆæ¯" title="Direct link to heading">â€‹</a></h4><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ Topic å’Œ Tag æ¥è¿‡æ»¤æ¶ˆæ¯ã€‚</p><p>Tag å¯ä»¥ç”¨è¡¨è¾¾å¼å†™ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">consumer.subscribe(MQTopicConstant.PRACTISE, MessageSelector.byTag(&quot;TAG&quot;));</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>åœ¨å¤æ‚æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥é€šè¿‡ SQL è¯­å¥æ¥è¿‡æ»¤æ¶ˆæ¯ã€‚</p><p><img alt="image-20210808203938656" src="/assets/images/image-20210808203938656-16284263806451-7f89deb7e411d26cee0f7df6201228d8.png"></p><p>å…¶ä¸­å˜é‡<code>a</code>å¯ä»¥åœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™é€šè¿‡<code>putUserProperty()</code>æ”¾å…¥ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.common.message.Message#putUserProperty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void putUserProperty(final String name, final String value)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>åªæœ‰æ¨é€æ¨¡å¼çš„ Consumer å¯ä»¥ä½¿ç”¨æ¶ˆæ¯è¿‡æ»¤ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="äº‹åŠ¡æ¶ˆæ¯">äº‹åŠ¡æ¶ˆæ¯<a aria-hidden="true" class="hash-link" href="#äº‹åŠ¡æ¶ˆæ¯" title="Direct link to heading">â€‹</a></h4><p><img alt="image-20210808210014135" src="/assets/images/image-20210808210014135-b1531c7018ce5af37f983e4f3d4116fe.png"></p><p>äº‹åŠ¡æ¶ˆæ¯çš„æœºåˆ¶æ˜¯åœ¨å‘é€æ¶ˆæ¯æ—¶ä¼šå‘é€ä¸€ä¸ªåŠæ¶ˆæ¯ï¼Œè¿™ä¸ªæ¶ˆæ¯å­˜æ”¾åœ¨ç³»ç»Ÿåˆ›å»ºçš„ Topic ä¸­ï¼Œå¯¹æ¶ˆè´¹è€…æ˜¯ä¸å¯è§çš„ã€‚åœ¨ç”Ÿäº§è€…å¯¹æ¶ˆæ¯è¿›è¡Œæäº¤ä¹‹åæ‰ä¼šæŠŠæ¶ˆæ¯è½¬ç§»åˆ°ç›®æ ‡ Topicã€‚å¦‚æœç”Ÿäº§è€…æ²¡æœ‰å¯¹æ¶ˆæ¯è¿›è¡Œæäº¤ï¼ŒRocketMQ ä¼šæ¯éš”ä¸€æ®µæ—¶é—´è¿›è¡Œå›æŸ¥ï¼Œç¡®è®¤æœ¬åœ°äº‹åŠ¡æ˜¯å¦å·²æäº¤æˆåŠŸï¼Œå¦‚æœæ˜¯åˆ™æŠŠæ¶ˆæ¯è½¬ç§»åˆ°ç›®æ ‡ Topicï¼Œå¦åˆ™è‹¥è¶…è¿‡æœ€å¤§å›æŸ¥å°è¯•æ¬¡æ•°åˆ™ä¸¢å¼ƒæ¶ˆæ¯ï¼Œé»˜è®¤æœ€å¤§é‡è¯•æ¬¡æ•°ä¸º 15ã€‚</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="spring-boot">Spring Boot<a aria-hidden="true" class="hash-link" href="#spring-boot" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="é…ç½®">é…ç½®<a aria-hidden="true" class="hash-link" href="#é…ç½®" title="Direct link to heading">â€‹</a></h4><p>é…ç½®è§£è€¦ï¼Œå†™åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI properties"><pre tabindex="0" class="prism-code language-properties codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">rocketmq.name-server=192.168.229.129:9876</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rocketmq.producer.group=spring-boot-producer-group</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç”Ÿäº§è€…åŒæ­¥å‘é€-1">ç”Ÿäº§è€…ï¼ˆåŒæ­¥å‘é€ï¼‰<a aria-hidden="true" class="hash-link" href="#ç”Ÿäº§è€…åŒæ­¥å‘é€-1" title="Direct link to heading">â€‹</a></h4><p>æ ¸å¿ƒæ˜¯<code>RocketMQTemplate</code>ï¼Œæ¶ˆæ¯çš„å‘é€éƒ½ä¾èµ–å®ƒå®Œæˆã€‚<code>RocketMQTemplate</code>å·²ç»åœ¨ Spring å®¹å™¨ä¸­ï¼Œå¯ä»¥è‡ªåŠ¨æ³¨å…¥æ‹¿åˆ°ã€‚å…¶ä¸­<code>destination</code>çš„æ ¼å¼ä¸º<code>${topic}:${tag}</code>ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.springframework.messaging.core.AbstractMessageSendingTemplate#send</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void send(D destination, Message&lt;?&gt; message)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å‘é€æ¶ˆæ¯ç”¨<code>send()</code>ï¼Œå‚æ•°ä¸­çš„<code>Message</code>å®é™…ä¸Šæ˜¯<code>org.springframework.messaging.Message</code>ï¼Œè€Œä¸æ˜¯<code>org.apache.rocketmq.common.message.Message</code>ã€‚</p><p><code>Message</code>å¯ä»¥ç”¨<code>MessageBuilder</code>æ„å»ºã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">MessageBuilder.withPayload(payload).build();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç”Ÿäº§è€…å¼‚æ­¥å‘é€-1">ç”Ÿäº§è€…ï¼ˆå¼‚æ­¥å‘é€ï¼‰<a aria-hidden="true" class="hash-link" href="#ç”Ÿäº§è€…å¼‚æ­¥å‘é€-1" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.spring.core.RocketMQTemplate#asyncSend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void asyncSend(String destination, Message&lt;?&gt; message, SendCallback sendCallback)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç”Ÿäº§è€…å•å‘å‘é€-1">ç”Ÿäº§è€…ï¼ˆå•å‘å‘é€ï¼‰<a aria-hidden="true" class="hash-link" href="#ç”Ÿäº§è€…å•å‘å‘é€-1" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.spring.core.RocketMQTemplate#sendOneWay</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void sendOneWay(String destination, Message&lt;?&gt; message)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ¶ˆè´¹è€…æ¨é€-1">æ¶ˆè´¹è€…ï¼ˆæ¨é€ï¼‰<a aria-hidden="true" class="hash-link" href="#æ¶ˆè´¹è€…æ¨é€-1" title="Direct link to heading">â€‹</a></h4><p>æ¶ˆæ¯çš„æ¶ˆè´¹æœ‰äº†æ–°çš„æŠ½è±¡ã€‚åªéœ€å®ç°<code>RocketMQListener</code>æ¥å£å°±å¯ä»¥å¿«é€Ÿå®Œæˆæ¶ˆæ¯æ¶ˆè´¹ã€‚è®¾è®¡åŸåˆ™æ˜¯ä¸€ä¸ªæ¥å£æ¶ˆè´¹ä¸€ç§æ¶ˆæ¯ï¼Œå¦‚æœéœ€è¦æ¶ˆè´¹å…¶ä»–æ¶ˆæ¯åˆ™éœ€è¦å¤šä¸ªæ¥å£ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.rocketmqinspringboot.listener;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RocketMQMessageListener(consumerGroup = MQConstant.CONSUMER_GROUP, topic = MQTopicConstant.PRACTISE, selectorExpression = MQTagConstant.PRACTISE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Consumer implements RocketMQListener&lt;String&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void onMessage(String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š{}&quot;, message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä¸Šé¢çš„ä¾‹å­ä¼šç›´æ¥æ‹¿åˆ°æ¶ˆæ¯ä¸­çš„ Payload å¹¶ä¸”å°†ä¹‹è½¬ä¸ºæ³›å‹å¯¹åº”ç±»å‹çš„å¯¹è±¡ã€‚å¦‚æœä½ éœ€è¦æ‹¿åˆ°æ¶ˆæ¯çš„å¤´éƒ¨ä¿¡æ¯ï¼ŒæŠŠæ³›å‹è®¾ç½®ä¸º<code>MessageExt</code>ï¼Œå…¶ä¸­å¯ä»¥æ‹¿åˆ°å¤´éƒ¨ä¿¡æ¯ <sup id="fnref-5"><a href="#fn-5" class="footnote-ref">5</a></sup>ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="é¡ºåºæ¶ˆè´¹-1">é¡ºåºæ¶ˆè´¹<a aria-hidden="true" class="hash-link" href="#é¡ºåºæ¶ˆè´¹-1" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.spring.core.RocketMQTemplate#sendAndReceive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public &lt;T&gt; T sendAndReceive(String destination, Message&lt;?&gt; message, Type type, String hashKey)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç”Ÿäº§è€…åŒä¸€ç»„æ¶ˆæ¯æŒ‡å®šç›¸åŒçš„<code>hashKey</code>ï¼Œåˆ™è¯¥ç»„æ¶ˆæ¯ä¼šè¢«å‘é€åˆ°åŒä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸Šã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.spring.annotation.RocketMQMessageListener#consumeMode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ConsumeMode consumeMode() default ConsumeMode.CONCURRENTLY;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ¶ˆè´¹è€…æŠŠ<code>consumeMode</code>è®¾ç½®ä¸º<code>ORDERLY</code>ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å¹¿æ’­æ¶ˆæ¯-1">å¹¿æ’­æ¶ˆæ¯<a aria-hidden="true" class="hash-link" href="#å¹¿æ’­æ¶ˆæ¯-1" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.spring.annotation.RocketMQMessageListener#messageModel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MessageModel messageModel() default MessageModel.CLUSTERING;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="è¿‡æ»¤æ¶ˆæ¯-1">è¿‡æ»¤æ¶ˆæ¯<a aria-hidden="true" class="hash-link" href="#è¿‡æ»¤æ¶ˆæ¯-1" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.spring.annotation.RocketMQMessageListener#selectorType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SelectorType selectorType() default SelectorType.TAG;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.spring.annotation.RocketMQMessageListener#selectorExpression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String selectorExpression() default &quot;*&quot;;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="äº‹åŠ¡æ¶ˆæ¯-1">äº‹åŠ¡æ¶ˆæ¯<a aria-hidden="true" class="hash-link" href="#äº‹åŠ¡æ¶ˆæ¯-1" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// org.apache.rocketmq.spring.core.RocketMQTemplate#sendMessageInTransaction</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public TransactionSendResult sendMessageInTransaction(final String destination, final Message&lt;?&gt; message, final Object arg)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å‘é€äº‹åŠ¡æ¶ˆæ¯ä¾èµ–<code>sendMessageInTransaction</code>å®Œæˆã€‚<code>arg</code>ä½œä¸ºè‡ªå®šä¹‰å‚æ•°ä¼šè¢«ä¼ é€’åˆ°<code>RocketMQLocalTransactionListener#executeLocalTransaction</code>ä¸­ï¼Œæœ¬åœ°äº‹åŠ¡é€»è¾‘ä¼šåœ¨è¯¥æ–¹æ³•ä¸­å®Œæˆã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.rocketmqinspringboot.controller;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Operation(summary = &quot;å‘äº‹åŠ¡æ¶ˆæ¯&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@PostMapping(&quot;/transaction&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void sendTransactionMessage(@RequestBody String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TransactionSendResult transactionSendResult = rocketMQTemplate.sendMessageInTransaction(getDestination(), getMessage(message), message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log.info(&quot;transactionSendResult: {}&quot;, transactionSendResult);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.rocketmqinspringboot.listener;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RocketMQTransactionListener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class TransactionListener implements RocketMQLocalTransactionListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RocketMQLocalTransactionState executeLocalTransaction(Message msg, Object arg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String orderNumber = new String((byte[]) msg.getPayload());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;æ‰§è¡Œäº‹åŠ¡ï¼Œ{}&quot;, orderNumber);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return RocketMQLocalTransactionState.UNKNOWN;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RocketMQLocalTransactionState checkLocalTransaction(Message msg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String orderNumber = new String((byte[]) msg.getPayload());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;å›æŸ¥ï¼Œ{}&quot;, orderNumber);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return RocketMQLocalTransactionState.COMMIT;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å‘é€äº‹åŠ¡æ¶ˆæ¯æ—¶ï¼Œä¸€ä¸ª<code>RocketMQTemplate</code>å¯¹åº”ä¸€ä¸ª<code>RocketMQLocalTransactionListener</code>ï¼Œè¯¥<code>RocketMQTemplate</code>æ‰€å‘å‡ºçš„äº‹åŠ¡æ¶ˆæ¯éƒ½ä¼šåœ¨å¯¹åº”çš„<code>RocketMQLocalTransactionListener</code>ä¸­æ‰§è¡Œã€‚</p><p>å¦‚æœéœ€è¦å®šä¹‰å¤šä¸ªäº‹åŠ¡æ¶ˆæ¯ç›‘å¬å™¨ï¼Œå°±éœ€è¦å¤šä¸ª<code>RocketMQListener</code>ï¼Œå¯¹åº”å¤šä¸ª<code>RocketMQLocalTransactionListener</code>ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.rocketmqinspringboot.config;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@ExtRocketMQTemplateConfiguration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ExtRocketMQTemplate extends RocketMQTemplate {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.rocketmqinspringboot.listener;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RocketMQTransactionListener(rocketMQTemplateBeanName = &quot;extRocketMQTemplate&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ExtTransactionListener implements RocketMQLocalTransactionListener {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RocketMQLocalTransactionState executeLocalTransaction(Message msg, Object arg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return RocketMQLocalTransactionState.UNKNOWN;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public RocketMQLocalTransactionState checkLocalTransaction(Message msg) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return RocketMQLocalTransactionState.COMMIT;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="spring-cloud-stream">Spring Cloud Stream<a aria-hidden="true" class="hash-link" href="#spring-cloud-stream" title="Direct link to heading">â€‹</a></h3><p>Spring Cloud Stream æ˜¯ Spring å®˜æ–¹æä¾›çš„ä¸€ä¸ªé’ˆå¯¹æ‰€æœ‰å¼€æºçš„æ¶ˆæ¯ç³»ç»Ÿè¿›è¡Œç»Ÿä¸€å°è£…ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="é…ç½®-1">é…ç½®<a aria-hidden="true" class="hash-link" href="#é…ç½®-1" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.rocketmqspringcloudstream;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableBinding({Source.class, Sink.class})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class RocketmqSpringCloudStreamApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(RocketmqSpringCloudStreamApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>Source</code>å’Œ<code>Sink</code>æ˜¯ Spring Cloud Stream æä¾›çš„ç®€å•çš„æ¶ˆæ¯è¾“å…¥å’Œè¾“å‡ºé€šé“ã€‚</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI properties"><pre tabindex="0" class="prism-code language-properties codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">spring.cloud.stream.bindings.input.destination=STREAM_TOPIC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.cloud.stream.bindings.input.group=STREAM_GROUP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.cloud.stream.bindings.output.destination=STREAM_TOPIC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring.cloud.stream.rocketmq.binder.name-server=192.168.229.129:9876</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Spring Cloud Stream å…³äºæ¶ˆæ¯ç”Ÿäº§å’Œæ¶ˆè´¹çš„é…ç½®éƒ½æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚</p><p><code>spring.cloud.stream.bindings</code>æ˜¯ä¸€ä¸ª<code>Map</code>ï¼Œå¯ä»¥é…ç½®å¤šä¸ªé€šé“ï¼Œ<code>input</code>å°±æ˜¯<code>Sink</code>çš„é€šé“åï¼Œ<code>output</code>å°±æ˜¯<code>Source</code>çš„é€šé“åã€‚</p><p>å¦‚æœéœ€è¦å®šä¹‰å…¶ä»–é€šé“å°±æ–°å¢é…ç½®æ–‡ä»¶ï¼Œç„¶åæ–°å¢ç±»ä¼¼äº<code>Sink</code>å’Œ<code>Sourec</code>çš„æ¥å£ã€‚</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç”Ÿäº§è€…">ç”Ÿäº§è€…<a aria-hidden="true" class="hash-link" href="#ç”Ÿäº§è€…" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.rocketmqspringcloudstream.controller;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Tag(name = &quot;æ¶ˆæ¯&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@RequestMapping(&quot;/messages&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MessageController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Source source;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Operation(summary = &quot;å‘åŒæ­¥æ¶ˆæ¯&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @PostMapping(&quot;/sync&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void sendSync(@RequestBody String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Map&lt;String, Object&gt; headers = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        headers.put(MessageConst.PROPERTY_TAGS, MQTagConstant.PRACTISE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Message&lt;String&gt; msg = MessageBuilder.createMessage(message, new MessageHeaders(headers));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        boolean success = source.output().send(msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;success: {}&quot;, success);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ¶ˆè´¹è€…">æ¶ˆè´¹è€…<a aria-hidden="true" class="hash-link" href="#æ¶ˆè´¹è€…" title="Direct link to heading">â€‹</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI java"><pre tabindex="0" class="prism-code language-java codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">package com.example.rocketmqspringcloudstream.consumer;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Consumer {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @StreamListener(Sink.INPUT)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void consume(String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info(&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š{}&quot;, message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™<a aria-hidden="true" class="hash-link" href="#å‚è€ƒèµ„æ–™" title="Direct link to heading">â€‹</a></h2><ol><li><a href="https://www.bilibili.com/video/BV1h54y1H7YF" target="_blank" rel="noopener noreferrer">2021 å¹´ B ç«™è®²çš„æœ€ç‰›æ°çš„ RocketMQ åˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ï¼šæ ¸å¿ƒåŸç†ä¸æœ€ä½³å®è·µ_å“”å“©å“”å“©_bilibili</a></li><li><a href="http://rocketmq.apache.org/" target="_blank" rel="noopener noreferrer">Apache RocketMQ</a></li><li><a href="https://github.com/apache/rocketmq/tree/master/docs/cn" target="_blank" rel="noopener noreferrer">rocketmq/docs/cn at master Â· apache/rocketmq</a></li><li><a href="https://github.com/apache/rocketmq-externals/tree/master/rocketmq-console" target="_blank" rel="noopener noreferrer">rocketmq-externals/rocketmq-console at master Â· apache/rocketmq-externals</a></li><li><a href="https://www.jianshu.com/p/706588323276" target="_blank" rel="noopener noreferrer">åŸºäº Docker å®‰è£… RocketMQ - ç®€ä¹¦</a></li><li><a href="https://github.com/apache/rocketmq-docker/blob/master/templates/docker-compose/docker-compose.yml" target="_blank" rel="noopener noreferrer">rocketmq-docker/docker-compose.yml at master Â· apache/rocketmq-docker</a></li><li><a href="https://github.com/apache/rocketmq-spring/wiki/%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C" target="_blank" rel="noopener noreferrer">ç”¨æˆ·æ‰‹å†Œ Â· apache/rocketmq-spring Wiki</a></li></ol><div class="footnotes"><hr><ol><li id="fn-1"><a href="https://hub.docker.com/r/apacherocketmq/rocketmq-nameserver" target="_blank" rel="noopener noreferrer">apacherocketmq/rocketmq-nameserver - Docker Image | Docker Hub</a><a href="#fnref-1" class="footnote-backref">â†©</a></li><li id="fn-2"><a href="https://hub.docker.com/r/apacherocketmq/rocketmq-broker" target="_blank" rel="noopener noreferrer">apacherocketmq/rocketmq-broker - Docker Image | Docker Hub</a><a href="#fnref-2" class="footnote-backref">â†©</a></li><li id="fn-3"><a href="https://hub.docker.com/r/apacherocketmq/rocketmq-console" target="_blank" rel="noopener noreferrer">apacherocketmq/rocketmq-console - Docker Image | Docker Hub</a><a href="#fnref-3" class="footnote-backref">â†©</a></li><li id="fn-4"><a href="https://github.com/apache/rocketmq-externals/tree/master/rocketmq-console" target="_blank" rel="noopener noreferrer">rocketmq-externals/rocketmq-console at master Â· apache/rocketmq-externals</a><a href="#fnref-4" class="footnote-backref">â†©</a></li><li id="fn-5"><a href="https://github.com/apache/rocketmq-spring/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" target="_blank" rel="noopener noreferrer">å¸¸è§é—®é¢˜ Â· apache/rocketmq-spring Wiki</a><a href="#fnref-5" class="footnote-backref">â†©</a></li></ol></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/notes/javascript/weapp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->å¾®ä¿¡å°ç¨‹åº</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/notes/utilities/editorconfig"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EditorConfig<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#mq" class="table-of-contents__link toc-highlight">MQ</a></li><li><a href="#rocketmq-ä»‹ç»" class="table-of-contents__link toc-highlight">RocketMQ ä»‹ç»</a><ul><li><a href="#nameserver" class="table-of-contents__link toc-highlight">NameServer</a></li><li><a href="#broker" class="table-of-contents__link toc-highlight">Broker</a></li></ul></li><li><a href="#å•æœºéƒ¨ç½²" class="table-of-contents__link toc-highlight">å•æœºéƒ¨ç½²</a></li><li><a href="#é›†ç¾¤éƒ¨ç½²" class="table-of-contents__link toc-highlight">é›†ç¾¤éƒ¨ç½²</a></li><li><a href="#å¼€å‘" class="table-of-contents__link toc-highlight">å¼€å‘</a><ul><li><a href="#åŸç”Ÿ-api" class="table-of-contents__link toc-highlight">åŸç”Ÿ API</a><ul><li><a href="#æ¶ˆè´¹è€…æ¨é€" class="table-of-contents__link toc-highlight">æ¶ˆè´¹è€…ï¼ˆæ¨é€ï¼‰</a></li><li><a href="#ç”Ÿäº§è€…åŒæ­¥å‘é€" class="table-of-contents__link toc-highlight">ç”Ÿäº§è€…ï¼ˆåŒæ­¥å‘é€ï¼‰</a></li><li><a href="#ç”Ÿäº§è€…å¼‚æ­¥å‘é€" class="table-of-contents__link toc-highlight">ç”Ÿäº§è€…ï¼ˆå¼‚æ­¥å‘é€ï¼‰</a></li><li><a href="#ç”Ÿäº§è€…å•å‘å‘é€" class="table-of-contents__link toc-highlight">ç”Ÿäº§è€…ï¼ˆå•å‘å‘é€ï¼‰</a></li><li><a href="#æ¶ˆè´¹è€…æ‹‰å–" class="table-of-contents__link toc-highlight">æ¶ˆè´¹è€…ï¼ˆæ‹‰å–ï¼‰</a></li><li><a href="#é¡ºåºæ¶ˆè´¹" class="table-of-contents__link toc-highlight">é¡ºåºæ¶ˆè´¹</a></li><li><a href="#å¹¿æ’­æ¶ˆæ¯" class="table-of-contents__link toc-highlight">å¹¿æ’­æ¶ˆæ¯</a></li><li><a href="#å»¶è¿Ÿæ¶ˆæ¯" class="table-of-contents__link toc-highlight">å»¶è¿Ÿæ¶ˆæ¯</a></li><li><a href="#æ‰¹é‡æ¶ˆæ¯" class="table-of-contents__link toc-highlight">æ‰¹é‡æ¶ˆæ¯</a></li><li><a href="#è¿‡æ»¤æ¶ˆæ¯" class="table-of-contents__link toc-highlight">è¿‡æ»¤æ¶ˆæ¯</a></li><li><a href="#äº‹åŠ¡æ¶ˆæ¯" class="table-of-contents__link toc-highlight">äº‹åŠ¡æ¶ˆæ¯</a></li></ul></li><li><a href="#spring-boot" class="table-of-contents__link toc-highlight">Spring Boot</a><ul><li><a href="#é…ç½®" class="table-of-contents__link toc-highlight">é…ç½®</a></li><li><a href="#ç”Ÿäº§è€…åŒæ­¥å‘é€-1" class="table-of-contents__link toc-highlight">ç”Ÿäº§è€…ï¼ˆåŒæ­¥å‘é€ï¼‰</a></li><li><a href="#ç”Ÿäº§è€…å¼‚æ­¥å‘é€-1" class="table-of-contents__link toc-highlight">ç”Ÿäº§è€…ï¼ˆå¼‚æ­¥å‘é€ï¼‰</a></li><li><a href="#ç”Ÿäº§è€…å•å‘å‘é€-1" class="table-of-contents__link toc-highlight">ç”Ÿäº§è€…ï¼ˆå•å‘å‘é€ï¼‰</a></li><li><a href="#æ¶ˆè´¹è€…æ¨é€-1" class="table-of-contents__link toc-highlight">æ¶ˆè´¹è€…ï¼ˆæ¨é€ï¼‰</a></li><li><a href="#é¡ºåºæ¶ˆè´¹-1" class="table-of-contents__link toc-highlight">é¡ºåºæ¶ˆè´¹</a></li><li><a href="#å¹¿æ’­æ¶ˆæ¯-1" class="table-of-contents__link toc-highlight">å¹¿æ’­æ¶ˆæ¯</a></li><li><a href="#è¿‡æ»¤æ¶ˆæ¯-1" class="table-of-contents__link toc-highlight">è¿‡æ»¤æ¶ˆæ¯</a></li><li><a href="#äº‹åŠ¡æ¶ˆæ¯-1" class="table-of-contents__link toc-highlight">äº‹åŠ¡æ¶ˆæ¯</a></li></ul></li><li><a href="#spring-cloud-stream" class="table-of-contents__link toc-highlight">Spring Cloud Stream</a><ul><li><a href="#é…ç½®-1" class="table-of-contents__link toc-highlight">é…ç½®</a></li><li><a href="#ç”Ÿäº§è€…" class="table-of-contents__link toc-highlight">ç”Ÿäº§è€…</a></li><li><a href="#æ¶ˆè´¹è€…" class="table-of-contents__link toc-highlight">æ¶ˆè´¹è€…</a></li></ul></li></ul></li><li><a href="#å‚è€ƒèµ„æ–™" class="table-of-contents__link toc-highlight">å‚è€ƒèµ„æ–™</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.67d7c23d.js"></script>
<script src="/assets/js/main.93cebfe0.js"></script>
</body>
</html>